import{A as Md,B as Ld,C as Hd,D as Nd,E as lr,F as Ud,G as Vd,H as Fd,I as Yd,J as zd,a as qa,b as Kl,c as Ko,d as Yl,e as Yo,f as zl,g as ql,h as Gl,i as jl,j as _u,k as zu,l as qu,m as bd,n as kt,o as Cd,p as Pd,q as Rd,r as kd,s as Id,t as cr,u as Ed,v as Ad,w as ls,x as Od,y as Dd,z as _d}from"https://app.gitbook.com/public/app/chunks/chunk-ISV2ZP5C.min.js";import{a as Qn,c as Wl}from"https://app.gitbook.com/public/app/chunks/chunk-TCCNHHJO.min.js";import{a as Wd}from"https://app.gitbook.com/public/app/chunks/chunk-QGWU5YSO.min.js";import{a as B,c as Bd}from"https://app.gitbook.com/public/app/chunks/chunk-GXOXL43X.min.js";import{b as ey}from"https://app.gitbook.com/public/app/chunks/chunk-LPGH2YNM.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-UDKMSGZ6.min.js";import{S as $u,T as Xu,a as Cu,f as Vu,g as Fu}from"https://app.gitbook.com/public/app/chunks/chunk-ZNPWPYWW.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-YR23MWEZ.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-D4KI3Y6W.min.js";import{a as jr}from"https://app.gitbook.com/public/app/chunks/chunk-HD2VY6PA.min.js";import{c as Lu,d as Hu,g as ei,h as ti,j as $r,k as oi,l as Qu,m as Sd,n as wd}from"https://app.gitbook.com/public/app/chunks/chunk-XJALPKKS.min.js";import{b as Vl,c as qr,f as Fl}from"https://app.gitbook.com/public/app/chunks/chunk-WYD34NA5.min.js";import{a as Mo,b as $c}from"https://app.gitbook.com/public/app/chunks/chunk-XLOA74UR.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-7L5GL2IG.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-BRUX3ZSC.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-VWAYFPAI.min.js";import{a as Zu,b as nn,c as ed,d as Kd}from"https://app.gitbook.com/public/app/chunks/chunk-FDISDX3V.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-QQ2RD2AG.min.js";import{a as ui,b as di}from"https://app.gitbook.com/public/app/chunks/chunk-7JA7F4YB.min.js";import{a as Qc}from"https://app.gitbook.com/public/app/chunks/chunk-QNVKWMXV.min.js";import{c as nd}from"https://app.gitbook.com/public/app/chunks/chunk-FCEYTIH7.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-C2IPKGJ4.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-MP2MIL4H.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-CYCBOTTZ.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-6WBNIDAQ.min.js";import{a as xd}from"https://app.gitbook.com/public/app/chunks/chunk-S4BMYHLI.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-JAPHWXHQ.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-VPQQPLPH.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-NZGQRKE4.min.js";import{a as ud}from"https://app.gitbook.com/public/app/chunks/chunk-MBL4URKW.min.js";import{c as Mu,e as ci,f as pd,g as sr}from"https://app.gitbook.com/public/app/chunks/chunk-3LF3R3O6.min.js";import{a as uu,b as Go}from"https://app.gitbook.com/public/app/chunks/chunk-2BGAOERV.min.js";import{a as Wu}from"https://app.gitbook.com/public/app/chunks/chunk-3L7KC2TE.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-ENHYHO2H.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-LMQVBUPY.min.js";import{c as Vt,f as Yu}from"https://app.gitbook.com/public/app/chunks/chunk-AWZAXYMB.min.js";import{d as xu,e as os,f as Eu,g as Au,i as Zo,k as Ku}from"https://app.gitbook.com/public/app/chunks/chunk-36OFVEBD.min.js";import{b as Ou,c as Du,d as L}from"https://app.gitbook.com/public/app/chunks/chunk-VK7XK62Y.min.js";import{e as cs}from"https://app.gitbook.com/public/app/chunks/chunk-7YGM5RU5.min.js";import{e as Gu,f as ni,g as ju,j as ri}from"https://app.gitbook.com/public/app/chunks/chunk-EV67HIMY.min.js";import{a as je}from"https://app.gitbook.com/public/app/chunks/chunk-EBBJAMTT.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-DZRSE7TB.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-2VEDDHLO.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-JE3FFDV2.min.js";import{a as dd}from"https://app.gitbook.com/public/app/chunks/chunk-EAITRZCX.min.js";import{a as rn,b as Qr,d as td,e as li}from"https://app.gitbook.com/public/app/chunks/chunk-6K26IYGW.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-DUR44HX4.min.js";import{c as Td}from"https://app.gitbook.com/public/app/chunks/chunk-WGJIMOWM.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-D52LVDW2.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-F2SYFY22.min.js";import{b as Ft,d as ss,e as od,f as id,g as ad,h as sd,i as cd,j as ld,l as si,m as ar,o as vd}from"https://app.gitbook.com/public/app/chunks/chunk-WPXMSIM7.min.js";import{L as jc,M as Lo,O as Gn,P as jn,W as iu,X as au,Y as ge,Z as su,ca as cu,da as lu,ea as z,ia as Jo,ja as ts,la as ii,ma as rd,na as is,qa as as,ta as ir,va as ai}from"https://app.gitbook.com/public/app/chunks/chunk-E3WGWRR5.min.js";import{a as Nu,p as Ju}from"https://app.gitbook.com/public/app/chunks/chunk-IHXHOICW.min.js";import{a as $o,b as Ce,c as Iu,d as Tu,e as en,f as Uu}from"https://app.gitbook.com/public/app/chunks/chunk-FVJ5EK4E.min.js";import{b as fd,c as md,d as hd,e as gd,f as yd}from"https://app.gitbook.com/public/app/chunks/chunk-Y3Z2CYZS.min.js";import{a as Zc,b as $g,d as Xr}from"https://app.gitbook.com/public/app/chunks/chunk-VWAHI6DZ.min.js";import{$a as Rt,$b as es,$c as nu,A as Ho,B as el,D as No,Da as xl,E as Re,F as kn,Fa as El,G as tl,Ga as Al,H as nl,Ha as nt,Ia as Ol,Ja as Vo,Ka as Dl,L as rl,La as Fo,Ma as _l,Na as Ml,Nc as Gr,Oa as Ll,Oc as Zl,P as ol,Pa as Hl,Qa,Ra as Nl,Sa as Bl,Ta as Ul,Tc as eu,Ua as Wo,Uc as tu,Va as Yr,Wa as Pt,Xa as zr,Ya as ze,Yb as Xl,Za as ae,_ as il,_a as Be,_b as Ql,ab as ke,ac as qo,ad as ru,bb as v,cb as Jr,db as Za,eb as Jl,ed as ou,fb as Zn,gb as Bt,ha as al,hb as zo,ia as Bo,ka as Fr,la as sl,ma as ut,mb as er,na as cl,nb as $l,oa as ll,r as _o,tb as Ut,vb as tr,w as Qt,za as ul}from"https://app.gitbook.com/public/app/chunks/chunk-L5CYX2W6.min.js";import{a as or}from"https://app.gitbook.com/public/app/chunks/chunk-FWV45WIG.min.js";import{h as nr,i as Qo,k as Zg,o as rt}from"https://app.gitbook.com/public/app/chunks/chunk-HY7LSONE.min.js";import{qb as Ur,rb as Nt}from"https://app.gitbook.com/public/app/chunks/chunk-QV4U2RLL.min.js";import{b as tn}from"https://app.gitbook.com/public/app/chunks/chunk-PWVW7DJL.min.js";import{b as Bu}from"https://app.gitbook.com/public/app/chunks/chunk-CVPM6ZOQ.min.js";import{A as fu,C as Xo,D as Zt,I as yu,J as wu,P as de,Z as $e,b as E,d as K,f as dt,g as ns,j as jo,z as pu}from"https://app.gitbook.com/public/app/chunks/chunk-LDWJ3Y7P.min.js";import{$ as oe,A as du,B as A,C as Q,D as Y,E as y,F as b,G as mu,I as hu,M as gu,N as rs,P as pt,Q as vu,R as bu,S as Su,T as In,U as Pu,V as Ru,X as ku,Y as H,_ as rr,aa as j,m as x,o as ie,q as Gc,r as Ct,v as Lt,w as Ht,x as za}from"https://app.gitbook.com/public/app/chunks/chunk-HMAX2HIC.min.js";import{b as Rn}from"https://app.gitbook.com/public/app/chunks/chunk-33PWFA6W.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-VDOWUZDR.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-UMNW7V6U.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-NMQP742E.min.js";import{c as lt,d as Qg}from"https://app.gitbook.com/public/app/chunks/chunk-DTKQ4SMM.min.js";import{A as ml,B as hl,C as Ga,E as gl,F as yl,G as vl,H as ja,I as bl,J as Kr,K as Xg,L as Sl,M as $a,W as wl,X as Cl,Y as Pl,fa as Rl,o as $n,p as dl,q as Uo,s as Xn,ub as kl,vb as Il,wb as Xa,x as pl,y as Wr,yb as Tl,z as fl}from"https://app.gitbook.com/public/app/chunks/chunk-HNQUCOKC.min.js";import{a as G}from"https://app.gitbook.com/public/app/chunks/chunk-TFATNSDK.min.js";import{a as Vr}from"https://app.gitbook.com/public/app/chunks/chunk-644MUXOE.min.js";import{b as re,c as Xc,d as Ja,e as Jn}from"https://app.gitbook.com/public/app/chunks/chunk-BW3IGOHK.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-DO3BSSUI.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-N6LMU5UP.min.js";import{b as Ye,c as jg,d as w,f as s}from"https://app.gitbook.com/public/app/chunks/chunk-JSCW7V4P.min.js";var af=Ye((L_,of)=>{s();var $v="Expected a function",nf=NaN,Xv="[object Symbol]",Qv=/^\s+|\s+$/g,Zv=/^[-+]0x[0-9a-f]+$/i,eb=/^0b[01]+$/i,tb=/^0o[0-7]+$/i,nb=parseInt,rb=typeof window=="object"&&window&&window.Object===Object&&window,ob=typeof self=="object"&&self&&self.Object===Object&&self,ib=rb||ob||Function("return this")(),ab=Object.prototype,sb=ab.toString,cb=Math.max,lb=Math.min,Is=function(){return ib.Date.now()};function ub(r,n,e){var t,o,i,a,c,l,u=0,d=!1,m=!1,g=!0;if(typeof r!="function")throw new TypeError($v);n=rf(n)||0,Ts(e)&&(d=!!e.leading,m="maxWait"in e,i=m?cb(rf(e.maxWait)||0,n):i,g="trailing"in e?!!e.trailing:g);function h(q){var me=t,De=o;return t=o=void 0,u=q,a=r.apply(De,me),a}function P(q){return u=q,c=setTimeout(C,n),d?h(q):a}function S(q){var me=q-l,De=q-u,tt=n-me;return m?lb(tt,i-De):tt}function I(q){var me=q-l,De=q-u;return l===void 0||me>=n||me<0||m&&De>=i}function C(){var q=Is();if(I(q))return O(q);c=setTimeout(C,S(q))}function O(q){return c=void 0,g&&t?h(q):(t=o=void 0,a)}function $(){c!==void 0&&clearTimeout(c),u=0,t=l=o=c=void 0}function ne(){return c===void 0?a:O(Is())}function Z(){var q=Is(),me=I(q);if(t=arguments,o=this,l=q,me){if(c===void 0)return P(l);if(m)return c=setTimeout(C,n),h(l)}return c===void 0&&(c=setTimeout(C,n)),a}return Z.cancel=$,Z.flush=ne,Z}function Ts(r){var n=typeof r;return!!r&&(n=="object"||n=="function")}function db(r){return!!r&&typeof r=="object"}function pb(r){return typeof r=="symbol"||db(r)&&sb.call(r)==Xv}function rf(r){if(typeof r=="number")return r;if(pb(r))return nf;if(Ts(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=Ts(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=r.replace(Qv,"");var e=eb.test(r);return e||tb.test(r)?nb(r.slice(2),e?2:8):Zv.test(r)?nf:+r}of.exports=ub});var lf=Ye((N_,cf)=>{s();var sf=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};cf.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return sf()}try{return __global__||sf()}finally{delete Object.prototype.__global__}}()});var uf=Ye((U_,fb)=>{fb.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.34",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}});var pf=Ye((V_,df)=>{s();df.exports=uf().version});var hf=Ye((W_,mf)=>{s();var En;if(typeof globalThis=="object")En=globalThis;else try{En=lf()}catch{}finally{if(!En&&typeof window<"u"&&(En=window),!En)throw new Error("Could not determine global this")}var ro=En.WebSocket||En.MozWebSocket,mb=pf();function ff(r,n){var e;return n?e=new ro(r,n):e=new ro(r),e}ro&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(r){Object.defineProperty(ff,r,{get:function(){return ro[r]}})});mf.exports={w3cwebsocket:ro?ff:null,version:mb}});var Uf=Ye(Os=>{s();Object.defineProperty(Os,"__esModule",{value:!0});var Eb=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},Ab="src/index.js",Ob=function(){function r(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(n,e,t){return e&&r(n.prototype,e),t&&r(n,t),n}}(),Nf=x(),Db=Mb(Nf),_b=ie();function Mb(r){return r&&r.__esModule?r:{default:r}}function Lb(r,n){var e={};for(var t in r)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e}function Hb(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function Hf(r,n){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:r}function Nb(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}var Bf=function(r){Nb(n,r);function n(){var e,t,o,i;Hb(this,n);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return i=(t=(o=Hf(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(c))),o),o.state={width:1,height:1},o.measure=function(u){o.setState({width:u.nativeEvent.layout.width,height:u.nativeEvent.layout.height}),o.props.onLayout&&o.props.onLayout(u)},o.getAngle=function(){if(o.props.useAngle)return o.props.angle+"deg";var u=Math.atan2(o.state.width*(o.props.end.y-o.props.start.y),o.state.height*(o.props.end.x-o.props.start.x))+Math.PI/2;return u+"rad"},o.getColors=function(){return o.props.colors.map(function(u,d){var m=o.props.locations[d],g="";return m&&(g=" "+m*100+"%"),u+g}).join(",")},t),Hf(o,i)}return Ob(n,[{key:"render",value:function(){var t=this.props,o=t.start,i=t.end,a=t.colors,c=t.locations,l=t.useAngle,u=t.angleCenter,d=t.angle,m=t.style,g=t.children,h=Lb(t,["start","end","colors","locations","useAngle","angleCenter","angle","style","children"]);return Db.default.createElement(_b.View,Eb({},h,{style:[m,{backgroundImage:"linear-gradient("+this.getAngle()+","+this.getColors()+")"}],onLayout:this.measure,__source:{fileName:Ab,lineNumber:76}}),g)}}]),n}(Nf.PureComponent);Bf.defaultProps={start:{x:.5,y:0},end:{x:.5,y:1},locations:[],colors:[],useAngle:!1,angle:0};Os.default=Bf});var mh=Ye(vc=>{"use strict";s();Object.defineProperty(vc,"__esModule",{value:!0});var XS={justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"transparent"};vc.default={container:XS}});var bc=Ye(kr=>{"use strict";s();Object.defineProperty(kr,"__esModule",{value:!0});kr.ImageZoomState=kr.ImageZoomProps=void 0;var QS=function(){function r(){this.cropWidth=100,this.cropHeight=100,this.imageWidth=100,this.imageHeight=100,this.panToMove=!0,this.pinchToZoom=!0,this.enableDoubleClickZoom=!0,this.clickDistance=10,this.maxOverflow=100,this.longPressTime=800,this.doubleClickInterval=175,this.style={},this.swipeDownThreshold=230,this.enableSwipeDown=!1,this.enableCenterFocus=!0,this.useHardwareTextureAndroid=!0,this.minScale=.6,this.maxScale=10,this.useNativeDriver=!1,this.onClick=function(){},this.onDoubleClick=function(){},this.onLongPress=function(){},this.horizontalOuterRangeOffset=function(){},this.onDragLeft=function(){},this.responderRelease=function(){},this.onMove=function(){},this.layoutChange=function(){},this.onSwipeDown=function(){},this.onStartShouldSetPanResponder=function(){return!0},this.onPanResponderTerminationRequest=function(){return!1}}return r}();kr.ImageZoomProps=QS;var ZS=function(){function r(){this.centerX=.5,this.centerY=.5}return r}();kr.ImageZoomState=ZS});var gh=Ye(Un=>{"use strict";s();var ew=Un&&Un.__extends||function(){var r=function(n,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])},r(n,e)};return function(n,e){r(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),wo=Un&&Un.__assign||function(){return wo=Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},wo.apply(this,arguments)};Object.defineProperty(Un,"__esModule",{value:!0});var da=x(),pe=ie(),tw=mh(),hh=bc(),nw=function(r){ew(n,r);function n(){var e=r!==null&&r.apply(this,arguments)||this;return e.state=new hh.ImageZoomState,e.lastPositionX=null,e.positionX=0,e.animatedPositionX=new pe.Animated.Value(0),e.lastPositionY=null,e.positionY=0,e.animatedPositionY=new pe.Animated.Value(0),e.scale=1,e.animatedScale=new pe.Animated.Value(1),e.zoomLastDistance=null,e.zoomCurrentDistance=0,e.lastTouchStartTime=0,e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.centerDiffX=0,e.centerDiffY=0,e.lastClickTime=0,e.doubleClickX=0,e.doubleClickY=0,e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.imagePanResponder=pe.PanResponder.create({onStartShouldSetPanResponder:e.props.onStartShouldSetPanResponder,onPanResponderTerminationRequest:e.props.onPanResponderTerminationRequest,onMoveShouldSetPanResponder:e.props.onMoveShouldSetPanResponder,onPanResponderGrant:function(t){if(e.lastPositionX=null,e.lastPositionY=null,e.zoomLastDistance=null,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.lastTouchStartTime=new Date().getTime(),e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.singleClickTimeout&&clearTimeout(e.singleClickTimeout),t.nativeEvent.changedTouches.length>1){var o=(t.nativeEvent.changedTouches[0].pageX+t.nativeEvent.changedTouches[1].pageX)/2;e.centerDiffX=o-e.props.cropWidth/2;var i=(t.nativeEvent.changedTouches[0].pageY+t.nativeEvent.changedTouches[1].pageY)/2;e.centerDiffY=i-e.props.cropHeight/2}e.longPressTimeout&&clearTimeout(e.longPressTimeout);var a=t.nativeEvent,c=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;if(e.longPressTimeout=setTimeout(function(){e.isLongPress=!0,e.props.onLongPress&&e.props.onLongPress({locationX:c,locationY:l,pageX:u,pageY:d})},e.props.longPressTime),t.nativeEvent.changedTouches.length<=1)if(new Date().getTime()-e.lastClickTime<(e.props.doubleClickInterval||0)){if(e.lastClickTime=0,e.doubleClickX=t.nativeEvent.changedTouches[0].pageX,e.doubleClickY=t.nativeEvent.changedTouches[0].pageY,e.props.onDoubleClick&&e.props.onDoubleClick({locationX:t.nativeEvent.changedTouches[0].locationX,locationY:t.nativeEvent.changedTouches[0].locationY,pageX:e.doubleClickX,pageY:e.doubleClickY}),clearTimeout(e.longPressTimeout),e.isDoubleClick=!0,e.props.enableDoubleClickZoom){if(e.scale>1||e.scale<1)e.scale=1,e.positionX=0,e.positionY=0;else{var m=e.scale;e.scale=2;var g=e.scale-m;e.positionX=(e.props.cropWidth/2-e.doubleClickX)*g/e.scale,e.positionY=(e.props.cropHeight/2-e.doubleClickY)*g/e.scale}e.imageDidMove("centerOn"),pe.Animated.parallel([pe.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}),pe.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}),pe.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver})]).start()}}else e.lastClickTime=new Date().getTime()},onPanResponderMove:function(t,o){if(!e.isDoubleClick){if(t.nativeEvent.changedTouches.length<=1){var i=o.dx-(e.lastPositionX||0);e.lastPositionX===null&&(i=0);var a=o.dy-(e.lastPositionY||0);if(e.lastPositionY===null&&(a=0),e.lastPositionX=o.dx,e.lastPositionY=o.dy,e.horizontalWholeCounter+=i,e.verticalWholeCounter+=a,(Math.abs(e.horizontalWholeCounter)>5||Math.abs(e.verticalWholeCounter)>5)&&clearTimeout(e.longPressTimeout),e.props.panToMove){if(e.swipeDownOffset===0){if(Math.abs(i)>Math.abs(a)&&(e.isHorizontalWrap=!0),e.props.imageWidth*e.scale>e.props.cropWidth){e.horizontalWholeOuterCounter>0?i<0?e.horizontalWholeOuterCounter>Math.abs(i)?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i:e.horizontalWholeOuterCounter<0&&(i>0?Math.abs(e.horizontalWholeOuterCounter)>i?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i),e.positionX+=i/e.scale;var c=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-c?(e.positionX=-c,e.horizontalWholeOuterCounter+=-1/1e10):e.positionX>c&&(e.positionX=c,e.horizontalWholeOuterCounter+=1/1e10),e.animatedPositionX.setValue(e.positionX)}else e.horizontalWholeOuterCounter+=i;e.horizontalWholeOuterCounter>(e.props.maxOverflow||0)?e.horizontalWholeOuterCounter=e.props.maxOverflow||0:e.horizontalWholeOuterCounter<-(e.props.maxOverflow||0)&&(e.horizontalWholeOuterCounter=-(e.props.maxOverflow||0)),e.horizontalWholeOuterCounter!==0&&e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(e.horizontalWholeOuterCounter)}e.props.imageHeight*e.scale>e.props.cropHeight?(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY)):e.props.enableSwipeDown&&!e.isHorizontalWrap&&(e.swipeDownOffset+=a,e.swipeDownOffset>0&&(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY),e.scale=e.scale-a/1e3,e.animatedScale.setValue(e.scale)))}}else if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),e.props.pinchToZoom){var l=void 0,u=void 0;t.nativeEvent.changedTouches[0].locationX>t.nativeEvent.changedTouches[1].locationX?(l=t.nativeEvent.changedTouches[1].pageX,u=t.nativeEvent.changedTouches[0].pageX):(l=t.nativeEvent.changedTouches[0].pageX,u=t.nativeEvent.changedTouches[1].pageX);var d=void 0,m=void 0;t.nativeEvent.changedTouches[0].locationY>t.nativeEvent.changedTouches[1].locationY?(d=t.nativeEvent.changedTouches[1].pageY,m=t.nativeEvent.changedTouches[0].pageY):(d=t.nativeEvent.changedTouches[0].pageY,m=t.nativeEvent.changedTouches[1].pageY);var g=u-l,h=m-d,P=Math.sqrt(g*g+h*h);if(e.zoomCurrentDistance=Number(P.toFixed(1)),e.zoomLastDistance!==null){var S=(e.zoomCurrentDistance-e.zoomLastDistance)/200,I=e.scale+S;I<(e.props.minScale||0)&&(I=e.props.minScale||0),I>(e.props.maxScale||0)&&(I=e.props.maxScale||0);var C=e.scale;e.scale=I,e.animatedScale.setValue(e.scale);var O=e.scale-C;e.positionX-=e.centerDiffX*O/e.scale,e.positionY-=e.centerDiffY*O/e.scale,e.animatedPositionX.setValue(e.positionX),e.animatedPositionY.setValue(e.positionY)}e.zoomLastDistance=e.zoomCurrentDistance}e.imageDidMove("onPanResponderMove")}},onPanResponderRelease:function(t,o){if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),!e.isDoubleClick&&!e.isLongPress){var i=Math.sqrt(o.dx*o.dx+o.dy*o.dy),a=t.nativeEvent,c=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;t.nativeEvent.changedTouches.length===1&&i<(e.props.clickDistance||0)?e.singleClickTimeout=setTimeout(function(){e.props.onClick&&e.props.onClick({locationX:c,locationY:l,pageX:u,pageY:d})},e.props.doubleClickInterval):(e.props.responderRelease&&e.props.responderRelease(o.vx,e.scale),e.panResponderReleaseResolve())}},onPanResponderTerminate:function(){}}),e.resetScale=function(){e.positionX=0,e.positionY=0,e.scale=1,e.animatedScale.setValue(1)},e.panResponderReleaseResolve=function(){if(e.props.enableSwipeDown&&e.props.swipeDownThreshold&&e.swipeDownOffset>e.props.swipeDownThreshold){e.props.onSwipeDown&&e.props.onSwipeDown();return}if(e.props.enableCenterFocus&&e.scale<1&&(e.scale=1,pe.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageWidth*e.scale<=e.props.cropWidth&&(e.positionX=0,pe.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale<=e.props.cropHeight&&(e.positionY=0,pe.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale>e.props.cropHeight){var t=(e.props.imageHeight*e.scale-e.props.cropHeight)/2/e.scale;e.positionY<-t?e.positionY=-t:e.positionY>t&&(e.positionY=t),pe.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}if(e.props.imageWidth*e.scale>e.props.cropWidth){var o=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-o?e.positionX=-o:e.positionX>o&&(e.positionX=o),pe.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}e.props.enableCenterFocus&&e.scale===1&&(e.positionX=0,e.positionY=0,pe.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start(),pe.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.imageDidMove("onPanResponderRelease")},e}return n.prototype.componentDidMount=function(){this.props.centerOn&&this.centerOn(this.props.centerOn)},n.prototype.componentDidUpdate=function(e){(this.props.centerOn&&!e.centerOn||this.props.centerOn&&e.centerOn&&this.didCenterOnChange(e.centerOn,this.props.centerOn))&&this.centerOn(this.props.centerOn)},n.prototype.imageDidMove=function(e){this.props.onMove&&this.props.onMove({type:e,positionX:this.positionX,positionY:this.positionY,scale:this.scale,zoomCurrentDistance:this.zoomCurrentDistance})},n.prototype.didCenterOnChange=function(e,t){return e.x!==t.x||e.y!==t.y||e.scale!==t.scale},n.prototype.centerOn=function(e){var t=this;this.positionX=e.x,this.positionY=e.y,this.scale=e.scale;var o=e.duration||300;pe.Animated.parallel([pe.Animated.timing(this.animatedScale,{toValue:this.scale,duration:o,useNativeDriver:!!this.props.useNativeDriver}),pe.Animated.timing(this.animatedPositionX,{toValue:this.positionX,duration:o,useNativeDriver:!!this.props.useNativeDriver}),pe.Animated.timing(this.animatedPositionY,{toValue:this.positionY,duration:o,useNativeDriver:!!this.props.useNativeDriver})]).start(function(){t.imageDidMove("centerOn")})},n.prototype.handleLayout=function(e){this.props.layoutChange&&this.props.layoutChange(e)},n.prototype.reset=function(){this.scale=1,this.animatedScale.setValue(this.scale),this.positionX=0,this.animatedPositionX.setValue(this.positionX),this.positionY=0,this.animatedPositionY.setValue(this.positionY)},n.prototype.render=function(){var e={transform:[{scale:this.animatedScale},{translateX:this.animatedPositionX},{translateY:this.animatedPositionY}]},t=pe.StyleSheet.flatten(this.props.style);return da.createElement(pe.View,{style:wo(wo(wo({},tw.default.container),t),{width:this.props.cropWidth,height:this.props.cropHeight}),...this.imagePanResponder.panHandlers},da.createElement(pe.Animated.View,{style:e,renderToHardwareTextureAndroid:this.props.useHardwareTextureAndroid},da.createElement(pe.View,{onLayout:this.handleLayout.bind(this),style:{width:this.props.imageWidth,height:this.props.imageHeight}},this.props.children)))},n.defaultProps=new hh.ImageZoomProps,n}(da.Component);Un.default=nw});var yh=Ye(gn=>{"use strict";s();var rw=gn&&gn.__createBinding||(Object.create?function(r,n,e,t){t===void 0&&(t=e),Object.defineProperty(r,t,{enumerable:!0,get:function(){return n[e]}})}:function(r,n,e,t){t===void 0&&(t=e),r[t]=n[e]}),ow=gn&&gn.__exportStar||function(r,n){for(var e in r)e!=="default"&&!n.hasOwnProperty(e)&&rw(n,r,e)};Object.defineProperty(gn,"__esModule",{value:!0});var iw=gh();gn.default=iw.default;ow(bc(),gn)});var Sc=Ye(pa=>{"use strict";s();Object.defineProperty(pa,"__esModule",{value:!0});pa.default=function(r,n,e){return{modalContainer:{backgroundColor:e,justifyContent:"center",alignItems:"center",overflow:"hidden"},watchOrigin:{position:"absolute",width:r,bottom:20,justifyContent:"center",alignItems:"center"},watchOriginTouchable:{paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,borderRadius:30,borderColor:"white",borderWidth:.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},watchOriginText:{color:"white",backgroundColor:"transparent"},imageStyle:{},container:{backgroundColor:e},moveBox:{flexDirection:"row",alignItems:"center"},menuContainer:{position:"absolute",width:r,height:n,left:0,bottom:0,zIndex:12},menuShadow:{position:"absolute",width:r,height:n,backgroundColor:"black",left:0,bottom:0,opacity:.2,zIndex:10},menuContent:{position:"absolute",width:r,left:0,bottom:0,zIndex:11},operateContainer:{justifyContent:"center",alignItems:"center",backgroundColor:"white",height:40,borderBottomColor:"#ccc",borderBottomWidth:1},operateText:{color:"#333"},loadingTouchable:{width:r,height:n},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},arrowLeftContainer:{position:"absolute",top:0,bottom:0,left:0,justifyContent:"center",zIndex:13},arrowRightContainer:{position:"absolute",top:0,bottom:0,right:0,justifyContent:"center",zIndex:13}}};pa.simpleStyle={count:{position:"absolute",left:0,right:0,top:38,zIndex:13,justifyContent:"center",alignItems:"center",backgroundColor:"transparent"},countText:{color:"white",fontSize:16,backgroundColor:"transparent",textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:.5},textShadowRadius:0}}});var Pc=Ye(fa=>{"use strict";s();Object.defineProperty(fa,"__esModule",{value:!0});var wc=x(),Cc=ie(),vh=Sc(),aw=function(){function r(){this.show=!1,this.imageUrls=[],this.flipThreshold=80,this.maxOverflow=300,this.index=0,this.failImageSource=void 0,this.backgroundColor="black",this.footerContainerStyle={},this.menuContext={saveToLocal:"save to the album",cancel:"cancel"},this.saveToLocalByLongPress=!0,this.enableImageZoom=!0,this.style={},this.enableSwipeDown=!1,this.enablePreload=!1,this.pageAnimateTime=100,this.useNativeDriver=!1,this.onLongPress=function(){},this.onClick=function(){},this.onDoubleClick=function(){},this.onSave=function(){},this.onMove=function(){},this.renderHeader=function(){return null},this.renderFooter=function(){return null},this.renderIndicator=function(n,e){return wc.createElement(Cc.View,{style:vh.simpleStyle.count},wc.createElement(Cc.Text,{style:vh.simpleStyle.countText},n+"/"+e))},this.renderImage=function(n){return wc.createElement(Cc.Image,n)},this.renderArrowLeft=function(){return null},this.renderArrowRight=function(){return null},this.onShowModal=function(){},this.onCancel=function(){},this.onSwipeDown=function(){},this.loadingRender=function(){return null},this.onSaveToCamera=function(){},this.onChange=function(){}}return r}();fa.Props=aw;var sw=function(){function r(){this.show=!1,this.currentShowIndex=0,this.prevIndexProp=0,this.imageLoaded=!1,this.imageSizes=[],this.isShowMenu=!1}return r}();fa.State=sw});var wh=Ye(Jt=>{"use strict";s();var cw=Jt&&Jt.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])};return function(n,e){r(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Vn=Jt&&Jt.__assign||Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},lw=Jt&&Jt.__rest||function(r,n){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&n.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(r);o<t.length;o++)n.indexOf(t[o])<0&&(e[t[o]]=r[t[o]]);return e};Object.defineProperty(Jt,"__esModule",{value:!0});var X=x(),N=ie(),bh=yh(),Sh=Sc(),Rc=Pc(),uw=function(r){cw(n,r);function n(){var e=r!==null&&r.apply(this,arguments)||this;return e.state=new Rc.State,e.fadeAnim=new N.Animated.Value(0),e.standardPositionX=0,e.positionXNumber=0,e.positionX=new N.Animated.Value(0),e.width=0,e.height=0,e.styles=Sh.default(0,0,"transparent"),e.hasLayout=!1,e.loadedIndex=new Map,e.handleLongPressWithIndex=new Map,e.imageRefs=[],e.resetImageByIndex=function(t){e.imageRefs[t]&&e.imageRefs[t].reset()},e.preloadImage=function(t){t<e.state.imageSizes.length&&e.loadImage(t+1)},e.handleHorizontalOuterRangeOffset=function(t){t===void 0&&(t=0),e.positionXNumber=e.standardPositionX+t,e.positionX.setValue(e.positionXNumber);var o=N.I18nManager.isRTL?-t:t;o<0?(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1):o>0&&(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1)},e.handleResponderRelease=function(t){t===void 0&&(t=0);var o=N.I18nManager.isRTL?-t:t,i=N.I18nManager.isRTL?e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0),a=N.I18nManager.isRTL?e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0);if(o>.7){e.goBack.call(e),(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1);return}else if(o<-.7){e.goNext.call(e),(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1);return}if(i)e.goBack.call(e);else if(a){e.goNext.call(e);return}else{e.resetPosition.call(e);return}},e.goBack=function(){if(e.state.currentShowIndex===0){e.resetPosition.call(e);return}e.positionXNumber=N.I18nManager.isRTL?e.standardPositionX-e.width:e.standardPositionX+e.width,e.standardPositionX=e.positionXNumber,N.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var t=(e.state.currentShowIndex||0)-1;e.setState({currentShowIndex:t},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.goNext=function(){if(e.state.currentShowIndex===e.props.imageUrls.length-1){e.resetPosition.call(e);return}e.positionXNumber=N.I18nManager.isRTL?e.standardPositionX+e.width:e.standardPositionX-e.width,e.standardPositionX=e.positionXNumber,N.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var t=(e.state.currentShowIndex||0)+1;e.setState({currentShowIndex:t},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.handleLongPress=function(t){e.props.saveToLocalByLongPress&&e.setState({isShowMenu:!0}),e.props.onLongPress&&e.props.onLongPress(t)},e.handleClick=function(){e.props.onClick&&e.props.onClick(e.handleCancel,e.state.currentShowIndex)},e.handleDoubleClick=function(){e.props.onDoubleClick&&e.props.onDoubleClick(e.handleCancel)},e.handleCancel=function(){e.hasLayout=!1,e.props.onCancel&&e.props.onCancel()},e.handleLayout=function(t){t.nativeEvent.layout.width!==e.width&&(e.hasLayout=!0,e.width=t.nativeEvent.layout.width,e.height=t.nativeEvent.layout.height,e.styles=Sh.default(e.width,e.height,e.props.backgroundColor||"transparent"),e.forceUpdate(),e.jumpToCurrentImage())},e.saveToLocal=function(){e.props.onSave?e.props.onSave(e.props.imageUrls[e.state.currentShowIndex||0].url):(N.CameraRoll.saveToCameraRoll(e.props.imageUrls[e.state.currentShowIndex||0].url),e.props.onSaveToCamera(e.state.currentShowIndex)),e.setState({isShowMenu:!1})},e.handleLeaveMenu=function(){e.setState({isShowMenu:!1})},e.handleSwipeDown=function(){e.props.onSwipeDown&&e.props.onSwipeDown(),e.handleCancel()},e}return n.prototype.componentDidMount=function(){this.init(this.props)},n.getDerivedStateFromProps=function(e,t){return e.index!==t.prevIndexProp?{currentShowIndex:e.index,prevIndexProp:e.index}:null},n.prototype.componentDidUpdate=function(e,t){e.index!==this.props.index&&(this.loadImage(this.props.index||0),this.jumpToCurrentImage(),N.Animated.timing(this.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!this.props.useNativeDriver}).start())},n.prototype.init=function(e){var t=this;if(e.imageUrls.length===0)return this.fadeAnim.setValue(0),this.setState(new Rc.State);var o=[];e.imageUrls.forEach(function(i){o.push({width:i.width||0,height:i.height||0,status:"loading"})}),this.setState({currentShowIndex:e.index,prevIndexProp:e.index||0,imageSizes:o},function(){t.loadImage(e.index||0),t.jumpToCurrentImage(),N.Animated.timing(t.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!e.useNativeDriver}).start()})},n.prototype.jumpToCurrentImage=function(){this.positionXNumber=this.width*(this.state.currentShowIndex||0)*(N.I18nManager.isRTL?1:-1),this.standardPositionX=this.positionXNumber,this.positionX.setValue(this.positionXNumber)},n.prototype.loadImage=function(e){var t=this;if(this.state.imageSizes[e]&&!this.loadedIndex.has(e)){this.loadedIndex.set(e,!0);var o=this.props.imageUrls[e],i=Vn({},this.state.imageSizes[e]),a=function(){if(!(t.state.imageSizes[e]&&t.state.imageSizes[e].status!=="loading")){var u=t.state.imageSizes.slice();u[e]=i,t.setState({imageSizes:u})}};if(this.state.imageSizes[e].status!=="success"){if(this.state.imageSizes[e].width>0&&this.state.imageSizes[e].height>0){i.status="success",a();return}var c=!1,l=!1;if((!o.url||o.url.startsWith("file:"))&&(l=!0),o.width&&o.height){this.props.enablePreload&&l===!1&&N.Image.prefetch(o.url),i.width=o.width,i.height=o.height,i.status="success",a();return}N.Image.getSize(o.url,function(u,d){i.width=u,i.height=d,i.status="success",a()},function(){try{var u=N.Image.resolveAssetSource(o.props.source);i.width=u.width,i.height=u.height,i.status="success",a()}catch{i.status="fail",a()}})}}},n.prototype.resetPosition=function(){this.positionXNumber=this.standardPositionX,N.Animated.timing(this.positionX,{toValue:this.standardPositionX,duration:150,useNativeDriver:!!this.props.useNativeDriver}).start()},n.prototype.getContent=function(){var e=this,t=this.width,o=this.height,i=this.props.imageUrls.map(function(a,c){if((e.state.currentShowIndex||0)>c+1||(e.state.currentShowIndex||0)<c-1)return X.createElement(N.View,{key:c,style:{width:t,height:o}});e.handleLongPressWithIndex.has(c)||e.handleLongPressWithIndex.set(c,e.handleLongPress.bind(e,a));var l=e.state.imageSizes[c]&&e.state.imageSizes[c].width,u=e.state.imageSizes[c]&&e.state.imageSizes[c].height,d=e.state.imageSizes[c];if(!d||!d.status)return X.createElement(N.View,{key:c,style:{width:t,height:o}});if(l>t){var m=t/l;l*=m,u*=m}if(u>o){var g=o/u;l*=g,u*=g}var h=function(P){var S=P.children,I=lw(P,["children"]);return X.createElement(bh.default,{cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(c),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,pinchToZoom:e.props.enableImageZoom,enableDoubleClickZoom:e.props.enableImageZoom,doubleClickInterval:e.props.doubleClickInterval,...I},S)};switch(d.status){case"loading":return X.createElement(h,{key:c,style:Vn({},e.styles.modalContainer,e.styles.loadingContainer),imageWidth:t,imageHeight:o},X.createElement(N.View,{style:e.styles.loadingContainer},e.props.loadingRender()));case"success":return a.props||(a.props={}),a.props.style||(a.props.style={}),a.props.style=Vn({},e.styles.imageStyle,a.props.style,{width:l,height:u}),typeof a.props.source=="number"||(a.props.source||(a.props.source={}),a.props.source=Vn({uri:a.url},a.props.source)),e.props.enablePreload&&e.preloadImage(e.state.currentShowIndex||0),X.createElement(bh.default,{key:c,ref:function(P){return e.imageRefs[c]=P},cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(c),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,imageWidth:l,imageHeight:u,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,panToMove:!e.state.isShowMenu,pinchToZoom:e.props.enableImageZoom&&!e.state.isShowMenu,enableDoubleClickZoom:e.props.enableImageZoom&&!e.state.isShowMenu,doubleClickInterval:e.props.doubleClickInterval,minScale:e.props.minScale,maxScale:e.props.maxScale},e.props.renderImage(a.props));case"fail":return X.createElement(h,{key:c,style:e.styles.modalContainer,imageWidth:e.props.failImageSource?e.props.failImageSource.width:t,imageHeight:e.props.failImageSource?e.props.failImageSource.height:o},e.props.failImageSource&&e.props.renderImage({source:{uri:e.props.failImageSource.url},style:{width:e.props.failImageSource.width,height:e.props.failImageSource.height}}))}});return X.createElement(N.Animated.View,{style:{zIndex:9}},X.createElement(N.Animated.View,{style:Vn({},this.styles.container,{opacity:this.fadeAnim})},this.props.renderHeader(this.state.currentShowIndex),X.createElement(N.View,{style:this.styles.arrowLeftContainer},X.createElement(N.TouchableWithoutFeedback,{onPress:this.goBack},X.createElement(N.View,null,this.props.renderArrowLeft()))),X.createElement(N.View,{style:this.styles.arrowRightContainer},X.createElement(N.TouchableWithoutFeedback,{onPress:this.goNext},X.createElement(N.View,null,this.props.renderArrowRight()))),X.createElement(N.Animated.View,{style:Vn({},this.styles.moveBox,{transform:[{translateX:this.positionX}],width:this.width*this.props.imageUrls.length})},i),this.props.renderIndicator((this.state.currentShowIndex||0)+1,this.props.imageUrls.length),this.props.imageUrls[this.state.currentShowIndex||0]&&this.props.imageUrls[this.state.currentShowIndex||0].originSizeKb&&this.props.imageUrls[this.state.currentShowIndex||0].originUrl&&X.createElement(N.View,{style:this.styles.watchOrigin},X.createElement(N.TouchableOpacity,{style:this.styles.watchOriginTouchable},X.createElement(N.Text,{style:this.styles.watchOriginText},"\u67E5\u770B\u539F\u56FE(2M)"))),X.createElement(N.View,{style:[{bottom:0,position:"absolute",zIndex:9},this.props.footerContainerStyle]},this.props.renderFooter(this.state.currentShowIndex||0))))},n.prototype.getMenu=function(){return this.state.isShowMenu?this.props.menus?X.createElement(N.View,{style:this.styles.menuContainer},this.props.menus({cancel:this.handleLeaveMenu,saveToLocal:this.saveToLocal})):X.createElement(N.View,{style:this.styles.menuContainer},X.createElement(N.View,{style:this.styles.menuShadow}),X.createElement(N.View,{style:this.styles.menuContent},X.createElement(N.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.saveToLocal,style:this.styles.operateContainer},X.createElement(N.Text,{style:this.styles.operateText},this.props.menuContext.saveToLocal)),X.createElement(N.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.handleLeaveMenu,style:this.styles.operateContainer},X.createElement(N.Text,{style:this.styles.operateText},this.props.menuContext.cancel)))):null},n.prototype.render=function(){var e=null;return e=X.createElement(N.View,null,this.getContent(),this.getMenu()),X.createElement(N.View,{onLayout:this.handleLayout,style:Vn({flex:1,overflow:"hidden"},this.props.style)},e)},n.defaultProps=new Rc.Props,n}(X.Component);Jt.default=uw});var Ph=Ye(Co=>{"use strict";s();Object.defineProperty(Co,"__esModule",{value:!0});var Ch=wh();Co.ImageViewer=Ch.default;var dw=Pc();Co.ImageViewerPropsDefine=dw.Props;Co.default=Ch.default});s();s();(function(){"use strict";var r="ListFormat"in Intl;function n(k,_){if(!(k instanceof _))throw new TypeError("Cannot call a class as a function")}function e(k,_){for(var T=0;T<_.length;T++){var D=_[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}function t(k,_,T){return _&&e(k.prototype,_),T&&e(k,T),k}var o=["conjunction","disjunction","unit"],i=["long","short","narrow"],a=["lookup","best fit"];function c(k){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(T){return typeof T}:c=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},c(k)}function l(k){return typeof Symbol=="function"&&c(Symbol.iterator)==="symbol"?l=function(T){return c(T)}:l=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":c(T)},l(k)}function u(k){if(k==null)throw new TypeError("Argument ".concat(k," cannot be converted to an Object"));return typeof k=="boolean"?new Boolean(k):typeof k=="number"?new Number(k):typeof k=="string"?new String(k):l(k)==="symbol"?new Object(k):k}var d;function m(k){d=k}function g(){return d}function h(){if(d==null)throw new ReferenceError("Could not determine locale: No default locale has been configured");return d}var P=new WeakMap,S={relevantExtensionKeys:[],localeData:{},availableLocales:[]};function I(k,_,T){var D=P.get(k);D==null&&(D=Object.create(null),P.set(k,D)),D[_]=T}function C(k,_){var T=P.get(k);if(T==null)throw new ReferenceError("No internal slots has been allocated for the given instance of ListFormat");return T[_]}function O(k,_){var T=P.get(k);return T!=null&&_ in T}var $=/-u(?:-[0-9a-z]{2,8})+/gi;function ne(k){return k.replace($,"")}function Z(k,_){for(var T=_;;){if(k.includes(T))return T;var D=T.lastIndexOf("-");if(D===-1)return;D>=2&&T.charAt(D-2)==="-"&&(D-=2),T=T.slice(0,D)}}function q(k,_){var T=[],D=!0,F=!1,J=void 0;try{for(var he=_[Symbol.iterator](),ee;!(D=(ee=he.next()).done);D=!0){var fe=ee.value,le=ne(fe),we=Z(k,le);we!==void 0&&T.push(fe)}}catch(Ge){F=!0,J=Ge}finally{try{!D&&he.return!=null&&he.return()}finally{if(F)throw J}}return T}function me(k,_){return q(k,_)}function De(k){return typeof k=="string"||l(k)==="symbol"}function tt(k,_){if(l(k)!=="object")throw new TypeError("Given argument ".concat(k," must be of type Object"));if(!De(_))throw new TypeError("Given argument ".concat(_," must be a PropertyKey"));return k[_]}function Lr(k){return!!k}function Hr(k){return k+""}function st(k,_,T,D,F){var J=tt(k,_);if(J!==void 0){if(T!=="boolean"&&T!=="string")throw new TypeError("Expected type ".concat(T," to be 'boolean' or 'string"));if(T==="boolean"&&(J=Lr(J)),T==="string"&&(J=Hr(J)),D!==void 0&&!D.includes(J))throw new RangeError("Value ".concat(J," out of range for options property ").concat(_));return J}else return F}function La(k,_,T){var D;return T!==void 0?(T=u(T),D=st(T,"localeMatcher","string",a,"best fit")):D="best fit",D==="best fit"?me(k,_):q(k,_)}function qn(k){var _=k.availableLocales,T=k.requestedLocales,D=Object.create(null),F=!0,J=!1,he=void 0;try{for(var ee=T[Symbol.iterator](),fe;!(F=(fe=ee.next()).done);F=!0){var le=fe.value,we=ne(le),Ge=Z(_,we);if(Ge!==void 0){if(D.locale=Ge,le!==we){var ct=le.match($);D.extension=ct==null?"":ct[0]}return D}}}catch(Do){J=!0,he=Do}finally{try{!F&&ee.return!=null&&ee.return()}finally{if(J)throw he}}var wt=h();return D.locale=wt,D}function Nr(k){return qn(k)}function Ha(k,_,T,D,F){var J=T.localeMatcher,he=J==="lookup"?qn({availableLocales:k,requestedLocales:_}):Nr({availableLocales:k,requestedLocales:_}),ee=he.locale,fe=Object.create(null);fe.dataLocale=ee;var le="-u";if(le.length>2){var we=String.prototype.indexOf.call(ee,"-x-");if(we===-1)ee="".concat(ee).concat(le);else{var Ge=ee.slice(0,we),ct=ee.slice(we);ee="".concat(Ge).concat(le).concat(ct)}ee=Intl.getCanonicalLocales(ee)[0]}return fe.locale=ee,fe}function Na(k){if(Array.isArray(k)){for(var _=0,T=new Array(k.length);_<k.length;_++)T[_]=k[_];return T}}function Ba(k){if(Symbol.iterator in Object(k)||Object.prototype.toString.call(k)==="[object Arguments]")return Array.from(k)}function Ua(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Va(k){return Na(k)||Ba(k)||Ua()}function Ao(k){if(k===void 0)return[];var _=Va(k);if(_.some(function(T){return typeof T!="string"}))throw new TypeError("All List items must be strings");return _}function Fa(k){return Object.prototype.toString.call(k)==="[object Object]"}function Wa(k){return Array.isArray(k)||Fa(k)}function Oo(k,_){for(var T=[],D=String.prototype.indexOf.call(k,"{",0),F=0,J=k.length;k[D]!==void 0;){var he=String.prototype.indexOf.call(k,"}",D);if(he<=D)throw new TypeError("Expected endIndex: ".concat(he," to be greater than beginIndex: ").concat(D));if(D>F){var ee=k.slice(F,D);T.push({type:"literal",value:ee})}var fe=k.slice(D+1,he);if(_[Number(fe)]==null)throw new TypeError("Expected placeables to have a part for PropertyKey: ".concat(fe));var le=_[Number(fe)];if(Wa(le.value)){var we=!0,Ge=!1,ct=void 0;try{for(var wt=le.value[Symbol.iterator](),Do;!(we=(Do=wt.next()).done);we=!0){var qg=Do.value;T.push(qg)}}catch(Gg){Ge=!0,ct=Gg}finally{try{!we&&wt.return!=null&&wt.return()}finally{if(Ge)throw ct}}}else T.push(le);F=he+1,D=String.prototype.indexOf.call(k,"{",F)}if(F<J){var Jg=k.slice(F,J);T.push({type:"literal",value:Jg})}return T}function Br(k,_){var T,D=_.length;if(D===0)return[];if(D===2){T=C(k,"templatePair");var F={type:"element",value:_[0]},J={type:"element",value:_[1]},he={0:F,1:J};return Oo(T,he)}for(var ee={type:"element",value:_[D-1]},fe=[ee],le=D-2;le>=0;){le===0?T=C(k,"templateStart"):le<D-2?T=C(k,"templateMiddle"):T=C(k,"templateEnd");var we={type:"element",value:_[le]},Ge={type:"element",value:fe},ct={0:we,1:Ge};fe=Oo(T,ct),le--}return fe}function Ka(k,_){var T=Br(k,_),D="",F=!0,J=!1,he=void 0;try{for(var ee=T[Symbol.iterator](),fe;!(F=(fe=ee.next()).done);F=!0){var le=fe.value;D+=le.value}}catch(we){J=!0,he=we}finally{try{!F&&ee.return!=null&&ee.return()}finally{if(J)throw he}}return D}function Ya(k,_){return Br(k,_)}var St=function(){function k(){n(this,k);var _=arguments[0],T=arguments[1];if((this instanceof k?this.constructor:void 0)===void 0)throw new TypeError("Constructor Intl.ListFormat requires 'new'");var D=Intl.getCanonicalLocales(_);T=T===void 0?Object.create(null):u(T);var F=Object.create(null),J=st(T,"localeMatcher","string",a,"best fit");F.localeMatcher=J;var he=st(T,"type","string",o,"conjunction");I(this,"type",he);var ee=st(T,"style","string",i,"long");I(this,"style",ee);var fe=S.localeData,le=Ha(S.availableLocales,D,F),we=le.dataLocale,Ge=fe[we],ct=Ge.formats[he],wt=ct[ee];I(this,"templatePair",wt.Pair),I(this,"templateStart",wt.Start),I(this,"templateMiddle",wt.Middle),I(this,"templateEnd",wt.End),I(this,"locale",le.locale),I(this,"initializedListFormat",this)}return t(k,[{key:"format",value:function(T){var D=this;if(!(D instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));if(!O(D,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));var F=Ao(T);return Ka(D,F)}},{key:"formatToParts",value:function(T){var D=this;if(!(D instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));if(!O(D,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));var F=Ao(T);return Ya(D,F)}},{key:"resolvedOptions",value:function(){var T=this;if(!(T instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));if(!O(T,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));var D=C(this,"locale"),F=C(this,"type"),J=C(this,"style");return{locale:D,type:F,style:J}}}],[{key:"supportedLocalesOf",value:function(T){var D=arguments[1],F=S.availableLocales,J=Intl.getCanonicalLocales(T);return La(F,J,D)}},{key:"__addLocaleData",value:function(T){var D=T.data,F=T.locale,J=g();J==null&&m(F),S.localeData[F]=D,S.availableLocales.includes(F)||S.availableLocales.push(F)}}]),k}();Object.defineProperty(St.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,value:"Intl.ListFormat",configurable:!0});function Pn(){if(typeof Intl>"u")throw new TypeError("Could not define Intl.ListFormat: Expected 'Intl' to exist. Remember to include polyfill for Intl.getCanonicalLocales before applying this polyfill");Intl.ListFormat=St}r||Pn()})();s();"__addLocaleData"in Intl.ListFormat&&Intl.ListFormat.__addLocaleData({locale:"en",data:{formats:{conjunction:{long:{Pair:"{0} and {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, and {1}"},short:{Pair:"{0} & {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, & {1}"},narrow:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"}},disjunction:{long:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},short:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},narrow:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"}},unit:{long:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},short:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},narrow:{Pair:"{0} {1}",Start:"{0} {1}",Middle:"{0} {1}",End:"{0} {1}"}}}}});var Jc=w(ie());s();s();function qd(){return`https://${Qt.services.content.host}`}s();function Jd(r,n){let e=[],t=0;for(;t<r.length;)e.push(r.slice(t,t+n)),t+=n;return e}function Gd(r){let n=r.reduce((o,i)=>o+i.length,0),e=new Uint8Array(n),t=0;return r.forEach(o=>{e.set(o,t),t+=o.length}),e}s();function jd(r,n){let{pageId:e,rename:t=!1}=n;return{...structuredClone(r),id:e,title:t?Ko(`Copy of ${r.title}`):r.title,git:void 0,pages:r.type==="link"?void 0:[]}}s();function $d(r,n,e,t){if(e.blobId)return new URL(`/content/${n}/blobs/${e.blobId}/${e.name}`,r).toString();if(e.downloadURL)return t?t(e.downloadURL):e.downloadURL;throw new Error("File does not have a download URL")}s();s();function on(r,n,e={}){let t;if(e.into){let o=v.getIn(r,["pages",e.into]);if(!o||!Zn(o))throw new Error(`Cannot insert page into ${e.into}`);t=v.get(o,"pages")}else t=v.getIn(r,["rootPages"]);if(!t)throw new Error(`Cannot insert page into ${e.into}`);e.at!==void 0?v.insert(t,e.at,[n.id]):v.push(t,[n.id]),v.setIn(r,["pages",n.id],Be(r)?Rt(n):n)}function Xd(r,n,e){let t=Bt(r,e),o=t?v.get(t,"pages"):v.get(r,"rootPages"),i=v.findIndex(o,c=>c===e);if(i<0)return{at:i};let a=t?v.get(t,"id"):void 0;return n==="after"?{into:a,at:i+1}:{into:a,at:i}}function Qd(r,n,e){let t=Xd(r,"before",e);if(!(t.at===void 0||t?.at<0))return on(r,n,t)}function pi(r,n,e){let t=Xd(r,"after",e);if(!(t.at===void 0||t?.at<0))return on(r,n,t)}s();function ft(r,n,e){let t=v.getIn(r,["pages",n]);if(t)if(typeof e=="function"){e(t);return}else Object.entries(e).forEach(([o,i])=>{v.set(t,o,Be(r)?Rt(i):i)})}function Zd(r,n,e){ft(r,n,t=>{if(!Jr(t))return;let o=zl(ke(t));v.set(t,"layout",{...o,...e})})}function ep(r,n,e){ft(r,n,{title:Ko(e)})}function tp(r,n,e){ft(r,n,t=>{Jr(t)&&v.set(t,"description",Yl(e))})}function us(r,n){let{originalPageId:e,parentPageId:t}=n,o=n.newPageId||Qn(),i=v.getIn(r,["pages",e]);if(!i)return;let a=jd(Be(i)?ke(i):i,{pageId:o,rename:!t});t?on(r,a,{into:t}):pi(r,a,e);let c;if(Zn(i)){let l=v.get(i,"pages");c=v.map(l,u=>{let d=Qn();return us(r,{originalPageId:u,parentPageId:a.id,newPageId:d}),d})}return ft(r,a.id,{pages:c}),o}s();s();function Zr(r,n,e={}){let t=v.getIn(r,["pages",n]);if(!t)return;let o=Bt(r,n);if(e.deleteEmptyGroupParent&&o&&v.get(o,"type")==="group"&&v.get(o,"pages").length===1)return Zr(r,v.get(o,"id"));let i=[v.get(t,"id")];v.get(t,"type")!=="link"&&Gl(r,n).forEach(u=>{i.push(v.get(u,"id"))}),[...v.entries(v.get(r,"pages"))].some(([,l])=>Jr(l)&&!i.includes(v.get(l,"id")))&&(v.delArrayValue(o?v.get(o,"pages"):v.get(r,"rootPages"),n),i.forEach(l=>{v.del(v.get(r,"pages"),l);let u=v.get(r,"conflicts");u&&v.getIn(u,["pages",l])&&v.delIn(u,["pages",l])}))}function ty(r,n,e){if(n===e)return!1;let t=v.getIn(r,["pages",n]),o=v.getIn(r,["pages",e]);if(!t||!o||Jl(o)||Za(t))return!1;let i=zo(r,e);return!(v.findIndex(i,a=>v.get(a,"id")===n)>=0)}function fi(r,n,e,t={}){let o=v.getIn(r,["pages",n]),i=e?v.getIn(r,["pages",e]):void 0;if(i&&!Zn(i))throw new Error("Cannot move page under a link");if(!o||e&&!ty(r,n,e))return;let a=v.get(r,"rootPages"),c=i?v.get(i,"pages"):a,l=typeof t.at=="number"?t.at:c.length,u=Bt(r,n),d=u?v.get(u,"pages"):a,m=v.findIndex(d,h=>h===n),g=u?v.get(u,"id")===e:!e;l===m&&g||(m>=0&&(v.delArrayIndex(d,m,1),g&&(l=m<=l?l-1:l)),v.insert(c,l,[n]),t.deleteEmptyGroupParent&&u&&Za(u)&&v.get(u,"pages").length===0&&Zr(r,v.get(u,"id")))}function np(r,n,e){let t=Bt(r,e),o=t?v.get(t,"pages"):v.get(r,"rootPages"),i=v.findIndex(o,a=>a===e);return{at:n==="after"?i+1:i,parentId:t?v.get(t,"id"):void 0}}function rp(r,n,e){let{at:t,parentId:o}=np(r,"before",e);t<0||fi(r,n,o,{at:t})}function op(r,n,e){let{at:t,parentId:o}=np(r,"after",e);t<0||fi(r,n,o,{at:t})}s();function ip(r,n){if(v.getIn(r,["files",n.id]))throw new Error("File with same ID already exists in revision");let t=v.get(r,"files");v.set(t,n.id,n)}function ap(r,n){v.delIn(r,["files",n])}function sp(r,n,e){let t=v.getIn(r,["files",n]);if(!t)throw new Error("File doesn't exist in revision");Object.entries(e).forEach(([o,i])=>{v.set(t,o,Be(r)?Rt(i):i)})}s();var an=G("normalizeRevision");function lp(r){let n=v.get(r,"id"),e=v.get(r,"contentId"),t=v.get(r,"pages"),o=v.get(r,"rootPages"),i=v.get(r,"conflicts"),a=v.values(v.get(r,"parents")),c=new Set(v.keys(t)),l;if(a.length>3)throw new Error(`Revision ${e}/${n} has more than 3 parents`);if(a.includes(n)){let h=a.filter(P=>P!==n);if(h.length===0)throw new Error(`Revision ${e}/${n} has no more parents after removing itself as parent`);v.set(r,"parents",h),an.warning(`${e}/${n}: updated parents to remove itself as parent. New parents:`,h)}let u=v.get(r,"customFields");u?cp(u):v.set(r,"customFields",{});let d=h=>{let P=[];if(h.forEach(S=>{m(S)&&P.push(S)}),P.length!==h.length)return P},m=h=>{if(!c.has(h))return!1;c.delete(h);let P=v.get(t,h);if(!P)return!1;let S=v.get(P,"customFields");if(S&&cp(S),v.get(P,"type")==="link")return ny(e,n,h,P),!0;let I=P;l===void 0&&v.get(P,"type")==="document"&&(l=v.get(P,"id"));let C=d(v.get(I,"pages"));return C&&(v.set(I,"pages",C),an.warning(`${e}/${n}: updated children for page ${h}. New children pages:`,C)),!0},g=d(o);if(g&&(v.set(r,"rootPages",g),an.warning(`${e}/${n}: normalized rootPages. New root pages:`,g)),c.size>0){let h=Array.from(c);v.push(o,h),an.warning(`${e}/${n}: made pages with invalid parent into rootPages. Pages:`,h)}if(!l){let h=Wl();on(r,h),an.warning(`${e}/${n}: created empty page document ${h.id} as none were found. `)}if(i!==void 0){let h=v.get(i,"pages"),P=v.keys(h),S=P.reduce((I,C)=>{let O=v.get(t,C);return!O||v.get(O,"type")==="link"||v.get(O,"type")==="group"?I.add(C):I},new Set);S.size>0&&(S.size===P.length?(v.del(r,"conflicts"),an.warning(`${e}/${n}: normalized conflicts. All were invalid and have been removed.`)):(S.forEach(I=>{v.del(h,I)}),an.warning(`${e}/${n}: normalized conflicts. New conflicts:`,i)))}}function cp(r){for(let[n,e]of v.entries(r)){let t=v.get(e,"value");typeof t!="string"&&typeof t!="number"&&typeof t!="boolean"&&!Array.isArray(ke(t))&&v.del(r,n)}}function ny(r,n,e,t){let o=v.get(t,"target");(typeof o!="object"||typeof v.get(o,"kind")!="string")&&(an.warning(`${r}/${n}: normalized invalid link ${e}, with target ${JSON.stringify(ke(o))}`),v.set(t,"type","document"),v.set(t,"pages",[]),v.del(t,"target"))}s();function up(r){return v.get(r,"conflicts")!==void 0}function ry(r,n,e){if(!up(r))return;let t=v.getIn(r,["conflicts","pages"]);t&&v.has(t,n)&&v.set(t,n,e),oy(r)}function oy(r){if(!up(r))return;let n=v.getIn(r,["conflicts","pages"]);if(n){for(let[,e]of v.entries(n))if(e!==!1)return;v.del(r,"conflicts")}}function dp(r,n){ry(r,n,!1)}s();function pp(r,n,e=void 0){ft(r,n,t=>{if(v.get(t,"type")!=="document")return;let i={ref:e,yPos:0};v.set(t,"cover",Be(r)?Rt(i):i)})}function fp(r,n){ft(r,n,e=>{v.get(e,"type")==="document"&&v.del(e,"cover")})}function mp(r,n,e){ft(r,n,t=>{if(v.get(t,"type")!=="document")return;let i=v.get(t,"cover");i&&v.set(i,"yPos",e)})}s();function hp(r,n="Page",e=!1){let t=v.get(r,"pages"),i=v.values(t).map(l=>v.get(l,"title")),a=new Set(i);if(!e&&!a.has(n))return n;let c=l=>{let u=` ${l}`,d=`${n.slice(0,Kl-u.length)}${u}`;return a.has(d)?c(l+1):d};return c(1)}s();function gp(r){v.get(r,"customFields")||v.set(r,"customFields",{})}function yp(r,n){gp(r),bp(r,n)}function vp(r,n,e){let t=v.getIn(r,["pages",n]);t&&(gp(t),bp(t,e))}function bp(r,n){Object.entries(n).forEach(([e,t])=>{v.getIn(r,["customFields",e])?v.setIn(r,["customFields",e,"value"],t.value):v.setIn(r,["customFields",e],Be(r)?Rt(t):t)})}s();function Sp(r,n){let e=v.get(r,"edits");v.set(r,"edits",qr(e,Array.isArray(n)?n:[n]))}s();function wp(r,n,e){let t=v.getIn(r,["pages",n,"edits"]);if(!t)return;let o=(()=>Array.isArray(e)?qr(t,e):typeof e=="string"?qr(t,[e]):Fl(t,e))();v.setIn(r,["pages",n,"edits"],o)}s();function mi(r){return r.getMap("data")}s();var Cp=nt(r=>({id:r.get("id"),type:r.get("type"),contentId:r.get("contentId"),conflicts:ke(r.get("conflicts")),parents:r.get("parents").toArray(),mergedFrom:r.get("mergedFrom"),rolledBackBy:r.get("rolledBackBy"),git:ke(r.get("git")),rootPages:r.get("rootPages").toArray(),pages:iy(r.get("pages")),files:ay(r.get("files")),edits:ke(r.get("edits")),customFields:ke(r.get("customFields"))})),iy=nt(r=>{let n={};return r.forEach((e,t)=>{n[t]=Be(e)?Pp(e):ke(e)}),n}),ay=nt(r=>{let n={};return r.forEach((e,t)=>{n[t]=Be(e)?Pp(e):ke(e)}),n}),Pp=nt(r=>ke(r));s();var Rp={insertPage:on,insertPageAfter:pi,insertPageBefore:Qd,removePage:Zr,updatePage:ft,updatePageLayout:Zd,movePage:fi,movePageAfter:op,movePageBefore:rp,addPageCover:pp,removePageCover:fp,movePageCover:mp,renamePage:ep,setPageDescription:tp,duplicatePage:us,resolveConflict:dp,insertFile:ip,removeFile:ap,updateFile:sp,getPageParent:Bt,getUniquePageTitle:hp,updateRevisionCustomFields:yp,updatePageCustomFields:vp,markRevisionAsEdited:Sp,markPageAsEdited:wp};function kp(r){let n={revision:r};for(let e in Rp)n[e]=(...t)=>Rp[e](r,...t);return n}s();var cn={};jg(cn,{AICompletionHistoryEntry:()=>ky,AICompletionReply:()=>Ry,AICompletionRequest:()=>Py,AckMessage:()=>dy,BlockRichTextCompletion:()=>Dy,BroadcastOperationMessage:()=>fy,BroadcastPresencesMessage:()=>py,ContentOperation:()=>vy,ContentOperationStatus:()=>_y,DebugLog:()=>by,DebugLogUpdate:()=>Sy,DocumentCompletions:()=>ds,GenerateBlockCompletionReply:()=>Ty,GenerateBlockCompletionRequest:()=>Iy,GenerateDiagramReply:()=>Oy,GenerateDiagramRequest:()=>Ay,GenerateDiagramSuggestionsReply:()=>Ey,GenerateDiagramSuggestionsRequest:()=>xy,InitMessage:()=>cy,Message:()=>sn,Presence:()=>yy,PromptInitMessage:()=>sy,RPCError:()=>gy,RPCReplyMessage:()=>hy,RPCRequestMessage:()=>my,StopAICompletionReply:()=>Cy,StopAICompletionRequest:()=>wy,StoredUpdate:()=>Ip,UpdateFormatVersion:()=>It,UpdateMessage:()=>ly,UpdatePresenceMessage:()=>uy,default:()=>f});s();var U=w(Xg()),R=U.Reader,te=U.Writer,p=U.util,f=U.roots.default||(U.roots.default={}),sy=f.PromptInitMessage=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id=0,r.prototype.index=0,r.prototype.count=0,r.prototype.stateVector=p.newBuffer([]),r.prototype.version=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&t.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).int32(e.count),t.uint32(34).bytes(e.stateVector),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&t.uint32(40).int32(e.version),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.PromptInitMessage;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.stateVector=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("stateVector"))throw p.ProtocolError("missing required 'stateVector'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!p.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!p.isInteger(e.count))return"count: integer expected";if(!(e.stateVector&&typeof e.stateVector.length=="number"||p.isString(e.stateVector)))return"stateVector: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},r.fromObject=function(e){if(e instanceof f.PromptInitMessage)return e;let t=new f.PromptInitMessage;switch(e.id!=null&&(t.id=e.id|0),e.index!=null&&(t.index=e.index|0),e.count!=null&&(t.count=e.count|0),e.stateVector!=null&&(typeof e.stateVector=="string"?p.base64.decode(e.stateVector,t.stateVector=p.newBuffer(p.base64.length(e.stateVector)),0):e.stateVector.length>=0&&(t.stateVector=e.stateVector)),e.version){default:if(typeof e.version=="number"){t.version=e.version;break}break;case"UNSPECIFIED":case 0:t.version=0;break;case"V1":case 1:t.version=1;break;case"V2":case 2:t.version=2;break}return t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.id=0,o.index=0,o.count=0,t.bytes===String?o.stateVector="":(o.stateVector=[],t.bytes!==Array&&(o.stateVector=p.newBuffer(o.stateVector))),o.version=t.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(o.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(o.count=e.count),e.stateVector!=null&&e.hasOwnProperty("stateVector")&&(o.stateVector=t.bytes===String?p.base64.encode(e.stateVector,0,e.stateVector.length):t.bytes===Array?Array.prototype.slice.call(e.stateVector):e.stateVector),e.version!=null&&e.hasOwnProperty("version")&&(o.version=t.enums===String?f.UpdateFormatVersion[e.version]===void 0?e.version:f.UpdateFormatVersion[e.version]:e.version),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/PromptInitMessage"},r})(),cy=f.InitMessage=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id=0,r.prototype.index=0,r.prototype.count=0,r.prototype.update=p.newBuffer([]),r.prototype.version=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&t.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).int32(e.count),t.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&t.uint32(40).int32(e.version),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.InitMessage;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw p.ProtocolError("missing required 'update'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!p.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!p.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||p.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},r.fromObject=function(e){if(e instanceof f.InitMessage)return e;let t=new f.InitMessage;switch(e.id!=null&&(t.id=e.id|0),e.index!=null&&(t.index=e.index|0),e.count!=null&&(t.count=e.count|0),e.update!=null&&(typeof e.update=="string"?p.base64.decode(e.update,t.update=p.newBuffer(p.base64.length(e.update)),0):e.update.length>=0&&(t.update=e.update)),e.version){default:if(typeof e.version=="number"){t.version=e.version;break}break;case"UNSPECIFIED":case 0:t.version=0;break;case"V1":case 1:t.version=1;break;case"V2":case 2:t.version=2;break}return t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.id=0,o.index=0,o.count=0,t.bytes===String?o.update="":(o.update=[],t.bytes!==Array&&(o.update=p.newBuffer(o.update))),o.version=t.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(o.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(o.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(o.update=t.bytes===String?p.base64.encode(e.update,0,e.update.length):t.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(o.version=t.enums===String?f.UpdateFormatVersion[e.version]===void 0?e.version:f.UpdateFormatVersion[e.version]:e.version),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/InitMessage"},r})(),ly=f.UpdateMessage=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id=0,r.prototype.index=0,r.prototype.count=0,r.prototype.update=p.newBuffer([]),r.prototype.version=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&t.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).int32(e.count),t.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&t.uint32(40).int32(e.version),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.UpdateMessage;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw p.ProtocolError("missing required 'update'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!p.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!p.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||p.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},r.fromObject=function(e){if(e instanceof f.UpdateMessage)return e;let t=new f.UpdateMessage;switch(e.id!=null&&(t.id=e.id|0),e.index!=null&&(t.index=e.index|0),e.count!=null&&(t.count=e.count|0),e.update!=null&&(typeof e.update=="string"?p.base64.decode(e.update,t.update=p.newBuffer(p.base64.length(e.update)),0):e.update.length>=0&&(t.update=e.update)),e.version){default:if(typeof e.version=="number"){t.version=e.version;break}break;case"UNSPECIFIED":case 0:t.version=0;break;case"V1":case 1:t.version=1;break;case"V2":case 2:t.version=2;break}return t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.id=0,o.index=0,o.count=0,t.bytes===String?o.update="":(o.update=[],t.bytes!==Array&&(o.update=p.newBuffer(o.update))),o.version=t.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(o.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(o.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(o.update=t.bytes===String?p.base64.encode(e.update,0,e.update.length):t.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(o.version=t.enums===String?f.UpdateFormatVersion[e.version]===void 0?e.version:f.UpdateFormatVersion[e.version]:e.version),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdateMessage"},r})(),Ip=f.StoredUpdate=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.update=p.newBuffer([]),r.prototype.version=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(18).bytes(e.update),t.uint32(24).int32(e.version),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.StoredUpdate;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 2:{i.update=e.bytes();break}case 3:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("update"))throw p.ProtocolError("missing required 'update'",{instance:i});if(!i.hasOwnProperty("version"))throw p.ProtocolError("missing required 'version'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!(e.update&&typeof e.update.length=="number"||p.isString(e.update)))return"update: buffer expected";switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},r.fromObject=function(e){if(e instanceof f.StoredUpdate)return e;let t=new f.StoredUpdate;switch(e.update!=null&&(typeof e.update=="string"?p.base64.decode(e.update,t.update=p.newBuffer(p.base64.length(e.update)),0):e.update.length>=0&&(t.update=e.update)),e.version){default:if(typeof e.version=="number"){t.version=e.version;break}break;case"UNSPECIFIED":case 0:t.version=0;break;case"V1":case 1:t.version=1;break;case"V2":case 2:t.version=2;break}return t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(t.bytes===String?o.update="":(o.update=[],t.bytes!==Array&&(o.update=p.newBuffer(o.update))),o.version=t.enums===String?"UNSPECIFIED":0),e.update!=null&&e.hasOwnProperty("update")&&(o.update=t.bytes===String?p.base64.encode(e.update,0,e.update.length):t.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(o.version=t.enums===String?f.UpdateFormatVersion[e.version]===void 0?e.version:f.UpdateFormatVersion[e.version]:e.version),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/StoredUpdate"},r})(),uy=f.UpdatePresenceMessage=(()=>{function r(n){if(this.data={},this.positions={},n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id=0,r.prototype.data=p.emptyObject,r.prototype.positions=p.emptyObject,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=te.create()),t.uint32(8).int32(e.id),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let o=Object.keys(e.data),i=0;i<o.length;++i)t.uint32(18).fork().uint32(10).string(o[i]).uint32(18).string(e.data[o[i]]).ldelim();if(e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let o=Object.keys(e.positions),i=0;i<o.length;++i)t.uint32(26).fork().uint32(10).string(o[i]).uint32(18).bytes(e.positions[o[i]]).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.UpdatePresenceMessage,a,c;for(;e.pos<o;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.data===p.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",c="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.string();break;default:e.skipType(d&7);break}}i.data[a]=c;break}case 3:{i.positions===p.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",c=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=c;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isInteger(e.id))return"id: integer expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!p.isObject(e.data))return"data: object expected";let t=Object.keys(e.data);for(let o=0;o<t.length;++o)if(!p.isString(e.data[t[o]]))return"data: string{k:string} expected"}if(e.positions!=null&&e.hasOwnProperty("positions")){if(!p.isObject(e.positions))return"positions: object expected";let t=Object.keys(e.positions);for(let o=0;o<t.length;++o)if(!(e.positions[t[o]]&&typeof e.positions[t[o]].length=="number"||p.isString(e.positions[t[o]])))return"positions: buffer{k:string} expected"}return null},r.fromObject=function(e){if(e instanceof f.UpdatePresenceMessage)return e;let t=new f.UpdatePresenceMessage;if(e.id!=null&&(t.id=e.id|0),e.data){if(typeof e.data!="object")throw TypeError(".UpdatePresenceMessage.data: object expected");t.data={};for(let o=Object.keys(e.data),i=0;i<o.length;++i)t.data[o[i]]=String(e.data[o[i]])}if(e.positions){if(typeof e.positions!="object")throw TypeError(".UpdatePresenceMessage.positions: object expected");t.positions={};for(let o=Object.keys(e.positions),i=0;i<o.length;++i)typeof e.positions[o[i]]=="string"?p.base64.decode(e.positions[o[i]],t.positions[o[i]]=p.newBuffer(p.base64.length(e.positions[o[i]])),0):e.positions[o[i]].length>=0&&(t.positions[o[i]]=e.positions[o[i]])}return t},r.toObject=function(e,t){t||(t={});let o={};(t.objects||t.defaults)&&(o.data={},o.positions={}),t.defaults&&(o.id=0),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id);let i;if(e.data&&(i=Object.keys(e.data)).length){o.data={};for(let a=0;a<i.length;++a)o.data[i[a]]=e.data[i[a]]}if(e.positions&&(i=Object.keys(e.positions)).length){o.positions={};for(let a=0;a<i.length;++a)o.positions[i[a]]=t.bytes===String?p.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):t.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdatePresenceMessage"},r})(),dy=f.AckMessage=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id=0,r.prototype.message=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(8).int32(e.id),t.uint32(16).int32(e.message),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.AckMessage;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.message=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("message"))throw p.ProtocolError("missing required 'message'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":p.isInteger(e.id)?p.isInteger(e.message)?null:"message: integer expected":"id: integer expected"},r.fromObject=function(e){if(e instanceof f.AckMessage)return e;let t=new f.AckMessage;return e.id!=null&&(t.id=e.id|0),e.message!=null&&(t.message=e.message|0),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.id=0,o.message=0),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.message!=null&&e.hasOwnProperty("message")&&(o.message=e.message),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/AckMessage"},r})(),py=f.BroadcastPresencesMessage=(()=>{function r(n){if(this.presences={},n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id=0,r.prototype.presences=p.emptyObject,r.prototype.selfClientId="",r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=te.create()),t.uint32(8).int32(e.id),e.presences!=null&&Object.hasOwnProperty.call(e,"presences"))for(let o=Object.keys(e.presences),i=0;i<o.length;++i)t.uint32(18).fork().uint32(10).string(o[i]),f.Presence.encode(e.presences[o[i]],t.uint32(18).fork()).ldelim().ldelim();return t.uint32(26).string(e.selfClientId),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.BroadcastPresencesMessage,a,c;for(;e.pos<o;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.presences===p.emptyObject&&(i.presences={});let u=e.uint32()+e.pos;for(a="",c=null;e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=f.Presence.decode(e,e.uint32());break;default:e.skipType(d&7);break}}i.presences[a]=c;break}case 3:{i.selfClientId=e.string();break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("selfClientId"))throw p.ProtocolError("missing required 'selfClientId'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isInteger(e.id))return"id: integer expected";if(e.presences!=null&&e.hasOwnProperty("presences")){if(!p.isObject(e.presences))return"presences: object expected";let t=Object.keys(e.presences);for(let o=0;o<t.length;++o){let i=f.Presence.verify(e.presences[t[o]]);if(i)return"presences."+i}}return p.isString(e.selfClientId)?null:"selfClientId: string expected"},r.fromObject=function(e){if(e instanceof f.BroadcastPresencesMessage)return e;let t=new f.BroadcastPresencesMessage;if(e.id!=null&&(t.id=e.id|0),e.presences){if(typeof e.presences!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");t.presences={};for(let o=Object.keys(e.presences),i=0;i<o.length;++i){if(typeof e.presences[o[i]]!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");t.presences[o[i]]=f.Presence.fromObject(e.presences[o[i]])}}return e.selfClientId!=null&&(t.selfClientId=String(e.selfClientId)),t},r.toObject=function(e,t){t||(t={});let o={};(t.objects||t.defaults)&&(o.presences={}),t.defaults&&(o.id=0,o.selfClientId=""),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id);let i;if(e.presences&&(i=Object.keys(e.presences)).length){o.presences={};for(let a=0;a<i.length;++a)o.presences[i[a]]=f.Presence.toObject(e.presences[i[a]],t)}return e.selfClientId!=null&&e.hasOwnProperty("selfClientId")&&(o.selfClientId=e.selfClientId),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastPresencesMessage"},r})(),fy=f.BroadcastOperationMessage=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id=0,r.prototype.operation=null,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(8).int32(e.id),f.ContentOperation.encode(e.operation,t.uint32(18).fork()).ldelim(),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.BroadcastOperationMessage;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.operation=f.ContentOperation.decode(e,e.uint32());break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("operation"))throw p.ProtocolError("missing required 'operation'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isInteger(e.id))return"id: integer expected";{let t=f.ContentOperation.verify(e.operation);if(t)return"operation."+t}return null},r.fromObject=function(e){if(e instanceof f.BroadcastOperationMessage)return e;let t=new f.BroadcastOperationMessage;if(e.id!=null&&(t.id=e.id|0),e.operation!=null){if(typeof e.operation!="object")throw TypeError(".BroadcastOperationMessage.operation: object expected");t.operation=f.ContentOperation.fromObject(e.operation)}return t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.id=0,o.operation=null),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.operation!=null&&e.hasOwnProperty("operation")&&(o.operation=f.ContentOperation.toObject(e.operation,t)),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastOperationMessage"},r})(),my=f.RPCRequestMessage=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id=0,r.prototype.service="",r.prototype.method="",r.prototype.payload=p.newBuffer([]),r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(8).int32(e.id),t.uint32(18).string(e.service),t.uint32(26).string(e.method),t.uint32(34).bytes(e.payload),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.RPCRequestMessage;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.service=e.string();break}case 3:{i.method=e.string();break}case 4:{i.payload=e.bytes();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("service"))throw p.ProtocolError("missing required 'service'",{instance:i});if(!i.hasOwnProperty("method"))throw p.ProtocolError("missing required 'method'",{instance:i});if(!i.hasOwnProperty("payload"))throw p.ProtocolError("missing required 'payload'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":p.isInteger(e.id)?p.isString(e.service)?p.isString(e.method)?e.payload&&typeof e.payload.length=="number"||p.isString(e.payload)?null:"payload: buffer expected":"method: string expected":"service: string expected":"id: integer expected"},r.fromObject=function(e){if(e instanceof f.RPCRequestMessage)return e;let t=new f.RPCRequestMessage;return e.id!=null&&(t.id=e.id|0),e.service!=null&&(t.service=String(e.service)),e.method!=null&&(t.method=String(e.method)),e.payload!=null&&(typeof e.payload=="string"?p.base64.decode(e.payload,t.payload=p.newBuffer(p.base64.length(e.payload)),0):e.payload.length>=0&&(t.payload=e.payload)),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.id=0,o.service="",o.method="",t.bytes===String?o.payload="":(o.payload=[],t.bytes!==Array&&(o.payload=p.newBuffer(o.payload)))),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.service!=null&&e.hasOwnProperty("service")&&(o.service=e.service),e.method!=null&&e.hasOwnProperty("method")&&(o.method=e.method),e.payload!=null&&e.hasOwnProperty("payload")&&(o.payload=t.bytes===String?p.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/RPCRequestMessage"},r})(),hy=f.RPCReplyMessage=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id=0,r.prototype.replyTo=0,r.prototype.payload=p.newBuffer([]),r.prototype.error=null,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(8).int32(e.id),t.uint32(16).int32(e.replyTo),e.payload!=null&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(26).bytes(e.payload),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&f.RPCError.encode(e.error,t.uint32(34).fork()).ldelim(),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.RPCReplyMessage;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.replyTo=e.int32();break}case 3:{i.payload=e.bytes();break}case 4:{i.error=f.RPCError.decode(e,e.uint32());break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("replyTo"))throw p.ProtocolError("missing required 'replyTo'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isInteger(e.id))return"id: integer expected";if(!p.isInteger(e.replyTo))return"replyTo: integer expected";if(e.payload!=null&&e.hasOwnProperty("payload")&&!(e.payload&&typeof e.payload.length=="number"||p.isString(e.payload)))return"payload: buffer expected";if(e.error!=null&&e.hasOwnProperty("error")){let t=f.RPCError.verify(e.error);if(t)return"error."+t}return null},r.fromObject=function(e){if(e instanceof f.RPCReplyMessage)return e;let t=new f.RPCReplyMessage;if(e.id!=null&&(t.id=e.id|0),e.replyTo!=null&&(t.replyTo=e.replyTo|0),e.payload!=null&&(typeof e.payload=="string"?p.base64.decode(e.payload,t.payload=p.newBuffer(p.base64.length(e.payload)),0):e.payload.length>=0&&(t.payload=e.payload)),e.error!=null){if(typeof e.error!="object")throw TypeError(".RPCReplyMessage.error: object expected");t.error=f.RPCError.fromObject(e.error)}return t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.id=0,o.replyTo=0,t.bytes===String?o.payload="":(o.payload=[],t.bytes!==Array&&(o.payload=p.newBuffer(o.payload))),o.error=null),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.replyTo!=null&&e.hasOwnProperty("replyTo")&&(o.replyTo=e.replyTo),e.payload!=null&&e.hasOwnProperty("payload")&&(o.payload=t.bytes===String?p.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),e.error!=null&&e.hasOwnProperty("error")&&(o.error=f.RPCError.toObject(e.error,t)),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/RPCReplyMessage"},r})(),gy=f.RPCError=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.code=0,r.prototype.message="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(8).int32(e.code),t.uint32(18).string(e.message),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.RPCError;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.code=e.int32();break}case 2:{i.message=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("code"))throw p.ProtocolError("missing required 'code'",{instance:i});if(!i.hasOwnProperty("message"))throw p.ProtocolError("missing required 'message'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":p.isInteger(e.code)?p.isString(e.message)?null:"message: string expected":"code: integer expected"},r.fromObject=function(e){if(e instanceof f.RPCError)return e;let t=new f.RPCError;return e.code!=null&&(t.code=e.code|0),e.message!=null&&(t.message=String(e.message)),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.code=0,o.message=""),e.code!=null&&e.hasOwnProperty("code")&&(o.code=e.code),e.message!=null&&e.hasOwnProperty("message")&&(o.message=e.message),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/RPCError"},r})(),sn=f.Message=(()=>{function r(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)e[t[o]]!=null&&(this[t[o]]=e[t[o]])}r.prototype.promptInit=null,r.prototype.init=null,r.prototype.update=null,r.prototype.updatePresence=null,r.prototype.broadcastPresences=null,r.prototype.broadcastOperation=null,r.prototype.ack=null,r.prototype.rpcRequest=null,r.prototype.rpcReply=null;let n;return Object.defineProperty(r.prototype,"message",{get:p.oneOfGetter(n=["promptInit","init","update","updatePresence","broadcastPresences","broadcastOperation","ack","rpcRequest","rpcReply"]),set:p.oneOfSetter(n)}),r.create=function(t){return new r(t)},r.encode=function(t,o){return o||(o=te.create()),t.promptInit!=null&&Object.hasOwnProperty.call(t,"promptInit")&&f.PromptInitMessage.encode(t.promptInit,o.uint32(10).fork()).ldelim(),t.init!=null&&Object.hasOwnProperty.call(t,"init")&&f.InitMessage.encode(t.init,o.uint32(18).fork()).ldelim(),t.update!=null&&Object.hasOwnProperty.call(t,"update")&&f.UpdateMessage.encode(t.update,o.uint32(26).fork()).ldelim(),t.updatePresence!=null&&Object.hasOwnProperty.call(t,"updatePresence")&&f.UpdatePresenceMessage.encode(t.updatePresence,o.uint32(34).fork()).ldelim(),t.broadcastPresences!=null&&Object.hasOwnProperty.call(t,"broadcastPresences")&&f.BroadcastPresencesMessage.encode(t.broadcastPresences,o.uint32(42).fork()).ldelim(),t.broadcastOperation!=null&&Object.hasOwnProperty.call(t,"broadcastOperation")&&f.BroadcastOperationMessage.encode(t.broadcastOperation,o.uint32(50).fork()).ldelim(),t.ack!=null&&Object.hasOwnProperty.call(t,"ack")&&f.AckMessage.encode(t.ack,o.uint32(58).fork()).ldelim(),t.rpcRequest!=null&&Object.hasOwnProperty.call(t,"rpcRequest")&&f.RPCRequestMessage.encode(t.rpcRequest,o.uint32(66).fork()).ldelim(),t.rpcReply!=null&&Object.hasOwnProperty.call(t,"rpcReply")&&f.RPCReplyMessage.encode(t.rpcReply,o.uint32(74).fork()).ldelim(),o},r.encodeDelimited=function(t,o){return this.encode(t,o).ldelim()},r.decode=function(t,o){t instanceof R||(t=R.create(t));let i=o===void 0?t.len:t.pos+o,a=new f.Message;for(;t.pos<i;){let c=t.uint32();switch(c>>>3){case 1:{a.promptInit=f.PromptInitMessage.decode(t,t.uint32());break}case 2:{a.init=f.InitMessage.decode(t,t.uint32());break}case 3:{a.update=f.UpdateMessage.decode(t,t.uint32());break}case 4:{a.updatePresence=f.UpdatePresenceMessage.decode(t,t.uint32());break}case 5:{a.broadcastPresences=f.BroadcastPresencesMessage.decode(t,t.uint32());break}case 6:{a.broadcastOperation=f.BroadcastOperationMessage.decode(t,t.uint32());break}case 7:{a.ack=f.AckMessage.decode(t,t.uint32());break}case 8:{a.rpcRequest=f.RPCRequestMessage.decode(t,t.uint32());break}case 9:{a.rpcReply=f.RPCReplyMessage.decode(t,t.uint32());break}default:t.skipType(c&7);break}}return a},r.decodeDelimited=function(t){return t instanceof R||(t=new R(t)),this.decode(t,t.uint32())},r.verify=function(t){if(typeof t!="object"||t===null)return"object expected";let o={};if(t.promptInit!=null&&t.hasOwnProperty("promptInit")){o.message=1;{let i=f.PromptInitMessage.verify(t.promptInit);if(i)return"promptInit."+i}}if(t.init!=null&&t.hasOwnProperty("init")){if(o.message===1)return"message: multiple values";o.message=1;{let i=f.InitMessage.verify(t.init);if(i)return"init."+i}}if(t.update!=null&&t.hasOwnProperty("update")){if(o.message===1)return"message: multiple values";o.message=1;{let i=f.UpdateMessage.verify(t.update);if(i)return"update."+i}}if(t.updatePresence!=null&&t.hasOwnProperty("updatePresence")){if(o.message===1)return"message: multiple values";o.message=1;{let i=f.UpdatePresenceMessage.verify(t.updatePresence);if(i)return"updatePresence."+i}}if(t.broadcastPresences!=null&&t.hasOwnProperty("broadcastPresences")){if(o.message===1)return"message: multiple values";o.message=1;{let i=f.BroadcastPresencesMessage.verify(t.broadcastPresences);if(i)return"broadcastPresences."+i}}if(t.broadcastOperation!=null&&t.hasOwnProperty("broadcastOperation")){if(o.message===1)return"message: multiple values";o.message=1;{let i=f.BroadcastOperationMessage.verify(t.broadcastOperation);if(i)return"broadcastOperation."+i}}if(t.ack!=null&&t.hasOwnProperty("ack")){if(o.message===1)return"message: multiple values";o.message=1;{let i=f.AckMessage.verify(t.ack);if(i)return"ack."+i}}if(t.rpcRequest!=null&&t.hasOwnProperty("rpcRequest")){if(o.message===1)return"message: multiple values";o.message=1;{let i=f.RPCRequestMessage.verify(t.rpcRequest);if(i)return"rpcRequest."+i}}if(t.rpcReply!=null&&t.hasOwnProperty("rpcReply")){if(o.message===1)return"message: multiple values";o.message=1;{let i=f.RPCReplyMessage.verify(t.rpcReply);if(i)return"rpcReply."+i}}return null},r.fromObject=function(t){if(t instanceof f.Message)return t;let o=new f.Message;if(t.promptInit!=null){if(typeof t.promptInit!="object")throw TypeError(".Message.promptInit: object expected");o.promptInit=f.PromptInitMessage.fromObject(t.promptInit)}if(t.init!=null){if(typeof t.init!="object")throw TypeError(".Message.init: object expected");o.init=f.InitMessage.fromObject(t.init)}if(t.update!=null){if(typeof t.update!="object")throw TypeError(".Message.update: object expected");o.update=f.UpdateMessage.fromObject(t.update)}if(t.updatePresence!=null){if(typeof t.updatePresence!="object")throw TypeError(".Message.updatePresence: object expected");o.updatePresence=f.UpdatePresenceMessage.fromObject(t.updatePresence)}if(t.broadcastPresences!=null){if(typeof t.broadcastPresences!="object")throw TypeError(".Message.broadcastPresences: object expected");o.broadcastPresences=f.BroadcastPresencesMessage.fromObject(t.broadcastPresences)}if(t.broadcastOperation!=null){if(typeof t.broadcastOperation!="object")throw TypeError(".Message.broadcastOperation: object expected");o.broadcastOperation=f.BroadcastOperationMessage.fromObject(t.broadcastOperation)}if(t.ack!=null){if(typeof t.ack!="object")throw TypeError(".Message.ack: object expected");o.ack=f.AckMessage.fromObject(t.ack)}if(t.rpcRequest!=null){if(typeof t.rpcRequest!="object")throw TypeError(".Message.rpcRequest: object expected");o.rpcRequest=f.RPCRequestMessage.fromObject(t.rpcRequest)}if(t.rpcReply!=null){if(typeof t.rpcReply!="object")throw TypeError(".Message.rpcReply: object expected");o.rpcReply=f.RPCReplyMessage.fromObject(t.rpcReply)}return o},r.toObject=function(t,o){o||(o={});let i={};return t.promptInit!=null&&t.hasOwnProperty("promptInit")&&(i.promptInit=f.PromptInitMessage.toObject(t.promptInit,o),o.oneofs&&(i.message="promptInit")),t.init!=null&&t.hasOwnProperty("init")&&(i.init=f.InitMessage.toObject(t.init,o),o.oneofs&&(i.message="init")),t.update!=null&&t.hasOwnProperty("update")&&(i.update=f.UpdateMessage.toObject(t.update,o),o.oneofs&&(i.message="update")),t.updatePresence!=null&&t.hasOwnProperty("updatePresence")&&(i.updatePresence=f.UpdatePresenceMessage.toObject(t.updatePresence,o),o.oneofs&&(i.message="updatePresence")),t.broadcastPresences!=null&&t.hasOwnProperty("broadcastPresences")&&(i.broadcastPresences=f.BroadcastPresencesMessage.toObject(t.broadcastPresences,o),o.oneofs&&(i.message="broadcastPresences")),t.broadcastOperation!=null&&t.hasOwnProperty("broadcastOperation")&&(i.broadcastOperation=f.BroadcastOperationMessage.toObject(t.broadcastOperation,o),o.oneofs&&(i.message="broadcastOperation")),t.ack!=null&&t.hasOwnProperty("ack")&&(i.ack=f.AckMessage.toObject(t.ack,o),o.oneofs&&(i.message="ack")),t.rpcRequest!=null&&t.hasOwnProperty("rpcRequest")&&(i.rpcRequest=f.RPCRequestMessage.toObject(t.rpcRequest,o),o.oneofs&&(i.message="rpcRequest")),t.rpcReply!=null&&t.hasOwnProperty("rpcReply")&&(i.rpcReply=f.RPCReplyMessage.toObject(t.rpcReply,o),o.oneofs&&(i.message="rpcReply")),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/Message"},r})(),yy=f.Presence=(()=>{function r(n){if(this.data={},this.positions={},n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.data=p.emptyObject,r.prototype.joinTimestamp=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.updateTimestamp=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.clientId="",r.prototype.positions=p.emptyObject,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=te.create()),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let o=Object.keys(e.data),i=0;i<o.length;++i)t.uint32(10).fork().uint32(10).string(o[i]).uint32(18).string(e.data[o[i]]).ldelim();if(t.uint32(16).int64(e.joinTimestamp),t.uint32(24).int64(e.updateTimestamp),t.uint32(34).string(e.clientId),e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let o=Object.keys(e.positions),i=0;i<o.length;++i)t.uint32(42).fork().uint32(10).string(o[i]).uint32(18).bytes(e.positions[o[i]]).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.Presence,a,c;for(;e.pos<o;){let l=e.uint32();switch(l>>>3){case 1:{i.data===p.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",c="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.string();break;default:e.skipType(d&7);break}}i.data[a]=c;break}case 2:{i.joinTimestamp=e.int64();break}case 3:{i.updateTimestamp=e.int64();break}case 4:{i.clientId=e.string();break}case 5:{i.positions===p.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",c=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=c;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("joinTimestamp"))throw p.ProtocolError("missing required 'joinTimestamp'",{instance:i});if(!i.hasOwnProperty("updateTimestamp"))throw p.ProtocolError("missing required 'updateTimestamp'",{instance:i});if(!i.hasOwnProperty("clientId"))throw p.ProtocolError("missing required 'clientId'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!p.isObject(e.data))return"data: object expected";let t=Object.keys(e.data);for(let o=0;o<t.length;++o)if(!p.isString(e.data[t[o]]))return"data: string{k:string} expected"}if(!p.isInteger(e.joinTimestamp)&&!(e.joinTimestamp&&p.isInteger(e.joinTimestamp.low)&&p.isInteger(e.joinTimestamp.high)))return"joinTimestamp: integer|Long expected";if(!p.isInteger(e.updateTimestamp)&&!(e.updateTimestamp&&p.isInteger(e.updateTimestamp.low)&&p.isInteger(e.updateTimestamp.high)))return"updateTimestamp: integer|Long expected";if(!p.isString(e.clientId))return"clientId: string expected";if(e.positions!=null&&e.hasOwnProperty("positions")){if(!p.isObject(e.positions))return"positions: object expected";let t=Object.keys(e.positions);for(let o=0;o<t.length;++o)if(!(e.positions[t[o]]&&typeof e.positions[t[o]].length=="number"||p.isString(e.positions[t[o]])))return"positions: buffer{k:string} expected"}return null},r.fromObject=function(e){if(e instanceof f.Presence)return e;let t=new f.Presence;if(e.data){if(typeof e.data!="object")throw TypeError(".Presence.data: object expected");t.data={};for(let o=Object.keys(e.data),i=0;i<o.length;++i)t.data[o[i]]=String(e.data[o[i]])}if(e.joinTimestamp!=null&&(p.Long?(t.joinTimestamp=p.Long.fromValue(e.joinTimestamp)).unsigned=!1:typeof e.joinTimestamp=="string"?t.joinTimestamp=parseInt(e.joinTimestamp,10):typeof e.joinTimestamp=="number"?t.joinTimestamp=e.joinTimestamp:typeof e.joinTimestamp=="object"&&(t.joinTimestamp=new p.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber())),e.updateTimestamp!=null&&(p.Long?(t.updateTimestamp=p.Long.fromValue(e.updateTimestamp)).unsigned=!1:typeof e.updateTimestamp=="string"?t.updateTimestamp=parseInt(e.updateTimestamp,10):typeof e.updateTimestamp=="number"?t.updateTimestamp=e.updateTimestamp:typeof e.updateTimestamp=="object"&&(t.updateTimestamp=new p.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber())),e.clientId!=null&&(t.clientId=String(e.clientId)),e.positions){if(typeof e.positions!="object")throw TypeError(".Presence.positions: object expected");t.positions={};for(let o=Object.keys(e.positions),i=0;i<o.length;++i)typeof e.positions[o[i]]=="string"?p.base64.decode(e.positions[o[i]],t.positions[o[i]]=p.newBuffer(p.base64.length(e.positions[o[i]])),0):e.positions[o[i]].length>=0&&(t.positions[o[i]]=e.positions[o[i]])}return t},r.toObject=function(e,t){t||(t={});let o={};if((t.objects||t.defaults)&&(o.data={},o.positions={}),t.defaults){if(p.Long){let a=new p.Long(0,0,!1);o.joinTimestamp=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else o.joinTimestamp=t.longs===String?"0":0;if(p.Long){let a=new p.Long(0,0,!1);o.updateTimestamp=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else o.updateTimestamp=t.longs===String?"0":0;o.clientId=""}let i;if(e.data&&(i=Object.keys(e.data)).length){o.data={};for(let a=0;a<i.length;++a)o.data[i[a]]=e.data[i[a]]}if(e.joinTimestamp!=null&&e.hasOwnProperty("joinTimestamp")&&(typeof e.joinTimestamp=="number"?o.joinTimestamp=t.longs===String?String(e.joinTimestamp):e.joinTimestamp:o.joinTimestamp=t.longs===String?p.Long.prototype.toString.call(e.joinTimestamp):t.longs===Number?new p.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber():e.joinTimestamp),e.updateTimestamp!=null&&e.hasOwnProperty("updateTimestamp")&&(typeof e.updateTimestamp=="number"?o.updateTimestamp=t.longs===String?String(e.updateTimestamp):e.updateTimestamp:o.updateTimestamp=t.longs===String?p.Long.prototype.toString.call(e.updateTimestamp):t.longs===Number?new p.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber():e.updateTimestamp),e.clientId!=null&&e.hasOwnProperty("clientId")&&(o.clientId=e.clientId),e.positions&&(i=Object.keys(e.positions)).length){o.positions={};for(let a=0;a<i.length;++a)o.positions[i[a]]=t.bytes===String?p.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):t.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Presence"},r})(),vy=f.ContentOperation=(()=>{function r(n){if(this.payload={},n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id="",r.prototype.status=0,r.prototype.createdAt=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.updatedAt=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.updateId=0,r.prototype.expireAfter=0,r.prototype.cursor=0,r.prototype.target=0,r.prototype.payload=p.emptyObject,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=te.create()),t.uint32(10).string(e.id),t.uint32(16).int32(e.status),t.uint32(24).int64(e.createdAt),t.uint32(32).int64(e.updatedAt),t.uint32(40).int32(e.updateId),t.uint32(48).int32(e.expireAfter),t.uint32(56).int32(e.cursor),t.uint32(64).int32(e.target),e.payload!=null&&Object.hasOwnProperty.call(e,"payload"))for(let o=Object.keys(e.payload),i=0;i<o.length;++i)t.uint32(74).fork().uint32(10).string(o[i]).uint32(18).string(e.payload[o[i]]).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.ContentOperation,a,c;for(;e.pos<o;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.string();break}case 2:{i.status=e.int32();break}case 3:{i.createdAt=e.int64();break}case 4:{i.updatedAt=e.int64();break}case 5:{i.updateId=e.int32();break}case 6:{i.expireAfter=e.int32();break}case 7:{i.cursor=e.int32();break}case 8:{i.target=e.int32();break}case 9:{i.payload===p.emptyObject&&(i.payload={});let u=e.uint32()+e.pos;for(a="",c="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.string();break;default:e.skipType(d&7);break}}i.payload[a]=c;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("status"))throw p.ProtocolError("missing required 'status'",{instance:i});if(!i.hasOwnProperty("createdAt"))throw p.ProtocolError("missing required 'createdAt'",{instance:i});if(!i.hasOwnProperty("updatedAt"))throw p.ProtocolError("missing required 'updatedAt'",{instance:i});if(!i.hasOwnProperty("updateId"))throw p.ProtocolError("missing required 'updateId'",{instance:i});if(!i.hasOwnProperty("expireAfter"))throw p.ProtocolError("missing required 'expireAfter'",{instance:i});if(!i.hasOwnProperty("cursor"))throw p.ProtocolError("missing required 'cursor'",{instance:i});if(!i.hasOwnProperty("target"))throw p.ProtocolError("missing required 'target'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isString(e.id))return"id: string expected";switch(e.status){default:return"status: enum value expected";case 0:case 1:case 2:case 3:break}if(!p.isInteger(e.createdAt)&&!(e.createdAt&&p.isInteger(e.createdAt.low)&&p.isInteger(e.createdAt.high)))return"createdAt: integer|Long expected";if(!p.isInteger(e.updatedAt)&&!(e.updatedAt&&p.isInteger(e.updatedAt.low)&&p.isInteger(e.updatedAt.high)))return"updatedAt: integer|Long expected";if(!p.isInteger(e.updateId))return"updateId: integer expected";if(!p.isInteger(e.expireAfter))return"expireAfter: integer expected";if(!p.isInteger(e.cursor))return"cursor: integer expected";if(!p.isInteger(e.target))return"target: integer expected";if(e.payload!=null&&e.hasOwnProperty("payload")){if(!p.isObject(e.payload))return"payload: object expected";let t=Object.keys(e.payload);for(let o=0;o<t.length;++o)if(!p.isString(e.payload[t[o]]))return"payload: string{k:string} expected"}return null},r.fromObject=function(e){if(e instanceof f.ContentOperation)return e;let t=new f.ContentOperation;switch(e.id!=null&&(t.id=String(e.id)),e.status){default:if(typeof e.status=="number"){t.status=e.status;break}break;case"STARTING":case 0:t.status=0;break;case"RUNNING":case 1:t.status=1;break;case"SUCCESS":case 2:t.status=2;break;case"ERROR":case 3:t.status=3;break}if(e.createdAt!=null&&(p.Long?(t.createdAt=p.Long.fromValue(e.createdAt)).unsigned=!1:typeof e.createdAt=="string"?t.createdAt=parseInt(e.createdAt,10):typeof e.createdAt=="number"?t.createdAt=e.createdAt:typeof e.createdAt=="object"&&(t.createdAt=new p.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber())),e.updatedAt!=null&&(p.Long?(t.updatedAt=p.Long.fromValue(e.updatedAt)).unsigned=!1:typeof e.updatedAt=="string"?t.updatedAt=parseInt(e.updatedAt,10):typeof e.updatedAt=="number"?t.updatedAt=e.updatedAt:typeof e.updatedAt=="object"&&(t.updatedAt=new p.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber())),e.updateId!=null&&(t.updateId=e.updateId|0),e.expireAfter!=null&&(t.expireAfter=e.expireAfter|0),e.cursor!=null&&(t.cursor=e.cursor|0),e.target!=null&&(t.target=e.target|0),e.payload){if(typeof e.payload!="object")throw TypeError(".ContentOperation.payload: object expected");t.payload={};for(let o=Object.keys(e.payload),i=0;i<o.length;++i)t.payload[o[i]]=String(e.payload[o[i]])}return t},r.toObject=function(e,t){t||(t={});let o={};if((t.objects||t.defaults)&&(o.payload={}),t.defaults){if(o.id="",o.status=t.enums===String?"STARTING":0,p.Long){let a=new p.Long(0,0,!1);o.createdAt=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else o.createdAt=t.longs===String?"0":0;if(p.Long){let a=new p.Long(0,0,!1);o.updatedAt=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else o.updatedAt=t.longs===String?"0":0;o.updateId=0,o.expireAfter=0,o.cursor=0,o.target=0}e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.status!=null&&e.hasOwnProperty("status")&&(o.status=t.enums===String?f.ContentOperationStatus[e.status]===void 0?e.status:f.ContentOperationStatus[e.status]:e.status),e.createdAt!=null&&e.hasOwnProperty("createdAt")&&(typeof e.createdAt=="number"?o.createdAt=t.longs===String?String(e.createdAt):e.createdAt:o.createdAt=t.longs===String?p.Long.prototype.toString.call(e.createdAt):t.longs===Number?new p.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber():e.createdAt),e.updatedAt!=null&&e.hasOwnProperty("updatedAt")&&(typeof e.updatedAt=="number"?o.updatedAt=t.longs===String?String(e.updatedAt):e.updatedAt:o.updatedAt=t.longs===String?p.Long.prototype.toString.call(e.updatedAt):t.longs===Number?new p.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber():e.updatedAt),e.updateId!=null&&e.hasOwnProperty("updateId")&&(o.updateId=e.updateId),e.expireAfter!=null&&e.hasOwnProperty("expireAfter")&&(o.expireAfter=e.expireAfter),e.cursor!=null&&e.hasOwnProperty("cursor")&&(o.cursor=e.cursor),e.target!=null&&e.hasOwnProperty("target")&&(o.target=e.target);let i;if(e.payload&&(i=Object.keys(e.payload)).length){o.payload={};for(let a=0;a<i.length;++a)o.payload[i[a]]=e.payload[i[a]]}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/ContentOperation"},r})(),by=f.DebugLog=(()=>{function r(n){if(this.updates=[],n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.updates=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=te.create()),e.updates!=null&&e.updates.length)for(let o=0;o<e.updates.length;++o)f.DebugLogUpdate.encode(e.updates[o],t.uint32(10).fork()).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.DebugLog;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.updates&&i.updates.length||(i.updates=[]),i.updates.push(f.DebugLogUpdate.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.updates!=null&&e.hasOwnProperty("updates")){if(!Array.isArray(e.updates))return"updates: array expected";for(let t=0;t<e.updates.length;++t){let o=f.DebugLogUpdate.verify(e.updates[t]);if(o)return"updates."+o}}return null},r.fromObject=function(e){if(e instanceof f.DebugLog)return e;let t=new f.DebugLog;if(e.updates){if(!Array.isArray(e.updates))throw TypeError(".DebugLog.updates: array expected");t.updates=[];for(let o=0;o<e.updates.length;++o){if(typeof e.updates[o]!="object")throw TypeError(".DebugLog.updates: object expected");t.updates[o]=f.DebugLogUpdate.fromObject(e.updates[o])}}return t},r.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.updates=[]),e.updates&&e.updates.length){o.updates=[];for(let i=0;i<e.updates.length;++i)o.updates[i]=f.DebugLogUpdate.toObject(e.updates[i],t)}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/DebugLog"},r})(),Sy=f.DebugLogUpdate=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.timestamp=p.Long?p.Long.fromBits(0,0,!1):0,r.prototype.update=p.newBuffer([]),r.prototype.origin="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(8).int64(e.timestamp),t.uint32(18).bytes(e.update),t.uint32(26).string(e.origin),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.DebugLogUpdate;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.timestamp=e.int64();break}case 2:{i.update=e.bytes();break}case 3:{i.origin=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("timestamp"))throw p.ProtocolError("missing required 'timestamp'",{instance:i});if(!i.hasOwnProperty("update"))throw p.ProtocolError("missing required 'update'",{instance:i});if(!i.hasOwnProperty("origin"))throw p.ProtocolError("missing required 'origin'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":!p.isInteger(e.timestamp)&&!(e.timestamp&&p.isInteger(e.timestamp.low)&&p.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":e.update&&typeof e.update.length=="number"||p.isString(e.update)?p.isString(e.origin)?null:"origin: string expected":"update: buffer expected"},r.fromObject=function(e){if(e instanceof f.DebugLogUpdate)return e;let t=new f.DebugLogUpdate;return e.timestamp!=null&&(p.Long?(t.timestamp=p.Long.fromValue(e.timestamp)).unsigned=!1:typeof e.timestamp=="string"?t.timestamp=parseInt(e.timestamp,10):typeof e.timestamp=="number"?t.timestamp=e.timestamp:typeof e.timestamp=="object"&&(t.timestamp=new p.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),e.update!=null&&(typeof e.update=="string"?p.base64.decode(e.update,t.update=p.newBuffer(p.base64.length(e.update)),0):e.update.length>=0&&(t.update=e.update)),e.origin!=null&&(t.origin=String(e.origin)),t},r.toObject=function(e,t){t||(t={});let o={};if(t.defaults){if(p.Long){let i=new p.Long(0,0,!1);o.timestamp=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else o.timestamp=t.longs===String?"0":0;t.bytes===String?o.update="":(o.update=[],t.bytes!==Array&&(o.update=p.newBuffer(o.update))),o.origin=""}return e.timestamp!=null&&e.hasOwnProperty("timestamp")&&(typeof e.timestamp=="number"?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?p.Long.prototype.toString.call(e.timestamp):t.longs===Number?new p.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),e.update!=null&&e.hasOwnProperty("update")&&(o.update=t.bytes===String?p.base64.encode(e.update,0,e.update.length):t.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.origin!=null&&e.hasOwnProperty("origin")&&(o.origin=e.origin),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/DebugLogUpdate"},r})(),ds=f.DocumentCompletions=(()=>{function r(n,e,t){U.rpc.Service.call(this,n,e,t)}return(r.prototype=Object.create(U.rpc.Service.prototype)).constructor=r,r.create=function(e,t,o){return new this(e,t,o)},Object.defineProperty(r.prototype.generateBlockCompletion=function n(e,t){return this.rpcCall(n,f.GenerateBlockCompletionRequest,f.GenerateBlockCompletionReply,e,t)},"name",{value:"generateBlockCompletion"}),Object.defineProperty(r.prototype.streamAICompletion=function n(e,t){return this.rpcCall(n,f.AICompletionRequest,f.AICompletionReply,e,t)},"name",{value:"streamAICompletion"}),Object.defineProperty(r.prototype.stopAICompletion=function n(e,t){return this.rpcCall(n,f.StopAICompletionRequest,f.StopAICompletionReply,e,t)},"name",{value:"stopAICompletion"}),Object.defineProperty(r.prototype.generateDiagramSuggestions=function n(e,t){return this.rpcCall(n,f.GenerateDiagramSuggestionsRequest,f.GenerateDiagramSuggestionsReply,e,t)},"name",{value:"generateDiagramSuggestions"}),Object.defineProperty(r.prototype.generateDiagram=function n(e,t){return this.rpcCall(n,f.GenerateDiagramRequest,f.GenerateDiagramReply,e,t)},"name",{value:"generateDiagram"}),r})(),wy=f.StopAICompletionRequest=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.id="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(10).string(e.id),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.StopAICompletionRequest;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":p.isString(e.id)?null:"id: string expected"},r.fromObject=function(e){if(e instanceof f.StopAICompletionRequest)return e;let t=new f.StopAICompletionRequest;return e.id!=null&&(t.id=String(e.id)),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.id=""),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/StopAICompletionRequest"},r})(),Cy=f.StopAICompletionReply=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.StopAICompletionReply;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){default:e.skipType(a&7);break}}return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":null},r.fromObject=function(e){return e instanceof f.StopAICompletionReply?e:new f.StopAICompletionReply},r.toObject=function(){return{}},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/StopAICompletionReply"},r})(),Py=f.AICompletionRequest=(()=>{function r(n){if(this.history=[],n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.input="",r.prototype.prompt="",r.prototype.id="",r.prototype.history=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=te.create()),t.uint32(10).string(e.input),t.uint32(18).string(e.prompt),t.uint32(26).string(e.id),e.history!=null&&e.history.length)for(let o=0;o<e.history.length;++o)f.AICompletionHistoryEntry.encode(e.history[o],t.uint32(34).fork()).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.AICompletionRequest;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.input=e.string();break}case 2:{i.prompt=e.string();break}case 3:{i.id=e.string();break}case 4:{i.history&&i.history.length||(i.history=[]),i.history.push(f.AICompletionHistoryEntry.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("input"))throw p.ProtocolError("missing required 'input'",{instance:i});if(!i.hasOwnProperty("prompt"))throw p.ProtocolError("missing required 'prompt'",{instance:i});if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isString(e.input))return"input: string expected";if(!p.isString(e.prompt))return"prompt: string expected";if(!p.isString(e.id))return"id: string expected";if(e.history!=null&&e.hasOwnProperty("history")){if(!Array.isArray(e.history))return"history: array expected";for(let t=0;t<e.history.length;++t){let o=f.AICompletionHistoryEntry.verify(e.history[t]);if(o)return"history."+o}}return null},r.fromObject=function(e){if(e instanceof f.AICompletionRequest)return e;let t=new f.AICompletionRequest;if(e.input!=null&&(t.input=String(e.input)),e.prompt!=null&&(t.prompt=String(e.prompt)),e.id!=null&&(t.id=String(e.id)),e.history){if(!Array.isArray(e.history))throw TypeError(".AICompletionRequest.history: array expected");t.history=[];for(let o=0;o<e.history.length;++o){if(typeof e.history[o]!="object")throw TypeError(".AICompletionRequest.history: object expected");t.history[o]=f.AICompletionHistoryEntry.fromObject(e.history[o])}}return t},r.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.history=[]),t.defaults&&(o.input="",o.prompt="",o.id=""),e.input!=null&&e.hasOwnProperty("input")&&(o.input=e.input),e.prompt!=null&&e.hasOwnProperty("prompt")&&(o.prompt=e.prompt),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.history&&e.history.length){o.history=[];for(let i=0;i<e.history.length;++i)o.history[i]=f.AICompletionHistoryEntry.toObject(e.history[i],t)}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/AICompletionRequest"},r})(),Ry=f.AICompletionReply=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.completion="",r.prototype.id="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(10).string(e.completion),t.uint32(18).string(e.id),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.AICompletionReply;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.completion=e.string();break}case 2:{i.id=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("completion"))throw p.ProtocolError("missing required 'completion'",{instance:i});if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":p.isString(e.completion)?p.isString(e.id)?null:"id: string expected":"completion: string expected"},r.fromObject=function(e){if(e instanceof f.AICompletionReply)return e;let t=new f.AICompletionReply;return e.completion!=null&&(t.completion=String(e.completion)),e.id!=null&&(t.id=String(e.id)),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.completion="",o.id=""),e.completion!=null&&e.hasOwnProperty("completion")&&(o.completion=e.completion),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/AICompletionReply"},r})(),ky=f.AICompletionHistoryEntry=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.prompt="",r.prototype.answer="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(10).string(e.prompt),t.uint32(18).string(e.answer),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.AICompletionHistoryEntry;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.prompt=e.string();break}case 2:{i.answer=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("prompt"))throw p.ProtocolError("missing required 'prompt'",{instance:i});if(!i.hasOwnProperty("answer"))throw p.ProtocolError("missing required 'answer'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":p.isString(e.prompt)?p.isString(e.answer)?null:"answer: string expected":"prompt: string expected"},r.fromObject=function(e){if(e instanceof f.AICompletionHistoryEntry)return e;let t=new f.AICompletionHistoryEntry;return e.prompt!=null&&(t.prompt=String(e.prompt)),e.answer!=null&&(t.answer=String(e.answer)),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.prompt="",o.answer=""),e.prompt!=null&&e.hasOwnProperty("prompt")&&(o.prompt=e.prompt),e.answer!=null&&e.hasOwnProperty("answer")&&(o.answer=e.answer),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/AICompletionHistoryEntry"},r})(),Iy=f.GenerateBlockCompletionRequest=(()=>{function r(n){if(this.history=[],n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.startKey="",r.prototype.endKey="",r.prototype.prompt="",r.prototype.id="",r.prototype.history=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=te.create()),t.uint32(10).string(e.startKey),t.uint32(18).string(e.endKey),t.uint32(26).string(e.prompt),t.uint32(34).string(e.id),e.history!=null&&e.history.length)for(let o=0;o<e.history.length;++o)f.AICompletionHistoryEntry.encode(e.history[o],t.uint32(42).fork()).ldelim();return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.GenerateBlockCompletionRequest;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.startKey=e.string();break}case 2:{i.endKey=e.string();break}case 3:{i.prompt=e.string();break}case 4:{i.id=e.string();break}case 5:{i.history&&i.history.length||(i.history=[]),i.history.push(f.AICompletionHistoryEntry.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("startKey"))throw p.ProtocolError("missing required 'startKey'",{instance:i});if(!i.hasOwnProperty("endKey"))throw p.ProtocolError("missing required 'endKey'",{instance:i});if(!i.hasOwnProperty("prompt"))throw p.ProtocolError("missing required 'prompt'",{instance:i});if(!i.hasOwnProperty("id"))throw p.ProtocolError("missing required 'id'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!p.isString(e.startKey))return"startKey: string expected";if(!p.isString(e.endKey))return"endKey: string expected";if(!p.isString(e.prompt))return"prompt: string expected";if(!p.isString(e.id))return"id: string expected";if(e.history!=null&&e.hasOwnProperty("history")){if(!Array.isArray(e.history))return"history: array expected";for(let t=0;t<e.history.length;++t){let o=f.AICompletionHistoryEntry.verify(e.history[t]);if(o)return"history."+o}}return null},r.fromObject=function(e){if(e instanceof f.GenerateBlockCompletionRequest)return e;let t=new f.GenerateBlockCompletionRequest;if(e.startKey!=null&&(t.startKey=String(e.startKey)),e.endKey!=null&&(t.endKey=String(e.endKey)),e.prompt!=null&&(t.prompt=String(e.prompt)),e.id!=null&&(t.id=String(e.id)),e.history){if(!Array.isArray(e.history))throw TypeError(".GenerateBlockCompletionRequest.history: array expected");t.history=[];for(let o=0;o<e.history.length;++o){if(typeof e.history[o]!="object")throw TypeError(".GenerateBlockCompletionRequest.history: object expected");t.history[o]=f.AICompletionHistoryEntry.fromObject(e.history[o])}}return t},r.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.history=[]),t.defaults&&(o.startKey="",o.endKey="",o.prompt="",o.id=""),e.startKey!=null&&e.hasOwnProperty("startKey")&&(o.startKey=e.startKey),e.endKey!=null&&e.hasOwnProperty("endKey")&&(o.endKey=e.endKey),e.prompt!=null&&e.hasOwnProperty("prompt")&&(o.prompt=e.prompt),e.id!=null&&e.hasOwnProperty("id")&&(o.id=e.id),e.history&&e.history.length){o.history=[];for(let i=0;i<e.history.length;++i)o.history[i]=f.AICompletionHistoryEntry.toObject(e.history[i],t)}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateBlockCompletionRequest"},r})(),Ty=f.GenerateBlockCompletionReply=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.GenerateBlockCompletionReply;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){default:e.skipType(a&7);break}}return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":null},r.fromObject=function(e){return e instanceof f.GenerateBlockCompletionReply?e:new f.GenerateBlockCompletionReply},r.toObject=function(){return{}},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateBlockCompletionReply"},r})(),xy=f.GenerateDiagramSuggestionsRequest=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.nodeKey="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(10).string(e.nodeKey),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.GenerateDiagramSuggestionsRequest;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.nodeKey=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("nodeKey"))throw p.ProtocolError("missing required 'nodeKey'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":p.isString(e.nodeKey)?null:"nodeKey: string expected"},r.fromObject=function(e){if(e instanceof f.GenerateDiagramSuggestionsRequest)return e;let t=new f.GenerateDiagramSuggestionsRequest;return e.nodeKey!=null&&(t.nodeKey=String(e.nodeKey)),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.nodeKey=""),e.nodeKey!=null&&e.hasOwnProperty("nodeKey")&&(o.nodeKey=e.nodeKey),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateDiagramSuggestionsRequest"},r})(),Ey=f.GenerateDiagramSuggestionsReply=(()=>{function r(n){if(this.suggestions=[],n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.suggestions=p.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=te.create()),e.suggestions!=null&&e.suggestions.length)for(let o=0;o<e.suggestions.length;++o)t.uint32(10).string(e.suggestions[o]);return t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.GenerateDiagramSuggestionsReply;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.suggestions&&i.suggestions.length||(i.suggestions=[]),i.suggestions.push(e.string());break}default:e.skipType(a&7);break}}return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.suggestions!=null&&e.hasOwnProperty("suggestions")){if(!Array.isArray(e.suggestions))return"suggestions: array expected";for(let t=0;t<e.suggestions.length;++t)if(!p.isString(e.suggestions[t]))return"suggestions: string[] expected"}return null},r.fromObject=function(e){if(e instanceof f.GenerateDiagramSuggestionsReply)return e;let t=new f.GenerateDiagramSuggestionsReply;if(e.suggestions){if(!Array.isArray(e.suggestions))throw TypeError(".GenerateDiagramSuggestionsReply.suggestions: array expected");t.suggestions=[];for(let o=0;o<e.suggestions.length;++o)t.suggestions[o]=String(e.suggestions[o])}return t},r.toObject=function(e,t){t||(t={});let o={};if((t.arrays||t.defaults)&&(o.suggestions=[]),e.suggestions&&e.suggestions.length){o.suggestions=[];for(let i=0;i<e.suggestions.length;++i)o.suggestions[i]=e.suggestions[i]}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateDiagramSuggestionsReply"},r})(),Ay=f.GenerateDiagramRequest=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.nodeKey="",r.prototype.prompt="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(10).string(e.nodeKey),t.uint32(18).string(e.prompt),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.GenerateDiagramRequest;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.nodeKey=e.string();break}case 2:{i.prompt=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("nodeKey"))throw p.ProtocolError("missing required 'nodeKey'",{instance:i});if(!i.hasOwnProperty("prompt"))throw p.ProtocolError("missing required 'prompt'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":p.isString(e.nodeKey)?p.isString(e.prompt)?null:"prompt: string expected":"nodeKey: string expected"},r.fromObject=function(e){if(e instanceof f.GenerateDiagramRequest)return e;let t=new f.GenerateDiagramRequest;return e.nodeKey!=null&&(t.nodeKey=String(e.nodeKey)),e.prompt!=null&&(t.prompt=String(e.prompt)),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.nodeKey="",o.prompt=""),e.nodeKey!=null&&e.hasOwnProperty("nodeKey")&&(o.nodeKey=e.nodeKey),e.prompt!=null&&e.hasOwnProperty("prompt")&&(o.prompt=e.prompt),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateDiagramRequest"},r})(),Oy=f.GenerateDiagramReply=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.mermaid="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),e.mermaid!=null&&Object.hasOwnProperty.call(e,"mermaid")&&t.uint32(10).string(e.mermaid),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.GenerateDiagramReply;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.mermaid=e.string();break}default:e.skipType(a&7);break}}return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":e.mermaid!=null&&e.hasOwnProperty("mermaid")&&!p.isString(e.mermaid)?"mermaid: string expected":null},r.fromObject=function(e){if(e instanceof f.GenerateDiagramReply)return e;let t=new f.GenerateDiagramReply;return e.mermaid!=null&&(t.mermaid=String(e.mermaid)),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.mermaid=""),e.mermaid!=null&&e.hasOwnProperty("mermaid")&&(o.mermaid=e.mermaid),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateDiagramReply"},r})(),Dy=f.BlockRichTextCompletion=(()=>{function r(n){if(n)for(let e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return r.prototype.summary="",r.prototype.markdown="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=te.create()),t.uint32(10).string(e.summary),t.uint32(18).string(e.markdown),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,t){e instanceof R||(e=R.create(e));let o=t===void 0?e.len:e.pos+t,i=new f.BlockRichTextCompletion;for(;e.pos<o;){let a=e.uint32();switch(a>>>3){case 1:{i.summary=e.string();break}case 2:{i.markdown=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("summary"))throw p.ProtocolError("missing required 'summary'",{instance:i});if(!i.hasOwnProperty("markdown"))throw p.ProtocolError("missing required 'markdown'",{instance:i});return i},r.decodeDelimited=function(e){return e instanceof R||(e=new R(e)),this.decode(e,e.uint32())},r.verify=function(e){return typeof e!="object"||e===null?"object expected":p.isString(e.summary)?p.isString(e.markdown)?null:"markdown: string expected":"summary: string expected"},r.fromObject=function(e){if(e instanceof f.BlockRichTextCompletion)return e;let t=new f.BlockRichTextCompletion;return e.summary!=null&&(t.summary=String(e.summary)),e.markdown!=null&&(t.markdown=String(e.markdown)),t},r.toObject=function(e,t){t||(t={});let o={};return t.defaults&&(o.summary="",o.markdown=""),e.summary!=null&&e.hasOwnProperty("summary")&&(o.summary=e.summary),e.markdown!=null&&e.hasOwnProperty("markdown")&&(o.markdown=e.markdown),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,U.util.toJSONOptions)},r.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BlockRichTextCompletion"},r})(),_y=f.ContentOperationStatus=(()=>{let r={},n=Object.create(r);return n[r[0]="STARTING"]=0,n[r[1]="RUNNING"]=1,n[r[2]="SUCCESS"]=2,n[r[3]="ERROR"]=3,n})(),It=f.UpdateFormatVersion=(()=>{let r={},n=Object.create(r);return n[r[0]="UNSPECIFIED"]=0,n[r[1]="V1"]=1,n[r[2]="V2"]=2,n})();s();var My=.9*1024*1024;function Tp(r,n=0){let e=n;return{newMessageID:()=>(e+=1,e),write:t=>{if(t.init){let o=t.init;ps(o.update,(i,a,c)=>{r(hi({init:{...o,index:a,count:c,update:i}}),o.id)})}else if(t.update){let o=t.update;ps(o.update,(i,a,c)=>{r(hi({update:{...o,index:a,count:c,update:i}}),o.id)})}else if(t.promptInit){let o=t.promptInit;ps(o.stateVector,(i,a,c)=>{r(hi({promptInit:{...o,index:a,count:c,stateVector:i}}),o.id)})}else r(hi(t),t[Object.keys(t)[0]].id)}}}function hi(r){let n=sn.verify(r);if(n)throw new Error(`ProtoBufObject message is not valid: ${n}`);let e=sn.create(r);return sn.encode(e).finish()}function ps(r,n){Jd(r,My).forEach((t,o,i)=>{n(t,o,i.length)})}s();function xp(r){let n=new Map,e=(t,o)=>{if(!t.id||t.index===void 0||t.count===void 0)return o(t);let i=n.get(t.id)||[];if(i.push(t),n.set(t.id,i),i.length===t.count){let a=Gd(i.sort((l,u)=>(l.index||0)-(u.index||0)).map(l=>"update"in l?l.update:l.stateVector)),c=o({...t,..."update"in t?{update:a}:{stateVector:a}});return n.delete(t.id),c}};return t=>Ly(t,{promptInit:o=>e(o,i=>r.promptInit(i)),init:o=>e(o,i=>r.init(i)),update:o=>e(o,i=>r.update(i)),updatePresence:r.updatePresence,broadcastOperation:r.broadcastOperation,broadcastPresences:r.broadcastPresences,ack:r.ack,rpcReply:r.rpcReply,rpcRequest:r.rpcRequest})}function Ly(r,n){let e=sn.decode(r),t=sn.toObject(e);if(t.promptInit)return n.promptInit(t.promptInit);if(t.init)return n.init(t.init);if(t.update)return n.update(t.update);if(t.updatePresence)return n.updatePresence(t.updatePresence);if(t.broadcastOperation)return n.broadcastOperation(t.broadcastOperation);if(t.broadcastPresences)return n.broadcastPresences(t.broadcastPresences);if(t.ack)return n.ack(t.ack);if(t.rpcRequest)return n.rpcRequest(t.rpcRequest);if(t.rpcReply)return n.rpcReply(t.rpcReply)}s();var Hy={DocumentCompletions:ds},fs=G("hive:datasync:rpc");function Ep(r,n,e={}){let{timeout:t=3*60*1e3}=e,o=new Map,i=new Hy[r]((a,c,l)=>{let u=n.newMessageID(),d={id:u,service:r,method:a.name,payload:c},m=a.name.startsWith("stream"),g=!1,h=setTimeout(()=>{fs.warning(`RPC request ${r}.${a.name} timed out (${t/1e3}s)`),l(new Error(`RPC request ${r}.${a.name} timed out`)),P()},t);function P(){g=!0,o.delete(u),clearTimeout(h)}let S=(I,C)=>{if(!g){if(I){l(I),P();return}if(m&&C!==null){l(null,C);return}l(null,C),P()}};o.set(u,S),fs.info(`sending RPC request ${r}.${a.name}: ${u}`),n.write({rpcRequest:d})},!1,!1);return{onReplyMessage:a=>{let c=o.get(a.replyTo);if(!c)return!1;if(fs.info(`received RPC reply for ${a.replyTo}`),a.error){let l=lt.fromStatusCode(a.error.code,a.error.message);return c(l),!0}return c(null,a.payload??null),!0},service:i}}s();var VR=G("datasync:storage");function ms(r,n,e,t){switch(n){case null:case void 0:case It.UNSPECIFIED:case It.V1:{let o=Array.isArray(e)?Ul(e):e;Dl(r,o,t);break}case It.V2:{let o=Array.isArray(e)?Wo(e):e;Vo(r,o,t);break}default:re(n)}}s();var Op=nt(r=>{let n=r.getAttribute("data");return vl.create({key:r.getAttribute("key"),nodes:gi(r),data:n?hs(n):void 0})}),gi=nt(r=>$n.create(r.toArray().map(n=>{if(n instanceof ze)return Dp(n);if(n instanceof ae)return Ny(n);throw new Error(`Unknown node type: ${n}`)}))),Ny=nt(r=>{let e=r.toDelta().map(t=>fl.create({text:t.insert,marks:By(t.attributes||{})}));return ml.create({key:r.getAttribute("key"),leaves:$n.create(e)})}),Dp=nt(r=>{let n=r.getAttribute("key");switch(r.nodeName){case"block":{let e=r,t=e.getAttribute("data"),o=e.getAttribute("fragments");return hl.create({key:n,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:t?hs(t):void 0,nodes:gi(r),fragments:o?Ap(o):void 0})}case"inline":{let e=r,t=e.getAttribute("data"),o=e.getAttribute("fragments");return yl.create({key:n,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:t?hs(t):void 0,nodes:gi(r),fragments:o?Ap(o):void 0})}case"fragment":{let e=r;return gl.create({key:n,type:e.getAttribute("type"),fragment:e.getAttribute("fragment"),nodes:gi(r)})}default:throw new Error(`Unknown object type: ${r.nodeName}`)}}),Ap=nt(r=>dl.create(r.toArray().map(n=>{if(!(n instanceof ze))throw new Error(`Unknown node type: ${n}`);let e=Dp(n);return[e.fragmentKey,e]})));function By(r){return Uo.create(Object.keys(r).map(n=>pl.create({type:n,data:r[n]})))}var hs=nt(r=>Xn.create(r.toJSON()));s();function Tn(r){let n=r.object;switch(n){case"block":return Vy(r);case"inline":return Fy(r);case"text":return Ky(r);default:throw new Error(`Unknown node type: ${n}`)}}function Uy(r){return r.toArray().map(n=>Tn(n))}function gs(r,n){r.delete(0,r.length),r.insert(0,Uy(n))}function Vy(r,n=new ze(r.object)){return n.setAttribute("key",r.key),r.isVoid?n.setAttribute("isVoid",r.isVoid):n.removeAttribute("isVoid"),n.setAttribute("type",r.type),vi(n,r.data),gs(n,r.nodes),_p(n,r.fragments),n}function Fy(r,n=new ze(r.object)){return n.setAttribute("key",r.key),r.isVoid?n.setAttribute("isVoid",r.isVoid):n.removeAttribute("isVoid"),n.setAttribute("type",r.type),vi(n,r.data),gs(n,r.nodes),_p(n,r.fragments),n}function Wy(r,n=new zr){return n.delete(0,n.length),r.forEach(e=>{n.push([ys(e)])}),n}function _p(r,n){if(n.size===0){r.removeAttribute("fragments");return}let e=r.getAttribute("fragments");e||(e=new zr,r.setAttribute("fragments",e)),Wy(n,e)}function ys(r,n=new ze(r.object)){return n.setAttribute("key",r.key),r.type&&n.setAttribute("type",r.type),r.fragment&&n.setAttribute("fragment",r.fragment),gs(n,r.nodes),n}function Ky(r,n=new ae){let e=0;return n.setAttribute("key",r.key),n.delete(0,n.length),r.leaves.forEach(t=>{n.insert(e,t.text,yi(t.marks)),e+=t.text.length}),n}function yi(r){if(r.size===0)return{};let n={};return r.forEach(e=>{n[e.type]=e.data.toObject()}),n}function vi(r,n){if(n.size===0){r.removeAttribute("data");return}let e=r.getAttribute("data");e||(e=new Pt,r.setAttribute("data",e)),Yy(n,e)}function Yy(r,n){return n.clear(),r.forEach((e,t)=>{n.set(t,ur(e))}),n}function ur(r){if(r==null||typeof r=="number"||typeof r=="string"||typeof r=="boolean")return r;if(Array.isArray(r)){let n=new Yr;return r.forEach(e=>{n.push([ur(e)])}),n}else{let n=new Pt;return Object.keys(r).forEach(e=>{n.set(e,ur(r[e]))}),n}}s();s();function _e(r,n){let e=r;for(let t=0;t<n.length;t++){let o=n[t];if(e instanceof ae)throw new Error("Invalid path, expected a node with descendants");if(o<e.length)e=e.get(o);else{let i=e.getAttribute("fragments");i&&(e=i.get(o-e.length))}if(!e)throw new Error("Invalid path, expected a node")}return e}function xn(r,n){let e=n.slice(0,-1),t=_e(r,e);if(t instanceof ae)throw new Error("Invalid path, expected a node with descendants");let o=n[n.length-1];return{parent:t,index:o}}function eo(r,n){let e=r.getAttribute("data");e||(e=new Pt,r.setAttribute("data",e));let t=e;for(let o=0;o<n.length;o++){let i=n[o],a=t,c=a.get(i);if(c===void 0){let[l,u]=zy(n.slice(o+1));return a.set(i,l),u}else{if(!(c instanceof Pt))throw new Error(`Invalid data path (${n.slice(0,o+1).join(".")}), expected a map`);t=c}}return t}function zy(r){let n=new Pt,e=n;for(let t=0;t<r.length;t++){let o=new Pt;e.set(r[t],o),e=o}return[n,e]}function vs(r,n){r.operations.forEach(([e,t,o])=>{qy(n,e,t.document,o.document)})}function qy(r,n,e,t){switch(n.type){case"insert_text":Jy(r,e,n);break;case"remove_text":Gy(r,e,n);break;case"add_mark":jy(r,n);break;case"remove_mark":$y(r,n);break;case"remove_node":Xy(r,n);break;case"insert_node":Qy(r,n);break;case"set_node":nv(r,n);break;case"move_node":Zy(r,e,t,n);break;case"split_node":ev(r,e,n);break;case"merge_node":tv(r,e,n);break;case"insert_fragment":rv(r,n);break;case"remove_fragment":ov(r,n);break;case"set_data":iv(r,n);break;case"remove_data":av(r,n);break;case"insert_array_data":sv(r,n);break;case"remove_array_data":cv(r,n);break;case"set_selection":break;default:throw new Error(`Unsupported operation type: ${n.type}`)}}function Jy(r,n,e){let t=_e(r,[...e.path]);if(!(t instanceof ae))throw new Error("Invalid operation path, expected a text node");t.insert(e.offset,e.text,yi(e.marks))}function Gy(r,n,e){let t=_e(r,[...e.path]);if(!(t instanceof ae))throw new Error("Invalid operation path, expected a text node");t.delete(e.offset,e.text.length)}function jy(r,n){let e=_e(r,[...n.path]);if(!(e instanceof ae))throw new Error("Invalid operation path, expected a text node");e.format(n.offset,n.length,yi(Uo.create([n.mark])))}function $y(r,n){let e=_e(r,[...n.path]);if(!(e instanceof ae))throw new Error("Invalid operation path, expected a text node");e.format(n.offset,n.length,{[n.mark.type]:null})}function Xy(r,n){let{parent:e,index:t}=xn(r,[...n.path]);e.delete(t)}function Qy(r,n){let{parent:e,index:t}=xn(r,[...n.path]);e.insert(t,[Tn(n.node)])}function Zy(r,n,e,t){let{parent:o,index:i}=xn(r,[...t.path]),{parent:a,index:c}=xn(r,[...t.newPath]),l=e.assertPath(t.path),u=n.assertNode(l.key),d=Tn(u);o.delete(i),a.insert(c,[d])}function ev(r,n,e){let{parent:t,index:o}=xn(r,[...e.path]),i=n.assertNode(t.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for split_node");let a=i.nodes.get(o);if(!a)throw new Error("Node not found in parent nodes");let c=i.nodes.get(o+1);if(!c)throw new Error("New node not found in parent nodes");t.delete(o),t.insert(o,[Tn(a),Tn(c)])}function tv(r,n,e){let{parent:t,index:o}=xn(r,[...e.path]),i=n.assertNode(t.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for merge_node");let a=i.nodes.get(o-1);if(!a)throw new Error("Merged node not found in parent nodes");t.delete(o-1,2),t.insert(o-1,[Tn(a)])}function nv(r,n){let e=_e(r,[...n.path]);if(typeof n.properties!="string"){if("key"in n.properties&&n.properties.key!==void 0&&e.setAttribute("key",n.properties.key),"type"in n.properties&&n.properties.type!==void 0&&e.setAttribute("type",n.properties.type),"isVoid"in n.properties&&n.properties.isVoid!==void 0){if(e instanceof ae)throw new Error("Should not set isVoid on a text");e.setAttribute("isVoid",n.properties.isVoid)}if("data"in n.properties&&n.properties.data!==void 0){if(e instanceof ae)throw new Error("Should not set data on a text");vi(e,Xn.create(n.properties.data))}}}function rv(r,n){let e=_e(r,[...n.path]);if(e instanceof ae)throw new Error("Expect a fragment node");let t=e,o=n.fragmentPath[n.fragmentPath.length-1]-1,i=ys(n.node),a=t.getAttribute("fragments");a||(a=new zr,t.setAttribute("fragments",a)),a.insert(o,[i])}function ov(r,n){let e=_e(r,[...n.path]);if(e instanceof ae)throw new Error("Expect a fragment node");let t=e,o=n.fragmentPath[n.fragmentPath.length-1]-1;t.getAttribute("fragments").delete(o)}function iv(r,n){let e=_e(r,[...n.path]);if(e instanceof ae)throw new Error("Should not set data on a text");let t=ur(n.data),o=eo(e,n.dataPath.slice(0,-1)),i=n.dataPath[n.dataPath.length-1];o.set(i,t)}function av(r,n){let e=_e(r,[...n.path]);if(e instanceof ae)throw new Error("Should not set data on a text");let t=eo(e,n.dataPath.slice(0,-1)),o=n.dataPath[n.dataPath.length-1];t.delete(o)}function sv(r,n){let e=_e(r,[...n.path]);if(e instanceof ae)throw new Error("Should not set data on a text");let t=eo(e,n.dataPath.slice(0,-1)),o=n.dataPath[n.dataPath.length-1],i=t.get(o);if(!i||!(i instanceof Yr))return;let a=ur(n.data);i.insert(n.dataIndex,[a])}function cv(r,n){let e=_e(r,[...n.path]);if(e instanceof ae)throw new Error("Should not set data on a text");let t=eo(e,n.dataPath.slice(0,-1)),o=n.dataPath[n.dataPath.length-1],i=t.get(o);if(!i||!(i instanceof Yr))return;let a;for(;(a=i.toArray().findIndex(c=>c===n.data))!==-1;)i.delete(a)}s();function dr(r){return r.get("data",ze)}s();function Hp(r,n,e){let t=dr(n);return Ga.isBlockRange(e)?{anchor:e.anchorBlock?Lp(t,r,e.anchorBlock):void 0,focus:e.focusBlock?Lp(t,r,e.focusBlock):void 0}:{anchor:e.anchorKey?Mp(t,r,e.anchorKey,e.anchorOffset):void 0,focus:e.focusKey?Mp(t,r,e.focusKey,e.focusOffset):void 0}}function Np(r,n){if(!(!n.anchor||!n.focus)){if(n.anchor.type instanceof ae){if(!(n.focus.type instanceof ae))return;let e=n.anchor.type.getAttribute("key"),t=n.focus.type.getAttribute("key");return Wr.create({anchorKey:e,anchorOffset:n.anchor.index,focusKey:t,focusOffset:n.focus.index}).normalize(r)}if(n.anchor.type instanceof ze){if(!(n.focus.type instanceof ze))return;let e=n.anchor.type.getAttribute("key"),t=n.focus.type.getAttribute("key"),o=r.getDescendant(e),i=r.getDescendant(t);if(!o||!i||!o.isBlock()||!i.isBlock())return;let a=o.nodes.get(n.anchor.index),c=i.nodes.get(n.focus.index);return!a||!c?void 0:Ga.create({anchorBlock:a.key,focusBlock:c?.key}).normalize(r)}}}function Mp(r,n,e,t){let o=n.getPath(e);return o?{type:_e(r,o),index:t,assoc:0}:void 0}function Lp(r,n,e){let t=n.getPath(e);return t?{type:_e(r,t.slice(0,-1)),index:t[t.length-1],assoc:0}:void 0}s();var lv=G("hive-core:normalizeYDocument");function Bp(r){let n=new Set,e=new Set;return Up(r,n,e),e.size>0&&lv.warning(`Found ${e.size} duplicated keys in Y document. This is a bug in Hive.`),e.size}function Up(r,n,e){Vp(r,n,e);let t=r.getAttribute("fragments");t&&uv(t,n,e)}function uv(r,n,e){Vp(r,n,e)}function Vp(r,n,e){let t=0;r.forEach((o,i)=>{let a=o.getAttribute("key");if(n.has(a)){e.add(a),Al(r),r.delete(i-t),t++;return}n.add(a),!(o instanceof ae)&&Up(o,n,e)})}s();var Fp=w(Qg());function bs(r,n){Ss(r.nodes,n)}function Ss(r,n){if(r.size!==n.length)throw new Me(`Nodes size mismatch: ${r.size} !== ${n.length}`);r.forEach((e,t)=>{let o=n.get(t);e.object==="inline"?pv(e,o):e.object==="block"?dv(e,o):fv(e,o)})}function dv(r,n){if(r.key!==n.getAttribute("key"))throw new Me(`Block key mismatch: ${r.key} !== ${n.getAttribute("key")}`);if(r.type!==n.getAttribute("type"))throw new Me(`Block type mismatch: ${r.type} !== ${n.getAttribute("type")}`);Wp(r.data,n.getAttribute("data")),Ss(r.nodes,n)}function pv(r,n){if(r.key!==n.getAttribute("key"))throw new Me(`Inline key mismatch: ${r.key} !== ${n.getAttribute("key")}`);if(r.type!==n.getAttribute("type"))throw new Me(`Inline type mismatch: ${r.type} !== ${n.getAttribute("type")}`);if(r.nodes.size!==n.length)throw new Me(`Inline nodes size mismatch: ${r.nodes.size} !== ${n.length}`);Wp(r.data,n.getAttribute("data")),Ss(r.nodes,n)}function fv(r,n){if(r.key!==n.getAttribute("key"))throw new Me(`Text key mismatch: ${r.key} !== ${n.getAttribute("key")}`)}function Wp(r,n){if(!(r.size===0&&n===void 0)){if(!n)throw new Me(`Data mismatch: Slate data size is ${r.size} but yData is undefined`);if(r.size!==n.size)throw new Me(`Data size mismatch ${r.size} !== ${n.size}`);r.forEach((e,t)=>{let o=ke(n.get(t));if(!(0,Fp.default)(e,o))throw new Me(`Data value ${t} mismatch`,JSON.stringify(e),JSON.stringify(o))})}}var Me=class extends Error{constructor(e,t,o){super(`YDocumentCheckFail: ${e}`);this.slateValue=t,this.yValue=o}};s();s();s();s();s();s();s();var Ie=crypto;var Wt=new TextEncoder,Xe=new TextDecoder,tI=2**32;var Kp=r=>{let n=atob(r),e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e},ln=r=>{let n=r;n instanceof Uint8Array&&(n=Xe.decode(n)),n=n.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Kp(n)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};s();s();s();var bi=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(n){var e;super(n),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(e=Error.captureStackTrace)===null||e===void 0||e.call(Error,this,this.constructor)}};var qe=class extends bi{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};s();s();var Si=Ie.getRandomValues.bind(Ie);s();s();s();s();s();s();s();s();function Sv(r){return typeof r=="object"&&r!==null}function Ue(r){if(!Sv(r)||Object.prototype.toString.call(r)!=="[object Object]")return!1;if(Object.getPrototypeOf(r)===null)return!0;let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();var Mv=Symbol();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();var Ps=ln;s();function Rs(r){if(typeof r!="string")throw new qe("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:e}=r.split(".");if(e===5)throw new qe("Only JWTs using Compact JWS serialization can be decoded");if(e!==3)throw new qe("Invalid JWT");if(!n)throw new qe("JWTs must contain a payload");let t;try{t=Ps(n)}catch{throw new qe("Failed to parse the base64url encoded payload")}let o;try{o=JSON.parse(Xe.decode(t))}catch{throw new qe("Failed to parse the decoded payload as JSON")}if(!Ue(o))throw new qe("Invalid JWT Claims Set");return o}s();s();s();s();function ef(r){let n=Rs(r);return{expiration:n.exp?n.exp*1e3:Date.now()+6*60*60*1e3,payload:{userId:n.userId,content:n.content}}}s();var D_=["read","write-branch","write","admin"];function tf(r,n){let e=r in n.content?n.content[r]:void 0;if(e)return e;let t=ks(r,Object.keys(n.content));return t?n.content[t]:null}function ks(r,n){let e;for(let t of n)jv(t,r)&&(e=!e||t.length>e.length?t:e);return e}function Pi(r){return r.endsWith("*")}function jv(r,n){if(!Pi(r))return!1;let e=r.replace(/\*$/,".*");return new RegExp(`^${e}$`).test(n)}s();var vf=w(Vr(),1),bf=w(af(),1);s();var gf=w(Vr(),1),yf=w(hf(),1);var ot=G("hive:socket");var Ri=class{constructor(n){this.state="closed";this.destroyed=!1;this.openBackoffDelay=1e3;this.pendingMessages=[];this.events=new gf.EventEmitter;this.getSocketURL=n}async open(){if(this.assertNotDestroyed(),this.webSocket)throw new Error("WebSocket already opened");this.clearScheduledReconnection();let n=await this.getSocketURL();this.setState("connecting");let e=!1;return new Promise(t=>{ot.info("Opening WebSocket:",n);let o=new yf.default.w3cwebsocket(n);this.webSocket=o;try{o.binaryType="arraybuffer"}catch{}o.onopen=()=>{if(this.destroyed){o.close();return}ot.warning("WebSocket opened"),this.setState("open"),this.sendPendingMessages(),t()},o.onclose=i=>{if(e){let c=hb(i);ot.error("WebSocket closed with error:",i.code,c),i.code!==1006&&Ur(new Error(`HiveSocket error [${i.code}]: ${c}`))}if(this.destroyed)return;let a=this.state;this.close("closed"),a==="connecting"&&ot.error("Websocket closed before initial connection",i),a==="open"&&(ot.warning("WebSocket unexpectedly closed, reconnecting:",i.code,i.reason),this.scheduleReconnection())},o.onerror=i=>{if(e=!0,this.destroyed)return;let a=this.state;this.close("errored"),a==="connecting"&&ot.error("Websocket error with initial connection",i),ot.error("WebSocket error, reconnecting:",i),this.scheduleReconnection()},o.onmessage=i=>{if(this.destroyed){o.close();return}let a=i.data;a instanceof ArrayBuffer&&this.events.emit("message",new Uint8Array(a))}})}close(n="closed"){this.assertNotDestroyed(),this.setState(n),this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0),this.webSocket&&(ot.info("Closing WebSocket"),this.webSocket.close(),this.webSocket=void 0)}destroy(){this.close(),this.events.removeAllListeners(),this.destroyed=!0}scheduleReconnection(){this.openBackoffTimer||(this.webSocket&&this.close(),ot.info("Scheduling reconnection in",this.openBackoffDelay,"ms"),this.openBackoffTimer=setTimeout(()=>{this.open().catch(n=>{if(this.destroyed)throw n;this.close("errored"),ot.error("Failed to reopen socket",n),ot.error("Retrying..."),this.scheduleReconnection()}),this.openBackoffDelay=Math.min(this.openBackoffDelay*2,3e4)},this.openBackoffDelay))}async forceScheduledReconnection(){if(!this.openBackoffTimer)throw new Error("No scheduled reconnection");await this.open()}clearScheduledReconnection(){this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0)}listen(n,e){return this.assertNotDestroyed(),this.events.addListener(n,e),()=>{this.events.removeListener(n,e)}}send(n){if(this.assertNotDestroyed(),this.state!=="open"||!this.webSocket){this.pendingMessages.push(n);return}this.webSocket.send(n)}sendPendingMessages(){let n=this.webSocket;this.state!=="open"||!n||(this.pendingMessages.forEach(e=>n.send(e)),this.pendingMessages=[])}setState(n){this.state!==n&&(ot.info("socket changing state from",this.state,"to",n),this.state=n,this.events.emit("state",n))}assertNotDestroyed(){if(this.destroyed)throw new Error("socket is destroyed")}};function hb(r){return r.code===1e3?"Normal closure, meaning that the purpose for which the connection was established has been fulfilled.":r.code===1001?'An endpoint is "going away", such as a server going down or a browser having navigated away from a page.':r.code===1002?"An endpoint is terminating the connection due to a protocol error":r.code===1003?"An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).":r.code===1004?"Reserved. The specific meaning might be defined in the future.":r.code===1005?"No status code was actually present.":r.code===1006?"The connection was closed abnormally, e.g., without sending or receiving a Close control frame":r.code===1007?"An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [https://www.rfc-editor.org/rfc/rfc3629] data within a text message).":r.code===1008?'An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.':r.code===1009?"An endpoint is terminating the connection because it has received a message that is too big for it to process.":r.code===1010?`An endpoint (client) is terminating the connection because it has expected the server to negotiate one or more extension, but the server didn't return them in the response message of the WebSocket handshake. <br /> Specifically, the extensions that are needed are: ${r.reason}`:r.code===1011?"A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.":r.code===1015?"The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).":"Unknown reason"}var ye=G("hive:datasync");var fr=class{constructor(n,e,t={}){this.state="closed";this.operation=null;this.clientId=null;this.socket=null;this.encoder=null;this.currentPresence=null;this.beforeTransactionPresence=null;this.pendingMessages=new Set;this.pendingMessagesResolves=[];this.destroyed=!1;this.events=new vf.EventEmitter;this.batchUpdates=[];this.rpcClients=[];this.updateLog=[];let{YType:o=Pt,readOnly:i=!1}=t;if(typeof globalThis.window>"u")throw new Error("HiveDataSyncClient can only be used in the browser, or in node process when running tests");this.client=n,this.doc=new Ol({guid:e}),this.presences=[],this.YType=o,this.#e=i;let a=this.doc.get("data",o);this.undoManager=new Bl(a,{trackedOrigins:new Set(["local"])}),this.undoManager.on("stack-item-added",c=>{c.stackItem.meta.set("positionsBefore",this.beforeTransactionPresence?.positions),c.stackItem.meta.set("positions",this.currentPresence?.positions)}),this.undoManager.on("stack-item-updated",c=>{c.stackItem.meta.set("positions",this.currentPresence?.positions)}),this.undoManager.on("stack-item-popped",c=>{let l=c.type==="undo"?this.undoManager.redoStack:this.undoManager.undoStack,u=l[l.length-1];u&&(u.meta.set("positions",c.stackItem.meta.get("positionsBefore")),u.meta.set("positionsBefore",c.stackItem.meta.get("positions")));let d=c.stackItem.meta.get("positionsBefore");d&&this.events.emit("restorePositions",d)}),this.doc.on("updateV2",(c,l)=>{this.pushUpdateToLog(c,l),l!=="remote"&&(this.dangerouslyPaused?this.dangerouslyPaused.push(c):this.batchUpdate(c)),ye.info("call update listeners"),this.events.emit("update",l)}),this.doc.on("sync",()=>{this.doc.isSynced&&ye.info(`doc "${this.doc.guid}" is synced`),this.updateState()})}#e;updateState(){let n="closed";if(this.socket)switch(this.socket.state){case"connecting":n="connecting";break;case"open":this.doc.isSynced?n="open":n="connecting";break;case"errored":n="errored";break}n!==this.state&&(this.state=n,this.events.emit("state",n))}get presence(){return this.currentPresence||null}get readOnly(){return this.#e??!1}setReadOnly(n){this.readOnly&&!n?this.sendPromptInit():!this.readOnly&&n&&this.flushBatchUpdates(),this.#e=n}get clock(){let n=this.doc.get("data",this.YType);return El(n)}open(n,e,t,o={}){if(this.assertNotDestroyed(),this.socket)switch(this.socket.state){case"open":case"connecting":return this.doc.isLoaded?void 0:this.doc.whenLoaded;case"errored":return Promise.reject(new Error("Connection failed to establish with the server"));case"closed":{let u=this.socket;this.socket=null,u.destroy();break}default:re(this.socket.state)}ye.info("opening datasync socket",e,t,o);let i=this.client.getSocket(n,e,t,o);this.socket=i;let a=xp({promptInit:u=>{this.sendInit(u.stateVector)},init:({update:u,version:d})=>{ms(this.doc,d,u,"remote"),this.doc.emit("sync",[!0])},update:({id:u,update:d,version:m})=>{ye.info(`received update ${u} from client (size: ${d.byteLength})`),ms(this.doc,m,d,"remote")},updatePresence:()=>{},broadcastOperation:u=>{this.operation={...u.operation,payload:u.operation.payload||{},createdAt:Number(u.operation.createdAt),updatedAt:Number(u.operation.updatedAt)},this.events.emit("operation",this.operation)},broadcastPresences:u=>{ye.info("received broadcast presences message");let d=this.clientId;this.clientId=u.selfClientId,d!==u.selfClientId&&(ye.info("client id changed to",u.selfClientId),this.events.emit("clientId",u.selfClientId)),this.presences=Object.values(u.presences||{}).map(m=>({clientId:m.clientId,joinTimestamp:Number(m.joinTimestamp),updateTimestamp:Number(m.updateTimestamp),data:m.data||{},positions:Object.fromEntries(Object.entries(m.positions||{}).map(([g,h])=>[g,Hl(h)]))})).sort((m,g)=>m.joinTimestamp-g.joinTimestamp),this.events.emit("presences")},ack:u=>{this.ackMessage(u.message)},rpcRequest:u=>{},rpcReply:u=>{for(let d of this.rpcClients)if(d.onReplyMessage(u))return}});this.encoder=Tp((u,d)=>{this.pendingMessages.add(d),i.send(u)}),i.listen("state",u=>{this.updateState(),u==="open"?(this.sendPromptInit(),this.sendPresence()):this.doc.emit("sync",[!1])}),i.listen("message",u=>{Promise.resolve(a(u)).catch(d=>{ye.error("failed to decode message",d),Ur(d)})});let c=new Nt(`hive:datasync:open:${e}`);if(c.setLabels(t),c.wrapPromise(i.open()).catch(u=>{ye.error("failed to open datasync socket",u),Ur(u)}),this.doc.isLoaded){ye.info(`doc "${this.doc.guid}" is already loaded`);return}ye.info(`waiting for doc "${this.doc.guid}" to be loaded`);let l=new Nt(`hive:datasync:sync:${e}`);return l.setLabels(t),l.wrapPromise(this.doc.whenLoaded.then(()=>{ye.info(`doc "${this.doc.guid}" is loaded`)}))}close(){if(this.assertNotDestroyed(),!this.socket){ye.info("closing datasync, but socket is already closed");return}ye.info("closing datasync socket"),this.socket.destroy(),this.socket=null,this.encoder=null}destroy(){this.close(),this.batchDebounceFlush?.cancel(),this.undoManager.destroy(),this.doc.destroy(),this.events.removeAllListeners(),this.destroyed=!0}listen(n,e){return this.assertNotDestroyed(),this.events.addListener(n,e),()=>{this.events.removeListener(n,e)}}waitForSync(){if(this.assertNotDestroyed(),this.pendingMessages.size!==0)return ye.info("waiting for sync, pending messages count is",this.pendingMessages.size),new Promise(n=>{this.pendingMessagesResolves.push(n)})}transact(n){return this.assertNotDestroyed(),ye.info("start transaction on document"),this.beforeTransactionPresence=this.currentPresence,this.doc.transact(()=>n(this.doc),"local")}setPresence(n){this.assertNotDestroyed(),ye.info("set presence",n),this.currentPresence={data:n.data||this.currentPresence?.data||{},positions:Object.fromEntries(Object.entries(n.positions||{}).map(([e,t])=>t?[e,Ml(t.type,t.index,t.assoc)]:null).filter(Jn))},this.sendPresence()}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}stopCapturing(){this.undoManager.stopCapturing()}hasBatchingEnabled(){return!!this.batchDebounceFlush}hasBatchedUpdates(){return this.batchUpdates.length>0}resetBatchingInterval(n,e=n*5){n?(this.batchDebounceFlush?.cancel(),this.batchDebounceFlush=(0,bf.default)(()=>{this.flushBatchUpdates()},n,{maxWait:e})):(this.flushBatchUpdates(),this.batchDebounceFlush=void 0)}disableBatching(){this.resetBatchingInterval(0)}flushBatchUpdates(){if(this.readOnly||(this.batchDebounceFlush?.cancel(),this.batchUpdates.length===0))return;let n=this.batchUpdates;this.batchUpdates=[];let e=Wo(n);this.sendUpdate(e)}sendPresence(){!this.encoder||!this.currentPresence||(ye.info("sending presence to server"),this.encoder.write({updatePresence:{id:this.encoder.newMessageID(),data:this.currentPresence.data,positions:Object.fromEntries(Object.entries(this.currentPresence.positions).map(([n,e])=>[n,Ll(e)]))}}))}sendPromptInit(){this.encoder&&(ye.info("sending prompt to init to server"),this.encoder.write({promptInit:{id:this.encoder.newMessageID(),stateVector:_l(this.doc),version:It.V2}}))}sendInit(n){!this.encoder||this.readOnly||(ye.info("sending init to server"),this.encoder.write({init:{id:this.encoder.newMessageID(),update:Fo(this.doc,n),version:It.V2}}))}batchUpdate(n){if(!this.readOnly){if(!this.batchDebounceFlush){this.sendUpdate(n);return}this.batchUpdates.push(n),this.batchDebounceFlush()}}sendUpdate(n){if(!this.encoder||this.readOnly)return;let e=this.encoder.newMessageID();ye.info(`sending update ${e} to server (size: ${n.byteLength}`),this.encoder.write({update:{id:e,update:n,version:It.V2}})}ackMessage(n){this.pendingMessages.delete(n),this.pendingMessages.size===0&&(this.pendingMessagesResolves.forEach(e=>e()),this.pendingMessagesResolves=[])}assertNotDestroyed(){if(this.destroyed)throw new Error("datasync is destroyed")}dangerouslyPauseSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}async dangerouslyResumeSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}useRPC(n){let e=Ep(n,{newMessageID:()=>(Ja(this.encoder),this.encoder.newMessageID()),write:t=>{Ja(this.encoder),this.encoder.write(t)}});return this.rpcClients.push(e),[e.service,()=>{this.rpcClients.splice(this.rpcClients.indexOf(e),1)}]}pushUpdateToLog(n,e){this.updateLog.push({timestamp:Date.now(),update:n,origin:typeof e=="object"?JSON.stringify(e):String(e)})}getUpdateLog(){return cn.DebugLog.encode({updates:this.updateLog.map(e=>({timestamp:e.timestamp,update:e.update,origin:e.origin}))}).finish()}};s();var Sf=w(Vr(),1);var oo=class{constructor(n,e,t,o={}){this.events=new Sf.default;this.manager=n,this.contentId=t.contentId,this.branchId=t.branchId,this.dataSync=new fr(n.client,e,{readOnly:o.readOnly}),this._change=kp(mi(this.dataSync.doc)),this.dataSync.listen("update",()=>{this.dataSync.doc.transact(()=>{lp(mi(this.dataSync.doc))},"local"),this.#e=Cp(mi(this.dataSync.doc)),this.events.emit("update")})}#e;get revision(){return this.#e}get presences(){return this.dataSync.presences}keepAlive(){return this.manager.keepAlive(this)}open(n={}){return this.dataSync.presence||this.dataSync.setPresence({data:n}),this.dataSync.open(this.contentId,"/branches/:branchId/datasync",{branchId:this.branchId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(n,e){return n==="update"?(this.events.addListener(n,e),()=>{this.events.removeListener(n,e)}):this.dataSync.listen(n,e)}openPage(n){let e=this.dataSync.presence;this.manager.touch(this),e&&this.dataSync.setPresence({data:{...e.data,pageId:n}})}syncChange(n){return this.manager.touch(this),this.dataSync.transact(t=>n(this._change))}async change(n){if(this.dataSync.readOnly)throw new Error("can't apply change when dataSync is in read-only mode");let e=this.syncChange(n);return await this.waitForSync(),e}};s();var wf=w(Vr(),1);var yb=G("hive:branch-document"),io=class{constructor(n,e,t,o={}){this.events=new wf.EventEmitter;this.manager=n,this.contentId=t.contentId,this.branchId=t.branchId,this.pageId=t.pageId,this.singleEditBatchingInterval=o.singleEditBatchingInterval??1500,this.#e=ja.create(),this.dataSync=new fr(n.client,e,{YType:ze,readOnly:o.readOnly}),this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.dataSync.listen("restorePositions",a=>{let c=this.createSelectionFromRelatives(this.value.document,a);c=c?c.normalize(this.value.document):Wr.create(),this.#e.selection.isFocused&&(c=c.focus()),this.#e=this.#e.merge({selection:c}),this.events.emit("value")}),this.dataSync.listen("update",a=>{a==="local"||this.createSlateValue(),this.events.emit("value")}),this.dataSync.listen("presences",()=>{this.dataSync.presences.length>0?this.dataSync.hasBatchingEnabled()&&this.dataSync.disableBatching():this.dataSync.hasBatchingEnabled()||this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.updateSelections()}),this.dataSync.listen("state",a=>{a==="open"&&this.updateSelections()});let[i]=this.dataSync.useRPC("DocumentCompletions");this.completions=i}#e;async*streamRPCMethod(n,e,t){let[o,i]=this.dataSync.useRPC(n),a=[],c,l,u=new Promise((C,O)=>{c=C,l=O}),d=!1;function m(C){a.push(C),c(),u=new Promise((O,$)=>{c=O,l=$})}function g(C){if(typeof C!="object"||!C||!("id"in C)||!("completion"in C)||typeof C.id!="string")throw new Error("Invalid response")}function h(C,O){g(C),m(C)}function P(){i(),d=!0,c()}function S(C){yb.error("Error while streaming RPC result",C),i(),l(C)}o.on("data",h),o.on("end",P),o.on("error",S);let I=o[e];if(typeof I!="function")throw new Error(`Invalid method name: ${String(e)}`);for(I.bind(o)(t).catch(()=>{});!d;)await u,yield*a,a=[]}streamAICompletion(n){return this.streamRPCMethod("DocumentCompletions","streamAICompletion",n)}get value(){return this.#e}createSlateValue(){let n=dr(this.dataSync.doc);this.dataSync.doc.transact(()=>Bp(n),"local");let e=Op(n);this.dataSync.doc.transact(()=>{let t=this.value.selection,o=kl[e.data.get("schemaType")||"document"],i=ja.create({document:e},{normalize:!1}).setSchema(o);if(i.document!==e)throw new Error("Document should not be modified by creation of Value");let a=i.change({save:!1}).normalize();if(a.value.document!==i.document){i=i.merge({document:a.value.document}),vs(a,n);let l=qa();try{bs(a.value.document,n)}catch(u){if(!(u instanceof Me))throw u;let d=l();throw this.dataSync.destroy(),_o.annotateError(u,{tags:{["error_category"]:"hive-document-init"},extra:{durationMs:d,contentId:this.contentId,branchId:this.branchId,pageId:this.pageId},attachments:[{name:"normalization.json",body:xs(u,a)},{name:"updates.bin",body:this.dataSync.getUpdateLog()}]})}}let c=this.dataSync.presence?this.createSelectionFromRelatives(i.document,this.dataSync.presence.positions):void 0;c&&(c=c.normalize(e)),c&&t.isFocused&&(c=c.focus()),i=i.merge({selection:c??Wr.create()}),this.#e=i},"local")}keepAlive(){return this.manager.keepAlive(this)}open(n={}){return this.dataSync.presence||this.dataSync.setPresence({data:n}),this.dataSync.open(this.contentId,"/branches/:branchId/pages/:pageId/document/datasync",{branchId:this.branchId,pageId:this.pageId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(n,e){return this.events.addListener(n,e),()=>{this.events.removeListener(n,e)}}applyChange(n){if(this.dataSync.readOnly)throw new Error("can't apply change when dataSync is in read-only mode");this.manager.touch(this);let e=this.value;if(e!==n.initialValue){let t=new Me("Slate change.initialValue does not match the value of HiveBranchDocument. This could indicate a nested .change() call, or a datasync inconsistency issue.");throw this.dataSync.destroy(),_o.annotateError(t,{tags:{["error_category"]:"hive-document-initial-value"},extra:{contentId:this.contentId,branchId:this.branchId,pageId:this.pageId},attachments:[{name:"change.json",body:xs(t,n)},{name:"updates.bin",body:this.dataSync.getUpdateLog()}]})}if(this.#e=n.value,e.document!==n.value.document){let t=qa();this.dataSync.transact(o=>{vs(n,dr(o));try{bs(n.value.document,dr(o))}catch(i){if(!(i instanceof Me))throw i;let a=t();throw this.#e=e,this.dataSync.destroy(),_o.annotateError(i,{tags:{["error_category"]:"hive-document-change"},extra:{durationMs:a,contentId:this.contentId,branchId:this.branchId,pageId:this.pageId},attachments:[{name:"change.json",body:xs(i,n)},{name:"updates.bin",body:this.dataSync.getUpdateLog()}]})}}),this.updateSelections()}else this.events.emit("value");if(n.value.selection!==e.selection){let t=n.value.selection;this.dataSync.setPresence({data:{...this.dataSync.presence?.data||{}},positions:Hp(n.value.document,this.dataSync.doc,t)})}n.value.selection.isBlurred&&this.dataSync.flushBatchUpdates()}async change(n){let e=this.value.change();return n(e),this.applyChange(e),this.waitForSync()}updateSelections(){this.dataSync.state!=="open"?this.selections=$n.create():this.selections=$n.create(this.dataSync.presences.map(n=>{let e=this.createSelectionFromRelatives(this.value.document,n.positions);return e?e.merge({data:Xn.create({clientId:n.clientId,...n.data})}):null}).filter(Jn)),this.events.emit("selections")}undo(){return this.dataSync.undo()}redo(){return this.dataSync.redo()}createSelectionFromRelatives(n,e){let t=this.dataSync.doc;return Np(n,{anchor:e.anchor&&Qa(e.anchor,t)||void 0,focus:e.focus&&Qa(e.focus,t)||void 0})}};function xs(r,n){return JSON.stringify({initialValue:Kr(n.initialValue),...r.slateValue?{slateValue:r.slateValue}:{},...r.yValue?{yValue:r.yValue}:{},operations:n.operations.map(([e])=>Kr(e)),flags:Object.keys(n.flags).length>0?n.flags:void 0})}s();var ki=class{constructor(n,e={}){this.browserCache=e.browserCache,this.cache=Rn({getKey:t=>t,getValue:async t=>{if(Pi(t))throw new Error("content permissions patterns must be cached before access");let o=await n(t),i=Array.isArray(o)?o:[o],a;if(i.forEach(c=>{let l=ef(c),u={token:c,metadata:l};Object.keys(l.payload.content).forEach(d=>{tf(t,l.payload)&&(a=u),t!==d&&this.cache.write(d,u)})}),!a)throw new lt.Forbidden(`No authentication for content "${t}"`);return a},ttl:t=>t.metadata.expiration-(Date.now()+5*60*1e3),effects:this.browserCache?[this.browserCache.effect]:[]})}async getParsedToken(n){if(this.cache.getCacheState(n))return this.cache.readAsync(n);let e=Array.from(this.cache.keys()).filter(o=>{let i=this.cache.getCacheState(o);return i&&i.state!=="failed"}),t=ks(n,e);if(t){let o=await this.cache.readAsync(t);return this.cache.write(n,o),o}return this.cache.readAsync(n)}async getToken(n){if(Pi(n))throw new Error("HiveAuthTokenManager.getToken called with a glob pattern, only absolute ids are allowed.");let{token:e}=await this.getParsedToken(n);return e}async clearCache(){this.cache.clearAll(),this.browserCache&&await this.browserCache.clearCache()}};s();s();s();var ao=Symbol("HiveDataSyncCacheOrigin"),Ii=class{};var vb="hive-docs",pn=G("hive:browsercache"),bb=100,Ti=class extends Ii{constructor(){super();this.updateCountByGuid=new Map;this.db=new Zc(vb),this.db.version(1).stores({updates:"++id,guid,at,state"})}get updates(){return this.db.table("updates")}async clear(){await this.db.delete()}registerDoc(e){let t=()=>{let o=(a,c)=>{c!==ao&&this.pushUpdate(e,a).catch(l=>{pn.error(`error pushing update for ${e.guid}`,l)})},i=()=>{e.off("updateV2",o),e.off("destroy",i)};e.on("updateV2",o),e.on("destroy",i),this.fetchUpdates(e).catch(a=>{pn.error(`error fetching updates for ${e.guid}`,a)})};this.db.isOpen()?t():(this.db.on("ready",t),this.db.open().catch(o=>{pn.error("error opening IndexedDB",o)}))}async fetchUpdates(e){let t=await this.updates.where("guid").equals(e.guid).toArray();if(!t.length){pn.info(`no updates found for ${e.guid}`);return}pn.info(`fetched ${t.length} updates for ${e.guid}`);let o=0;Nl(e,()=>{for(let i of t)e.transact(()=>{o+=i.value.byteLength,Vo(e,i.value,ao)},ao)},ao,!1),pn.info(`loaded ${t.length} updates (${o} bytes) for ${e.guid}`),e.emit("load",[]),this.updateCountByGuid.set(e.guid,t.length)}async pushUpdate(e,t){let o=this.updateCountByGuid.get(e.guid)??0;if(o>=bb){await this.resetDoc(e);return}pn.info(`push update for ${e.guid} (${t.byteLength} bytes, ${o+1} updates)`);let i=Date.now();await this.updates.add({guid:e.guid,value:t,at:i,state:!1}),this.updateCountByGuid.set(e.guid,(this.updateCountByGuid.get(e.guid)??0)+1)}async resetDoc(e){let t=Fo(e);pn.info(`reset cache for ${e.guid} with ${t.byteLength} bytes`),await this.db.transaction("rw",this.updates,async o=>{await this.updates.where("guid").equals(e.guid).delete();let i=Date.now();await this.updates.add({guid:e.guid,value:t,at:i,state:!0})}),this.updateCountByGuid.set(e.guid,0)}};var Cf=G("hive:datasync-manager"),Es=2,xi=class{constructor(n,e={}){this.syncs=new Map;this.ids=new WeakMap;this.gcClock=0;this.cache=new Ti;this.client=n,this.ttl=e.ttl??1e3*60*5}async clearCache(){await this.cache.clear()}close(n){let e=this.ids.get(n);if(!e)throw new Error("Unknown sync client");let t=this.syncs.get(e);if(!t)throw new Error("Expected sync client to be registered");t.sync.destroy(),this.syncs.delete(e),this.ids.delete(n)}async flushAll(){let n=[];for(let{sync:e}of this.syncs.values())e.dataSync.flushBatchUpdates(),n.push(e.waitForSync());await Promise.all(n)}closeAll(){this.stopGarbageCollect(),[...this.syncs.values()].map(n=>n.sync.close()),this.syncs=new Map,this.ids=new WeakMap}touch(n){let e=this.ids.get(n);if(!e)return!1;let t=this.syncs.get(e);if(!t)throw new Error("Expected sync client to be registered");return t.clock=this.gcClock,!0}keepAlive(n){this.touch(n);let e=setInterval(()=>{this.touch(n)||t()},this.ttl/2),t=()=>{e&&clearInterval(e),e=void 0};return t}branch(n,e,t){let o=t?.readOnly??!1,i=this.getSync(`content/${n}/branches/${e}/datasync`,a=>new oo(this,a,{contentId:n,branchId:e},{readOnly:o}),t);if(i&&!(i instanceof oo))throw new Error(`Expected HiveBranchRevision, got ${i.constructor.name}`);return i}pageDocument(n,e,t,o){let i=this.getSync(`content/${n}/branches/${e}/pages/${t}/document/datasync`,a=>new io(this,a,{contentId:n,branchId:e,pageId:t},o),o);if(i&&!(i instanceof io))throw new Error(`Expected HiveBranchDocument, got ${i.constructor.name}`);return i}getSync(n,e,t){let o=t?.readOnly??!1,i=this.syncs.get(n);if(i)return i.sync.dataSync.setReadOnly(o),i.sync;if(t?.autoInit===!1)return;let a=e(n);return this.syncs.set(n,{sync:a,clock:this.gcClock}),this.ids.set(a,n),a.dataSync.listen("clientId",c=>{this.clientId=c}),this.cache.registerDoc(a.dataSync.doc),Cf.info(`initialize sync for "${n}"`),this.startGarbageCollect(),a}garbageCollect(){this.gcClock+=1;for(let[n,{sync:e,clock:t}]of this.syncs.entries())if(t<this.gcClock-Es){let o=(this.gcClock-t)*(this.ttl/Es);Cf.info(`garbage collection "${n}", last active ~${o}ms ago`),this.close(e)}this.syncs.size===0&&this.stopGarbageCollect()}startGarbageCollect(){this.gcInterval||(this.gcInterval=setInterval(()=>this.garbageCollect(),this.ttl/Es))}stopGarbageCollect(){this.gcInterval&&(clearInterval(this.gcInterval),this.gcInterval=void 0)}};s();var Ei=class{constructor(n){this.branchesCache=Rn({getValue:async n=>{try{return await this.client.getBranch(n.contentId,n.branchId)}catch(e){if(e.statusCode===404)return;throw e}}});this.revisionsCache=Rn({getValue:async n=>{try{return await this.client.getRevision(n.contentId,n.revisionId,{metadata:n.metadata})}catch(e){if(e.statusCode===404)return;throw e}}});this.branchesHistoryCache=Rn({getValue:async n=>await this.client.getBranchHistory(n.contentId,n.branchId,{page:n.initialRevisionId,limit:n.size,...n.git!==void 0?{git:n.git}:{}})});this.documentsCache=Rn({getValue:async n=>{try{return await this.client.getDocument(n.contentId,n.documentId)}catch(e){if(e.statusCode===404)return;throw e}},toJS:n=>n!==void 0?Kr(n):"undefined",fromJS:n=>n!=="undefined"?bl(n):void 0});this.client=n}getBranchHistory(n,e,t){return Gn(this.branchesHistoryCache.readCacheState({contentId:n,branchId:e,initialRevisionId:t.page,size:t.limit,...t.git!==void 0?{git:t.git}:{}}))}getBranchRevision(n,e){let t=this.client.sync.branch(n,e,{autoInit:!1});return t?t.revision:jn(Gn(this.branchesCache.readCacheState({contentId:n,branchId:e})),o=>{if(o)return this.getRevision(n,o.revision)})}getBranchPageDocument(n,e,t){let o=this.client.sync.pageDocument(n,e,t,{autoInit:!1});return o?o.value.document:jn(Gn(this.branchesCache.readCacheState({contentId:n,branchId:e})),i=>{if(i)return jn(this.getRevision(n,i.revision),a=>{if(a){let c=a.pages[t];return c?.type!=="document"?void 0:c.document?this.getDocument(n,c.document):Tl(c.id).document}})})}getRevision(n,e,t={metadata:!0}){if(!t.metadata){let o=this.revisionsCache.readCacheState({contentId:n,revisionId:e,metadata:!0});if(o&&o.result)return o.result}return Gn(this.revisionsCache.readCacheState({contentId:n,revisionId:e,metadata:t.metadata}))}assertRevision(n,e,t){return jn(this.getRevision(n,e,t),o=>{if(!o)throw new Error(`Revision ${e} not found in content ${n}`);return o})}getDocument(n,e){return Gn(this.documentsCache.readCacheState({contentId:n,documentId:e}))}assertDocument(n,e){return jn(this.getDocument(n,e),t=>{if(!t)throw new Error(`Document ${e} not found in content ${n}`);return t})}toJSON(){return{documents:this.documentsCache.toJS(),revisions:this.revisionsCache.toJS(),branches:this.branchesCache.toJS()}}fromJSON(n){n.documents&&this.documentsCache.fromJS(n.documents),n.revisions&&this.revisionsCache.fromJS(n.revisions),n.branches&&this.branchesCache.fromJS(n.branches)}};s();s();var Pf={},Rf=globalThis.fetch,kf=Headers;s();var If=w(Vr(),1);var Ai=class{constructor(n,e,t,o,i){this.id=void 0;this.state=null;this.events=new If.default;this.client=n,this.contentId=e,this.path=t,this.pathParams=o,i&&(this.id=i)}async start(n={}){if(this.id)throw new Error("Operation already started");let t=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})).json();return this.setState(t),t}async update(n){if(!this.id)throw new Error("Operation not started or HiveContentOperation() is called without an existing operation ID");let t=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...n,id:this.id})})).json();return this.setState(t),t}async markAsSucceeded(){return this.update({status:2})}setState(n){this.id=n.id,this.state=n,this.events.emit("update",n)}listen(n){return this.events.on("update",n),()=>{this.events.off("update",n)}}};var Sb=G("hive:client"),Tf=typeof globalThis.window<"u"||!1,Oi=class{constructor(n,e,t={}){this.isRunningAtEdge=Tf;let o;this.getEndpoint=typeof n=="string"?()=>Promise.resolve(n):async()=>(o||(o=await n()),o),this.auth=new ki(e,{browserCache:t.tokensBrowserCache}),this.store=new Ei(this),this.sync=new xi(this),this.clientId=Qn(),t.locationHint&&(this.isRunningAtEdge=t.locationHint)}close(){this.sync.closeAll()}async clearAuthCache(){await Promise.all([this.auth.clearCache(),this.sync.clearCache()]),this.close()}getSocket(n,e,t,o){if(!this.isRunningAtEdge||!Tf)throw new Error("HiveClient#getSocket can only be called from the edge");let i=async()=>{let a=xf(n,e,t),c=await this.auth.getToken(n),l=await this.getEndpoint(),u=new URL(a,l);if(u.protocol=u.protocol.replace("http","ws"),o)for(let[d,m]of Object.entries(o))u.searchParams.set(d,m);return u.searchParams.set("authToken",c),u.toString()};return new Ri(i)}async getBranch(n,e){return await(await this.request(n,"/branches/:branchId",{path:{branchId:e}})).json()}async getBranchRevision(n,e,t){return await(await this.request(n,"/branches/:branchId/save",{path:{branchId:e},query:t?{mask:t.join(",")}:{}},{method:"POST"})).json()}async saveBranch(n,e){return{revisionId:(await this.getBranchRevision(n,e,["id"])).id}}async getBranchHistory(n,e,t={}){let{limit:o=10,page:i,git:a,refresh:c}=t;return await(await this.request(n,"/branches/:branchId/history",{path:{branchId:e},query:{limit:o.toString(),...i?{page:i}:{},...a!==void 0?{git:`${a}`}:{},...c!==void 0?{refresh:`${c}`}:{}}})).json()}async getRevision(n,e,t={}){let{mask:o,metadata:i=!0}=t;return await(await this.request(n,"/revisions/:revisionId",{path:{revisionId:e},query:{...o?{mask:o.join(",")}:{},...i===!1?{metadata:"false"}:{}}})).json()}getRevisionInfo(n,e){return this.getRevision(n,e,{mask:xl})}async mergeBranch(n,e){if(!this.isRunningAtEdge)throw new Error("HiveClient#mergeBranch can only be called from the edge");return await(await this.request(n,"/branches/:branchId/merge",{path:{branchId:e}},{method:"POST"})).json()}async rollbackBranch(n,e,t){await this.request(n,"/branches/:branchId/rollback",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})}async updateBranch(n,e){return await(await this.request(n,"/branches/:branchId/update",{path:{branchId:e}},{method:"POST"})).json()}async checkoutBranch(n,e,t,o={}){return(await this.request(n,"/branches/:branchId/checkout",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...wb(o.operationId)},body:JSON.stringify(t)})).json()}async getDocument(n,e){let o=await(await this.request(n,"/documents/:documentId",{path:{documentId:e}},{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})).arrayBuffer(),i=$a(new Uint8Array(o));return Xa(i)}async getPageDocument(n,e,t){if(!this.isRunningAtEdge)throw new Error("HiveClient#getPageDocument can only be called from the edge");let i=await(await this.request(n,"/branches/:branchId/pages/:pageId/document",{path:{branchId:e,pageId:t}})).arrayBuffer(),a=$a(new Uint8Array(i));return Xa(a)}async createDocument(n,e,t={}){let o=Sl(t.skipNormalization?e:Il(e),{preserveKeys:!0});return await(await this.request(n,"/documents",{query:t.documentId?{documentId:t.documentId}:{}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/octet-stream"},body:o})).json()}async createRevision(n,e){return await(await this.request(n,"/revisions",{},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).json()}getContentOperation(n,e,t,o){return new Ai(this,n,e,t,o)}getBranchContentOperation(n,e,t){return this.getContentOperation(n,"/branches/:branchId/operation",{branchId:e},t)}async createFileBlob(n,e,t){let o=await this.request(n,"/blobs",{query:{name:e.name}},{method:"POST",headers:{Accept:"application/json","Content-Type":e.contentType},body:t}),{blobId:i}=await o.json();return{blobId:i,downloadURL:$d(await this.getEndpoint(),n,{blobId:i,name:e.name})}}async updateRevisionMetadata(n,e,t){return await(await this.request(n,"/revisions/:revisionId",{path:{revisionId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})).json()}async duplicateContent(n,e){return(await this.request(n.contentId,"/branches/:branchId/duplicate",{path:{branchId:n.branchId}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({origin:e,page:n.pageId})})).json()}async triggerAlarm(n,e={force:!1}){n.pageId?await this.request(n.contentId,"/branches/:branchId/pages/:pageId/document/alarm",{path:{branchId:n.branchId,pageId:n.pageId},query:{force:String(e.force)}},{method:"POST"}):await this.request(n.contentId,"/branches/:branchId/alarm",{path:{branchId:n.branchId},query:{force:String(e.force)}},{method:"POST"})}async request(n,e,t,o={},i={}){let{retries:a=3}=i,{path:c={},query:l={}}=t,u=Qn(),d=new Nt(`hive:request:${(o.method||"GET").toLowerCase()}:${e}`);return d.label("contentId",n),d.setLabels({requestId:u,clientId:this.clientId,locationHint:this.isRunningAtEdge,...t}),d.wrap(async()=>{let m=xf(n,e,c),g=await this.auth.getToken(n),h=await this.getEndpoint(),P=new URL(m,h);P.search=new URLSearchParams(l).toString();let S=new kf(o.headers||{});S.set("Authorization",`Bearer ${g}`),S.set("X-Request-Id",u),S.set("X-Client-Id",this.clientId),typeof this.isRunningAtEdge=="string"&&S.set("X-Hive-Location-Hint",this.isRunningAtEdge);let I=await Ef(async()=>{let O=new AbortController,$=setTimeout(()=>{O.abort()},1e3*30),ne=await Rf(P.toString(),{...Pf,...o,headers:S,signal:O.signal});return clearTimeout($),ne},a),C=I.headers.get("cf-ray");if(d.label("rayId",C),!I.ok)try{let O="";try{O=(await I.clone().json()).error.message}catch{O=`Unexpected text response: ${await I.text()}`}throw lt.fromStatusCode(I.status,O)}catch(O){throw O.statusCode?O:new Error(`Unexpected response with status code ${I.status}: ${O.message}`)}return I})}};function xf(r,n,e){for(let[t,o]of Object.entries(e))n=n.replace(`:${t}`,o);return`content/${r}${n}`}function wb(r){return r?{"X-Content-Operation-Id":r}:{}}async function Ef(r,n=3,e=500){if(n<=0)return r();try{let t=await r();if(Math.floor(t.status/100)===5)throw lt.fromStatusCode(t.status,t.statusText);return t}catch(t){if(Sb.warning("retry because of error",t,{attemptsLeft:n,delay:e}),n>0)return await new Promise(o=>setTimeout(o,e)),Ef(r,n-1,e*2);throw t}}s();var Di=w(x());function As(r){let{children:n}=r,e=Di.useMemo(()=>{if(r.client)return r.client;let t=new Oi(r.endpoint,r.fetchContentAuthToken,{tokensBrowserCache:r.tokensBrowserCache});return r.store&&t.store.fromJSON(r.store),t},[r.client,r.endpoint,r.fetchContentAuthToken,r.store]);return Di.createElement(uu.Provider,{value:e},n)}s();var _i=w(x()),Mi=w($g()),Cb=2e3;function Af(){let[r,n]=_i.useState(!1);return _i.useEffect(()=>{let e=window.setTimeout(()=>(0,Mi.unstable_runWithPriority)(Mi.unstable_IdlePriority,()=>n(!0)),Cb);return()=>{clearTimeout(e)}},[]),r}s();var Of=w(x());function Df(){let r=Of.useRef();return jo(()=>{r.current=window},[]),r}s();function _f(r){let{r:n,g:e,b:t}=bu(r);return Math.sqrt(.299*(n*n)+.587*(e*e)+.114*(t*t))}function fn(r){return _f(r)>150?"light":"dark"}function Li(r){let n=_f(r);return n>240?"lightest":n>215?"light":n>190?"semiLight":n>165?"medium":n>140?"semiDark":n>115?"dark":"darkest"}s();var An=w(x()),Bi=w(ie());s();var Hi=w(x()),Ni=w(ie());var Pb=L.createResponsiveComponent(Ni.TouchableOpacity);function Mf(r){let[,n]=H(Ib),{close:e}=en(),t=Du()==="mobile",o=r.closeable||t,i=()=>{r.onClose&&r.onClose(),e(r.id)},a=Eu({mount:Rb,unmount:kb});return Hi.createElement(Ni.View,{ref:a},Hi.createElement(Pb,{mobileStyle:n.toastMobile,desktopStyle:n.toastDesktop,onPress:()=>{r.onOpen&&r.onOpen(),o&&i()}},Hi.createElement(Bu,{...r,onClose:o?i:void 0,style:n.alert,mainBackground:!0})))}var Rb={duration:os.TRANSITION_DURATION_SHORT,frames:{0:{opacity:0,transform:[{translateY:100}]},1:{opacity:1,transform:[{translateY:0}]}}},kb={duration:os.TRANSITION_DURATION_SHORT,frames:{0:{opacity:1,transform:[{translateY:0}]},1:{opacity:0,transform:[{translateY:100}]}}},Ib=j.create({toastDesktop:{width:"auto",minWidth:420,maxWidth:720,marginBottom:y.small},toastMobile:{width:"100%",minWidth:0},alert:r=>({...r.shadows.pop,borderColor:r.colors.border.main})});function Lf(r){let n=Lt(Tu),e=Lt(Iu),t=An.useRef(null),o=xb[n];return An.createElement(tn,{ref:t},An.createElement(L.View,{style:[Tb.toaster],mobileStyle:o.mobile,desktopStyle:o.desktop},An.createElement(Au,null,e.map(i=>An.createElement(Mf,{...i,key:i.id})))))}var Tb=Bi.StyleSheet.create({toaster:{position:"fixed",zIndex:200}}),xb={"bottom-right":Bi.StyleSheet.create({desktop:{bottom:y.medium,right:y.medium},mobile:{bottom:y.medium,right:y.medium,left:y.medium}}),"bottom-right-with-bar":Bi.StyleSheet.create({desktop:{bottom:y.xxlarge,right:y.medium},mobile:{bottom:y.xxlarge+y.xlarge+y.medium,right:y.medium,left:y.medium}})};s();var so=w(x());s();var qt=JSON.parse('{"container":"container_UPXwU","darkestParentBackground":"darkestParentBackground_8TVPV","darkParentBackground":"darkParentBackground_ziFwB","semiDarkParentBackground":"semiDarkParentBackground_wgu6B","mediumParentBackground":"mediumParentBackground_BIBSL","semiLightParentBackground":"semiLightParentBackground_Yx9Vw","lightParentBackground":"lightParentBackground_INb4a","lightestParentBackground":"lightestParentBackground_FL4je","toggle":"toggle_siihR","toggleLightMode":"toggleLightMode_-FLG4","toggleDarkMode":"toggleDarkMode_uS4t3","toggleSwitch":"toggleSwitch_NtUzX","toggleButton":"toggleButton_ePBfn","toggleIcon":"toggleIcon_-vIfn"}');function Vf(r){let{onValueChange:n,value:e=!1,backgroundColor:t,mode:o="switch",accesibilityLabel:i="Switch to dark mode"}=r,a=()=>{n()},c=o==="switch"?e?A.ThemeDark.CSS:A.ThemeLight.CSS:e?A.ThemeLight.CSS:A.ThemeDark.CSS,l=Li(t);return o==="switch"?so.default.createElement(K,{as:"button",type:"button",role:"switch","aria-label":i,"aria-checked":e,onClick:a,style:[qt.container,qt[`${l}ParentBackground`]]},so.default.createElement(K,{style:[qt.toggle,qt.toggleSwitch,E.background.colorBase,E.margin.all100,e?qt.toggleDarkMode:qt.toggleLightMode]},so.default.createElement(c,{style:[qt.toggleIcon,E.padding.all100]}))):so.default.createElement(Ce,{label:i,role:"switch",iconOnly:!0,leadingIcon:c,rounded:!0,style:qt.toggleButton,kind:"blank",onClick:a,"aria-checked":e,"aria-label":i})}s();var mr=w(x());function Ff(r){let{children:n,...e}=r;return mr.createElement(Pu,null,mr.createElement(Ou,null,mr.createElement(_u,null,mr.createElement(qu,{...e}),mr.createElement(Lf,null),n)))}s();var Ui=w(x());function Kf(r){let n=(0,Ui.useContext)(rn);Bb(n,r),ns(()=>Yf(n,r));let e=ns(()=>Wf(n,r));(0,Ui.useEffect)(()=>(e.current=Wf(n,r),()=>{e.current&&window.gtag("config",e.current,{update:!0,groups:"not_tracking_views"})}),[r?.googleAnalytics?.enabled,r?.googleAnalytics?.trackingPrivateViews,r?.googleAnalytics?.trackingID,n])}function Ds(r){return!!(r.googleAnalytics?.enabled&&typeof r.googleAnalytics.trackingID=="string")}function Bb(r,n){pt(e=>{_s(r,n)||e.writeSafe({type:"script",src:`https://www.googletagmanager.com/gtag/js?l=dataLayer&id=${n?.googleAnalytics?.trackingID}`})})}function Yf(r,n){_s(r,n)||typeof window>"u"||window?.gtag||(window.dataLayer=window.dataLayer||[],window.gtag=function(...e){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",n.googleAnalytics.trackingID))}function Wf(r,n){if(_s(r,n)||typeof window>"u")return;window?.gtag||Yf(r,n),window.gtag("config",n.googleAnalytics.trackingID,{send_page_view:!1,anonymize_ip:!0,groups:"tracking_views"});let e=Jo()==="rejected";return window.gtag("consent","default",{ad_storage:e?"denied":"granted",analytics_storage:e?"denied":"granted"}),n?.googleAnalytics?.trackingID}function _s(r,n){return!n||!n.googleAnalytics||!Ds(n)||r.preview||r.mode!=="public-content"&&!n?.googleAnalytics?.trackingPrivateViews}s();var Vi=w(x());var zf=G("auth"),Ms=Qc(r=>{let{customToken:n,waitUserReady:e=!0}=r;if(typeof window>"u")throw new Error("initializeAuth should not be called during SSR");return!n&&!e?{customToken:n}:new Nt("auth.initialize").wrap(async()=>{if(n)try{zf.info("authenticating with custom token before subscribing to auth"),await No.auth().signInWithCustomToken(n),await No.auth().currentUser?.getIdToken(!0)}catch(o){zf.critical("Error during auth with custom token",o)}return e!==!1&&await new Promise((o,i)=>{let a=No.auth().onAuthStateChanged(()=>{a(),o()},i)}),{customToken:n}})});function qf(r){return Ms.readAsync(r)}function Fi(r){let{children:n}=r;if(typeof window<"u"){if(Ms.state==="unstarted")throw new Error("initializeAuth should have been called before useWaitFirebaseAuth");Ms.read({})}return Vi.createElement(Vi.Fragment,null,n)}s();var On=G("history");function Jf(){let r=od(),n=[],e=!1,t,o=()=>{let a=n.shift();return a?(a(),!1):!0},i=a=>{e?n.push(a):a()};return{get location(){return r.location},listen:a=>r.listen(c=>{a({location:c.location,action:c.action})}),push:a=>{let{state:c,...l}=a;i(()=>{On.info("push",l,c),r.push(l,c)})},replace:a=>{let{state:c,...l}=a;i(()=>{On.info("replace",l,c),r.replace(l,c)})},go:a=>{i(()=>{On.info("go",a),r.go(a)})},transaction:a=>{if(e)a();else{let c=r.listen(()=>{o()&&c()});e=!0,a(),e=!1,o()&&c()}},block:(a,c)=>{if(t)throw new Error("History is already blocked");t=a;let l,u=()=>{On.info("stop blocking history"),l&&(l(),l=void 0)},d=()=>{On.info("start blocking history"),l=r.block(m=>{let g=()=>{On.info("unblock history transaction"),u(),m.retry(),d()},h=a(r.location,m.location);if(On.info(`history blocked=${h}`),!h){g();return}c({location:m.location,unblock:g})})};return d(),()=>{u(),t=void 0}},isBlocked:a=>t?t(r.location,a):!1}}s();function jf(r){let{basename:n="",location:e="/",context:t}=r,o=(a,c)=>{t.action=c,t.location=Ub(n,Gf(a)),t.url=id(t.location)};return{staticContext:t,location:Vb(n,Gf(ad(e))),push:a=>{o(a,"PUSH")},replace:a=>{o(a,"REPLACE")},go:()=>{},listen:()=>()=>{},transaction:a=>{a()},block:(a,c)=>()=>{},isBlocked:()=>!1}}function $f(r){return r.charAt(0)==="/"?r:`/${r}`}function Ub(r,n){return r?{...n,pathname:$f(r)+n.pathname}:n}function Vb(r,n){if(!r||!n.pathname)return n;let e=$f(r);return n.pathname.indexOf(e)!==0?n:{...n,pathname:n.pathname.substr(e.length)}}function Gf(r){let n={hash:"",search:"",pathname:"",...r,key:"",state:void 0};return n.search&&n.search.charAt(0)!=="?"&&(n.search=`?${n.search}`),n.hash&&n.hash.charAt(0)!=="#"&&(n.hash=`#${n.hash}`),n}s();var Dn=w(x()),Xf=w(Zg());function Ls(r){let{history:n,children:e}=r,t=Dn.useMemo(()=>n||Jf(),[n]),o=Dn.useMemo(()=>({getCurrentValue:()=>t.location,subscribe:a=>t.listen(a)}),[t]),i=(0,Xf.useSubscription)(o);return Dn.createElement(sd.Provider,{value:t},Dn.createElement(cd.Provider,{value:i},e))}function Qf(r){let{children:n,...e}=r,t=jf(e);return Dn.createElement(Ls,{history:t},n)}s();var Hs=w(x());function Zf(r,n){let{navigate:e}=rt(),t=ar(),o=Xl(r),i=(0,Hs.useCallback)(l=>e({screen:{sideSheet:{type:r,tab:l}}},{replace:!0}),[e,r]),a=(0,Hs.useCallback)(()=>e({screen:{sideSheet:void 0}}),[e]),c=("sideSheet"in t.screen&&t.screen.sideSheet&&"tab"in t.screen.sideSheet&&t.screen.sideSheet.tab?t.screen.sideSheet.tab:n)??o[0];return{opened:"sideSheet"in t.screen&&t.screen.sideSheet?.type===r,selectedTab:c,changeSelectedTab:i,close:a}}s();var Fb=Ct({key:"firestoreReacheable",default:!0,effects:[r=>{typeof window>"u"||fetch("https://firestore.googleapis.com/$discovery/rest").catch(()=>{r.setSelf(!1)})}]});function em(){return Lt(Fb)}s();var co=Ct({key:"mobileToCOpenedAtom",default:!1});s();function Wb(r){return r.themePreset?Q.PRIMARY:r.primaryColor??Q.PRIMARY}function Kb(r,n,e){let t=Q.WHITE,o=Q.darkModeGreyScale.xdark;switch(r){case"default":return n==="dark"?o:t;case"bold":return e;case"contrast":return n==="dark"?t:o;case"custom":return Q.fuchsia.light;default:re(r)}}function Yb(r,n,e){switch(r){case"default":case"contrast":return n;case"bold":case"custom":return fn(e)==="light"?Q.lightModeText.base:Q.darkModeText.base;default:re(r)}}function tm(r){return cl(r.headerTheme,r.themeMode)==="none"}function zb(r,n){let{primaryColor:e,headerBackgroundColor:t,headerLinksColor:o}=r.themeCustomizations?.[n]||{},a=tm(r)?"default":ut(r),c=Wb(r),l=e??c,u=Kb(a,n,l),d=t??u,m=Yb(a,l,d);return{primaryColor:l,headerBackgroundColor:d,headerLinksColor:o??m}}function qb(r,n){let e=n??r.themeMode??Fr,{headerLogoURL:t,footerLogoURL:o}=r.themeCustomizations?.[e]||{};return{headerLogoURL:t??r.logoURL,footerLogoURL:o??r.footer?.logoURL}}function Wi(r,n){let e=n??r.themeMode??Fr;return{...zb(r,e),...qb(r,e),headerDisabled:tm(r)}}s();var nm=w(x());var Jb=G("app:events"),Gb=r=>(r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function jb(){let r=document.cookie?document.cookie.split("; "):[],n={};for(let e=0;e<r.length;e++){let t=r[e].split("="),o=t.slice(1).join("=");try{let i=decodeURIComponent(t[0]);n[i]=Gb(o)}catch(i){Jb.warning(`Couldn't parse cookie ${r[e]}. Error: `,i)}}return n}function rm(r,n){return nm.useEffect(()=>{$b(r,n)},[r.key,n]),null}async function $b(r,n){if(!r.integrations||!n)return;let e=await lu(),t=jb(),o=window.location.href,i=document.referrer,a=window.navigator.userAgent;(await ii()).analytics.trackViewInSpaceById(r.key,{pageId:n,visitor:{anonymousId:e,cookies:t,userAgent:a},url:o,referrer:i})}s();function om(r,n){let e=n.type==="space"&&typeof n.changeRequest=="string"?n.changeRequest:void 0;return Sd(r,e)}s();var Ki=w(x());function im(r){let n=Ki.useContext(rn),e=n.preview||n.mode!=="public-content"||!r?.intercom?.enabled?void 0:r?.intercom?.appID,t=Af();return pt(o=>{t&&e&&o.writeAsync({type:"script",src:`https://widget.intercom.io/widget/${e}`,onLoad:async()=>{window.Intercom&&window.Intercom("boot",{app_id:e})}})}),Ki.useEffect(()=>()=>{window.Intercom&&(window.Intercom("shutdown"),window.Intercom=void 0)},[]),null}s();function Ns(r){if(!r.contributors.length)throw new Error("Expected a snippet to have at least one contributor");return r.contributors[0]}function am(r){if(r.title)return r.title;if(r.source.sourceId==="gitbook")return $l;let n=Ns(r);return`Snippet captured ${n.object==="user"?`by ${n.displayName}`:`from ${n.name}`}`}s();s();var sm=r=>{let{activatorEvent:n,draggingNodeRect:e,transform:t}=r;if(e&&n){let o=Ad(n);if(!o)return t;let i=o.x-e.left,a=o.y-e.top;return{...t,x:t.x+i-e.width/2,y:t.y+a-e.height/2}}return t};var xt=w(x());s();var lo=w(x());s();var cm=JSON.parse('{"cardWrapper":"cardWrapper_6Hr4m"}');function lm(r){let{item:n}=r;return lo.createElement(K,{style:[E.padding.horizontal400,E.padding.vertical200,E.background.colorPrimary,E.border.radiusThemeMedium,E.cursor.grabbing,cm.cardWrapper]},n.previewIcon?lo.createElement(K,{style:[E.margin.right400]},lo.createElement(A[n.previewIcon].CSS,{style:[E.text.colorPrimaryTextInside,E.size.icon400]})):null,lo.createElement(dt,{style:[E.text.uiAction,E.text.colorPrimaryTextInside]},n.previewLabel||"Drop to insert"))}function um(r){let[n,e]=xt.useState(null),t=ls(Dd,{activationConstraint:{distance:10}}),o=ls(_d,{activationConstraint:{distance:10}}),i=xt.useCallback(({active:c})=>{window.document.body.classList.add("dragging"),e(c.data.current)},[]),a=xt.useCallback(()=>{window.document.body.classList.remove("dragging"),e(null)},[]);return xt.createElement(Md,{sensors:[t,o],onDragStart:i,onDragEnd:a,onDragCancel:a,collisionDetection:Od},r.children,xt.createElement(tn,null,xt.createElement(Ld,{modifiers:[sm],dropAnimation:null},n?xt.createElement(lm,{item:n}):null)))}s();var Yi=w(x());function dm(r){let{children:n,statusCode:e}=r,t=ld();return t.staticContext&&(t.staticContext.statusCode=e),Yi.createElement(Yi.Fragment,null,n)}s();var Ve=w(x());s();s();var So=w(x());s();var Et=w(x());s();var Le=w(x());s();var _n="right-scroll-bar-position",Mn="width-before-scroll-bar",Bs="with-scroll-bars-hidden",Us="--removed-body-scroll-bar-size";s();s();function pm(r,n){return typeof r=="function"?r(n):r&&(r.current=n),r}s();var fm=w(x());function mm(r,n){var e=(0,fm.useState)(function(){return{value:r,callback:n,facade:{get current(){return e.value},set current(t){var o=e.value;o!==t&&(e.value=t,e.callback(t,o))}}}})[0];return e.callback=n,e.facade}s();function uo(r,n){return mm(n||null,function(e){return r.forEach(function(t){return pm(t,e)})})}s();s();s();function hm(r){return r}function gm(r,n){n===void 0&&(n=hm);var e=[],t=!1,o={read:function(){if(t)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:r},useMedium:function(i){var a=n(i,t);return e.push(a),function(){e=e.filter(function(c){return c!==a})}},assignSyncMedium:function(i){for(t=!0;e.length;){var a=e;e=[],a.forEach(i)}e={push:function(c){return i(c)},filter:function(){return e}}},assignMedium:function(i){t=!0;var a=[];if(e.length){var c=e;e=[],c.forEach(i),a=e}var l=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),e={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),e}}}};return o}function po(r,n){return n===void 0&&(n=hm),gm(r,n)}function Ln(r){r===void 0&&(r={});var n=gm(null);return n.options=Re({async:!0,ssr:!1},r),n}s();var ym=w(x()),vm=function(r){var n=r.sideCar,e=kn(r,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var t=n.read();if(!t)throw new Error("Sidecar medium not found");return ym.createElement(t,Re({},e))};vm.isSideCarExport=!0;function Hn(r,n){return r.useMedium(n),vm}var zi=Ln();var Vs=function(){},qi=Le.forwardRef(function(r,n){var e=Le.useRef(null),t=Le.useState({onScrollCapture:Vs,onWheelCapture:Vs,onTouchMoveCapture:Vs}),o=t[0],i=t[1],a=r.forwardProps,c=r.children,l=r.className,u=r.removeScrollBar,d=r.enabled,m=r.shards,g=r.sideCar,h=r.noIsolation,P=r.inert,S=r.allowPinchZoom,I=r.as,C=I===void 0?"div":I,O=kn(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),$=g,ne=uo([e,n]),Z=Re(Re({},O),o);return Le.createElement(Le.Fragment,null,d&&Le.createElement($,{sideCar:zi,removeScrollBar:u,shards:m,noIsolation:h,inert:P,setCallbacks:i,allowPinchZoom:!!S,lockRef:e}),a?Le.cloneElement(Le.Children.only(c),Re(Re({},Z),{ref:ne})):Le.createElement(C,Re({},Z,{className:l,ref:ne}),c))});qi.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qi.classNames={fullWidth:Mn,zeroRight:_n};s();s();var se=w(x());s();var fo="data-focus-lock",Ji="data-focus-lock-disabled",bm="data-no-focus-lock",Sm="data-autofocus-inside",wm="data-no-autofocus";var Rm=w(x());s();var hr=w(x());var gr={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Cm=function(n){var e=n.children;return hr.createElement(hr.Fragment,null,hr.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:gr}),e,e&&hr.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:gr}))};Cm.propTypes={};Cm.defaultProps={children:null};s();var Gi=po({},function(r){var n=r.target,e=r.currentTarget;return{target:n,currentTarget:e}}),ji=po(),Pm=po(),$i=Ln({async:!0});var Qb=[],Fs=se.forwardRef(function(n,e){var t,o=se.useState(),i=o[0],a=o[1],c=se.useRef(),l=se.useRef(!1),u=se.useRef(null),d=n.children,m=n.disabled,g=n.noFocusGuards,h=n.persistentFocus,P=n.crossFrame,S=n.autoFocus,I=n.allowTextSelection,C=n.group,O=n.className,$=n.whiteList,ne=n.hasPositiveIndices,Z=n.shards,q=Z===void 0?Qb:Z,me=n.as,De=me===void 0?"div":me,tt=n.lockProps,Lr=tt===void 0?{}:tt,Hr=n.sideCar,st=n.returnFocus,La=n.focusOptions,qn=n.onActivation,Nr=n.onDeactivation,Ha=se.useState({}),Na=Ha[0],Ba=se.useCallback(function(){u.current=u.current||document&&document.activeElement,c.current&&qn&&qn(c.current),l.current=!0},[qn]),Ua=se.useCallback(function(){l.current=!1,Nr&&Nr(c.current)},[Nr]);(0,Rm.useEffect)(function(){m||(u.current=null)},[]);var Va=se.useCallback(function(St){var Pn=u.current;if(Pn&&Pn.focus){var k=typeof st=="function"?st(Pn):st;if(k){var _=typeof k=="object"?k:void 0;u.current=null,St?Promise.resolve().then(function(){return Pn.focus(_)}):Pn.focus(_)}}},[st]),Ao=se.useCallback(function(St){l.current&&Gi.useMedium(St)},[]),Fa=ji.useMedium,Wa=se.useCallback(function(St){c.current!==St&&(c.current=St,a(St))},[]),Oo=ss((t={},t[Ji]=m&&"disabled",t[fo]=C,t),Lr),Br=g!==!0,Ka=Br&&g!=="tail",Ya=uo([e,Wa]);return se.createElement(se.Fragment,null,Br&&[se.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:m?-1:0,style:gr}),ne?se.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:m?-1:1,style:gr}):null],!m&&se.createElement(Hr,{id:Na,sideCar:$i,observed:i,disabled:m,persistentFocus:h,crossFrame:P,autoFocus:S,whiteList:$,shards:q,onActivation:Ba,onDeactivation:Ua,returnFocus:Va,focusOptions:La}),se.createElement(De,ss({ref:Ya},Oo,{className:O,onBlur:Fa,onFocus:Ao}),d),Ka&&se.createElement("div",{"data-focus-guard":!0,tabIndex:m?-1:0,style:gr}))});Fs.propTypes={};Fs.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var km=Fs;s();function Ws(r){var n=window,e=n.setImmediate;typeof e<"u"?e(r):setTimeout(r,1)}var Im=km;s();var Xi=Ln(),Qi="data-focus-on-hidden";var Tm=Et.forwardRef(function(r,n){var e=Et.useState(!1),t=e[0],o=e[1],i=r.children,a=r.autoFocus,c=r.shards,l=r.enabled,u=l===void 0?!0:l,d=r.scrollLock,m=d===void 0?!0:d,g=r.focusLock,h=g===void 0?!0:g,P=r.returnFocus,S=P===void 0?!0:P,I=r.inert,C=r.allowPinchZoom,O=r.sideCar,$=r.className,ne=r.shouldIgnore,Z=r.style,q=r.as,me=kn(r,["children","autoFocus","shards","enabled","scrollLock","focusLock","returnFocus","inert","allowPinchZoom","sideCar","className","shouldIgnore","style","as"]),De=O,tt=t.onActivation,Lr=t.onDeactivation,Hr=kn(t,["onActivation","onDeactivation"]),st=Re(Re({},Hr),{sideCar:O,shards:c,allowPinchZoom:C,as:q,inert:I,style:Z,enabled:u&&m});return Et.createElement(Et.Fragment,null,Et.createElement(Im,{ref:n,sideCar:O,disabled:!(t&&u&&h),returnFocus:S,autoFocus:a,shards:c,onActivation:tt,onDeactivation:Lr,className:$,whiteList:ne,lockProps:st,as:qi},i),u&&Et.createElement(De,Re({},me,{sideCar:Xi,setLockProps:o,shards:c})))});s();s();s();var Jm=w(x());s();s();s();function mo(r,n){return mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},mo(r,n)}function Ks(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,mo(r,n)}var Zi=w(x());function Zb(r,n){function e(t){return t.displayName||t.name||"Component"}return function(o){var i=[],a;function c(){a=r(i.map(function(u){return u.props})),n(a)}var l=function(u){Ks(d,u);function d(){return u.apply(this,arguments)||this}d.peek=function(){return a};var m=d.prototype;return m.componentDidMount=function(){i.push(this),c()},m.componentDidUpdate=function(){c()},m.componentWillUnmount=function(){var h=i.indexOf(this);i.splice(h,1),c()},m.render=function(){return Zi.default.createElement(o,this.props)},d}(Zi.PureComponent);return wu(l,"displayName","SideEffect("+e(o)+")"),l}}var xm=Zb;s();s();s();s();var He=function(r){for(var n=Array(r.length),e=0;e<r.length;++e)n[e]=r[e];return n},ho=function(r){return Array.isArray(r)?r:[r]};s();var eS=function(r){if(r.nodeType!==Node.ELEMENT_NODE)return!1;var n=window.getComputedStyle(r,null);return!n||!n.getPropertyValue?!1:n.getPropertyValue("display")==="none"||n.getPropertyValue("visibility")==="hidden"},Em=function(r){return r.parentNode&&r.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r.parentNode.host:r.parentNode},Am=function(r){return r===document||r&&r.nodeType===Node.DOCUMENT_NODE},tS=function(r,n){return!r||Am(r)||!eS(r)&&n(Em(r))},Ys=function(r,n){var e=r.get(n);if(e!==void 0)return e;var t=tS(n,Ys.bind(void 0,r));return r.set(n,t),t},nS=function(r,n){return r&&!Am(r)?oS(r)?n(Em(r)):!1:!0},zs=function(r,n){var e=r.get(n);if(e!==void 0)return e;var t=nS(n,zs.bind(void 0,r));return r.set(n,t),t},qs=function(r){return r.dataset},rS=function(r){return r.tagName==="BUTTON"},Om=function(r){return r.tagName==="INPUT"},Js=function(r){return Om(r)&&r.type==="radio"},Dm=function(r){return!((Om(r)||rS(r))&&(r.type==="hidden"||r.disabled))},oS=function(r){var n=r.getAttribute(wm);return![!0,"true",""].includes(n)},go=function(r){var n;return!!(r&&(!((n=qs(r))===null||n===void 0)&&n.focusGuard))},yr=function(r){return!go(r)},_m=function(r){return!!r};s();var iS=function(r,n){var e=r.tabIndex-n.tabIndex,t=r.index-n.index;if(e){if(!r.tabIndex)return 1;if(!n.tabIndex)return-1}return e||t},Gs=function(r,n,e){return He(r).map(function(t,o){return{node:t,index:o,tabIndex:e&&t.tabIndex===-1?(t.dataset||{}).focusGuard?0:-1:t.tabIndex}}).filter(function(t){return!n||t.tabIndex>=0}).sort(iS)};s();s();var Mm=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"];var js=Mm.join(","),aS="".concat(js,", [data-focus-guard]"),Lm=function(r,n){var e;return He(((e=r.shadowRoot)===null||e===void 0?void 0:e.children)||r.children).reduce(function(t,o){return t.concat(o.matches(n?aS:js)?[o]:[],Lm(o))},[])},ea=function(r,n){return r.reduce(function(e,t){return e.concat(Lm(t,n),t.parentNode?He(t.parentNode.querySelectorAll(js)).filter(function(o){return o===t}):[])},[])},Hm=function(r){var n=r.querySelectorAll("[".concat(Sm,"]"));return He(n).map(function(e){return ea([e])}).reduce(function(e,t){return e.concat(t)},[])};var $s=function(r,n){return He(r).filter(function(e){return Ys(n,e)}).filter(function(e){return Dm(e)})},Xs=function(r,n){return n===void 0&&(n=new Map),He(r).filter(function(e){return zs(n,e)})},yo=function(r,n,e){return Gs($s(ea(r,e),n),!0,e)},Qs=function(r,n){return Gs($s(ea(r),n),!1)},Nm=function(r,n){return $s(Hm(r),n)},mn=function(r,n){return r.shadowRoot?mn(r.shadowRoot,n):Object.getPrototypeOf(r).contains!==void 0&&Object.getPrototypeOf(r).contains.call(r,n)?!0:He(r.children).some(function(e){return mn(e,n)})};s();var sS=function(r){for(var n=new Set,e=r.length,t=0;t<e;t+=1)for(var o=t+1;o<e;o+=1){var i=r[t].compareDocumentPosition(r[o]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&n.add(o),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&n.add(t)}return r.filter(function(a,c){return!n.has(c)})},Bm=function(r){return r.parentNode?Bm(r.parentNode):r},vr=function(r){var n=ho(r);return n.filter(Boolean).reduce(function(e,t){var o=t.getAttribute(fo);return e.push.apply(e,o?sS(He(Bm(t).querySelectorAll("[".concat(fo,'="').concat(o,'"]:not([').concat(Ji,'="disabled"])')))):[t]),e},[])};s();var Um=function(r){return r.activeElement?r.activeElement.shadowRoot?Um(r.activeElement.shadowRoot):r.activeElement:void 0},br=function(){return document.activeElement?document.activeElement.shadowRoot?Um(document.activeElement.shadowRoot):document.activeElement:void 0};var cS=function(r){return r===document.activeElement},lS=function(r){return!!He(r.querySelectorAll("iframe")).some(function(n){return cS(n)})},ta=function(r){var n=document&&br();return!n||n.dataset&&n.dataset.focusGuard?!1:vr(r).some(function(e){return mn(e,n)||lS(e)})};s();var Zs=function(){var r=document&&br();return r?He(document.querySelectorAll("[".concat(bm,"]"))).some(function(n){return mn(n,r)}):!1};s();s();s();var uS=function(r,n){return n.filter(Js).filter(function(e){return e.name===r.name}).filter(function(e){return e.checked})[0]||r},na=function(r,n){return Js(r)&&r.name?uS(r,n):r},Vm=function(r){var n=new Set;return r.forEach(function(e){return n.add(na(e,r))}),r.filter(function(e){return n.has(e)})};s();var ec=function(r){return r[0]&&r.length>1?na(r[0],r):r[0]},tc=function(r,n){return r.length>1?r.indexOf(na(r[n],r)):n};var nc="NEW_FOCUS",Fm=function(r,n,e,t){var o=r.length,i=r[0],a=r[o-1],c=go(e);if(!(e&&r.indexOf(e)>=0)){var l=e!==void 0?n.indexOf(e):-1,u=t?n.indexOf(t):l,d=t?r.indexOf(t):-1,m=l-u,g=n.indexOf(i),h=n.indexOf(a),P=Vm(n),S=e!==void 0?P.indexOf(e):-1,I=S-(t?P.indexOf(t):l),C=tc(r,0),O=tc(r,o-1);if(l===-1||d===-1)return nc;if(!m&&d>=0)return d;if(l<=g&&c&&Math.abs(m)>1)return O;if(l>=h&&c&&Math.abs(m)>1)return C;if(m&&Math.abs(I)>1)return d;if(l<=g)return O;if(l>h)return C;if(m)return Math.abs(m)>1?d:(o+d+m)%o}};s();var dS=function(r){return function(n){var e,t=(e=qs(n))===null||e===void 0?void 0:e.autofocus;return n.autofocus||t!==void 0&&t!=="false"||r.indexOf(n)>=0}},Wm=function(r,n,e){var t=r.map(function(i){var a=i.node;return a}),o=Xs(t.filter(dS(e)));return o&&o.length?ec(o):ec(Xs(n))};s();var oc=function(r,n){return n===void 0&&(n=[]),n.push(r),r.parentNode&&oc(r.parentNode.host||r.parentNode,n),n},rc=function(r,n){for(var e=oc(r),t=oc(n),o=0;o<e.length;o+=1){var i=e[o];if(t.indexOf(i)>=0)return i}return!1},ra=function(r,n,e){var t=ho(r),o=ho(n),i=t[0],a=!1;return o.filter(Boolean).forEach(function(c){a=rc(a||c,c)||a,e.filter(Boolean).forEach(function(l){var u=rc(i,l);u&&(!a||mn(u,a)?a=u:a=rc(u,a))})}),a},Km=function(r,n){return r.reduce(function(e,t){return e.concat(Nm(t,n))},[])};var pS=function(r,n){var e=new Map;return n.forEach(function(t){return e.set(t.node,t)}),r.map(function(t){return e.get(t)}).filter(_m)},Ym=function(r,n){var e=document&&br(),t=vr(r).filter(yr),o=ra(e||r,r,t),i=new Map,a=Qs(t,i),c=yo(t,i).filter(function(g){var h=g.node;return yr(h)});if(!(!c[0]&&(c=a,!c[0]))){var l=Qs([o],i).map(function(g){var h=g.node;return h}),u=pS(l,c),d=u.map(function(g){var h=g.node;return h}),m=Fm(d,l,e,n);return m===nc?{node:Wm(a,d,Km(t,i))}:m===void 0?m:u[m]}};s();var ic=function(r){var n=vr(r).filter(yr),e=ra(r,r,n),t=new Map,o=yo([e],t,!0),i=yo(n,t).filter(function(a){var c=a.node;return yr(c)}).map(function(a){var c=a.node;return c});return o.map(function(a){var c=a.node,l=a.index;return{node:c,index:l,lockItem:i.indexOf(c)>=0,guard:go(c)}})};s();var fS=function(r,n){"focus"in r&&r.focus(n),"contentWindow"in r&&r.contentWindow&&r.contentWindow.focus()},ac=0,sc=!1,zm=function(r,n,e){e===void 0&&(e={});var t=Ym(r,n);if(!sc&&t){if(ac>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),sc=!0,setTimeout(function(){sc=!1},1);return}ac++,fS(t.node,e.focusOptions),ac--}};var cc=zm;var mS=function(){return document&&document.activeElement===document.body},hS=function(){return mS()||Zs()},wr=null,Sr=null,Cr=null,vo=!1,gS=function(){return!0},yS=function(n){return(wr.whiteList||gS)(n)},vS=function(n,e){Cr={observerNode:n,portaledElement:e}},bS=function(n){return Cr&&Cr.portaledElement===n};function qm(r,n,e,t){var o=null,i=r;do{var a=t[i];if(a.guard)a.node.dataset.focusAutoGuard&&(o=a);else if(a.lockItem){if(i!==r)return;o=null}else break}while((i+=e)!==n);o&&(o.node.tabIndex=0)}var SS=function(n){return n&&"current"in n?n.current:n},wS=function(n){return n?!!vo:vo==="meanwhile"},CS=function r(n,e,t){return e&&(e.host===n&&(!e.activeElement||t.contains(e.activeElement))||e.parentNode&&r(n,e.parentNode,t))},PS=function(n,e){return e.some(function(t){return CS(n,t,t)})},oa=function(){var n=!1;if(wr){var e=wr,t=e.observed,o=e.persistentFocus,i=e.autoFocus,a=e.shards,c=e.crossFrame,l=e.focusOptions,u=t||Cr&&Cr.portaledElement,d=document&&document.activeElement;if(u){var m=[u].concat(a.map(SS).filter(Boolean));if((!d||yS(d))&&(o||wS(c)||!hS()||!Sr&&i)&&(u&&!(ta(m)||d&&PS(d,m)||bS(d,u))&&(document&&!Sr&&d&&!i?(d.blur&&d.blur(),document.body.focus()):(n=cc(m,Sr,{focusOptions:l}),Cr={})),vo=!1,Sr=document&&document.activeElement),document){var g=document&&document.activeElement,h=ic(m),P=h.map(function(S){var I=S.node;return I}).indexOf(g);P>-1&&(h.filter(function(S){var I=S.guard,C=S.node;return I&&C.dataset.focusAutoGuard}).forEach(function(S){var I=S.node;return I.removeAttribute("tabIndex")}),qm(P,h.length,1,h),qm(P,-1,-1,h))}}}return n},Gm=function(n){oa()&&n&&(n.stopPropagation(),n.preventDefault())},ia=function(){return Ws(oa)},jm=function(n){var e=n.target,t=n.currentTarget;t.contains(e)||vS(t,e)},RS=function(){return null},kS=function(n){var e=n.children;return Jm.createElement("div",{onBlur:ia,onFocus:jm},e)};kS.propTypes={};var $m=function(){vo="just",setTimeout(function(){vo="meanwhile"},0)},IS=function(){document.addEventListener("focusin",Gm),document.addEventListener("focusout",ia),window.addEventListener("blur",$m)},TS=function(){document.removeEventListener("focusin",Gm),document.removeEventListener("focusout",ia),window.removeEventListener("blur",$m)};function xS(r){return r.filter(function(n){var e=n.disabled;return!e})}function ES(r){var n=r.slice(-1)[0];n&&!wr&&IS();var e=wr,t=e&&n&&n.id===e.id;wr=n,e&&!t&&(e.onDeactivation(),r.filter(function(o){var i=o.id;return i===e.id}).length||e.returnFocus(!n)),n?(Sr=null,(!t||e.observed!==n.observed)&&n.onActivation(),oa(!0),Ws(oa)):(TS(),Sr=null)}Gi.assignSyncMedium(jm);ji.assignMedium(ia);Pm.assignMedium(function(r){return r({moveFocusInside:cc,focusInside:ta})});var Xm=xm(xS,ES)(RS);var vU=Hn($i,Xm);s();s();var ce=w(x());s();s();var aa=w(x());s();s();s();var eh=w(x());s();s();var Qm;var Zm=function(){if(Qm)return Qm;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AS(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var n=Zm();return n&&r.setAttribute("nonce",n),r}function OS(r,n){r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}function DS(r){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(r)}var lc=function(){var r=0,n=null;return{add:function(e){r==0&&(n=AS())&&(OS(n,e),DS(n)),r++},remove:function(){r--,!r&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}};var uc=function(){var r=lc();return function(n,e){eh.useEffect(function(){return r.add(n),function(){r.remove()}},[n&&e])}};var Nn=function(){var r=uc(),n=function(e){var t=e.styles,o=e.dynamic;return r(t,o),null};return n};s();var _S={left:0,top:0,right:0,gap:0},dc=function(r){return parseInt(r||"",10)||0},MS=function(r){var n=window.getComputedStyle(document.body),e=n[r==="padding"?"paddingLeft":"marginLeft"],t=n[r==="padding"?"paddingTop":"marginTop"],o=n[r==="padding"?"paddingRight":"marginRight"];return[dc(e),dc(t),dc(o)]},pc=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return _S;var n=MS(r),e=document.documentElement.clientWidth,t=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,t-e+n[2]-n[0])}};var LS=Nn(),HS=function(r,n,e,t){var o=r.left,i=r.top,a=r.right,c=r.gap;return e===void 0&&(e="margin"),`
  .`.concat(Bs,` {
   overflow: hidden `).concat(t,`;
   padding-right: `).concat(c,"px ").concat(t,`;
  }
  body {
    overflow: hidden `).concat(t,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(t,";"),e==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(t,`;
    `),e==="padding"&&"padding-right: ".concat(c,"px ").concat(t,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_n,` {
    right: `).concat(c,"px ").concat(t,`;
  }
  
  .`).concat(Mn,` {
    margin-right: `).concat(c,"px ").concat(t,`;
  }
  
  .`).concat(_n," .").concat(_n,` {
    right: 0 `).concat(t,`;
  }
  
  .`).concat(Mn," .").concat(Mn,` {
    margin-right: 0 `).concat(t,`;
  }
  
  body {
    `).concat(Us,": ").concat(c,`px;
  }
`)},fc=function(r){var n=r.noRelative,e=r.noImportant,t=r.gapMode,o=t===void 0?"margin":t,i=aa.useMemo(function(){return pc(o)},[o]);return aa.createElement(LS,{styles:HS(i,!n,o,e?"":"!important")})};s();var mc=!1;if(typeof window<"u")try{bo=Object.defineProperty({},"passive",{get:function(){return mc=!0,!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{mc=!1}var bo,Bn=mc?{passive:!1}:!1;s();var NS=function(r){return r.tagName==="TEXTAREA"},th=function(r,n){var e=window.getComputedStyle(r);return e[n]!=="hidden"&&!(e.overflowY===e.overflowX&&!NS(r)&&e[n]==="visible")},BS=function(r){return th(r,"overflowY")},US=function(r){return th(r,"overflowX")},hc=function(r,n){var e=n;do{typeof ShadowRoot<"u"&&e instanceof ShadowRoot&&(e=e.host);var t=nh(r,e);if(t){var o=rh(r,e),i=o[1],a=o[2];if(i>a)return!0}e=e.parentNode}while(e&&e!==document.body);return!1},VS=function(r){var n=r.scrollTop,e=r.scrollHeight,t=r.clientHeight;return[n,e,t]},FS=function(r){var n=r.scrollLeft,e=r.scrollWidth,t=r.clientWidth;return[n,e,t]},nh=function(r,n){return r==="v"?BS(n):US(n)},rh=function(r,n){return r==="v"?VS(n):FS(n)},WS=function(r,n){return r==="h"&&n==="rtl"?-1:1},oh=function(r,n,e,t,o){var i=WS(r,window.getComputedStyle(n).direction),a=i*t,c=e.target,l=n.contains(c),u=!1,d=a>0,m=0,g=0;do{var h=rh(r,c),P=h[0],S=h[1],I=h[2],C=S-I-i*P;(P||C)&&nh(r,c)&&(m+=C,g+=P),c=c.parentNode}while(!l&&c!==document.body||l&&(n.contains(c)||n===c));return(d&&(o&&m===0||!o&&a>m)||!d&&(o&&g===0||!o&&-a>g))&&(u=!0),u};var sa=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},ih=function(r){return[r.deltaX,r.deltaY]},ah=function(r){return r&&"current"in r?r.current:r},KS=function(r,n){return r[0]===n[0]&&r[1]===n[1]},YS=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},zS=0,Pr=[];function sh(r){var n=ce.useRef([]),e=ce.useRef([0,0]),t=ce.useRef(),o=ce.useState(zS++)[0],i=ce.useState(function(){return Nn()})[0],a=ce.useRef(r);ce.useEffect(function(){a.current=r},[r]),ce.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(o));var S=nl([r.lockRef.current],(r.shards||[]).map(ah),!0).filter(Boolean);return S.forEach(function(I){return I.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),S.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(o))})}}},[r.inert,r.lockRef.current,r.shards]);var c=ce.useCallback(function(S,I){if("touches"in S&&S.touches.length===2)return!a.current.allowPinchZoom;var C=sa(S),O=e.current,$="deltaX"in S?S.deltaX:O[0]-C[0],ne="deltaY"in S?S.deltaY:O[1]-C[1],Z,q=S.target,me=Math.abs($)>Math.abs(ne)?"h":"v";if("touches"in S&&me==="h"&&q.type==="range")return!1;var De=hc(me,q);if(!De)return!0;if(De?Z=me:(Z=me==="v"?"h":"v",De=hc(me,q)),!De)return!1;if(!t.current&&"changedTouches"in S&&($||ne)&&(t.current=Z),!Z)return!0;var tt=t.current||Z;return oh(tt,I,S,tt==="h"?$:ne,!0)},[]),l=ce.useCallback(function(S){var I=S;if(!(!Pr.length||Pr[Pr.length-1]!==i)){var C="deltaY"in I?ih(I):sa(I),O=n.current.filter(function(Z){return Z.name===I.type&&Z.target===I.target&&KS(Z.delta,C)})[0];if(O&&O.should){I.cancelable&&I.preventDefault();return}if(!O){var $=(a.current.shards||[]).map(ah).filter(Boolean).filter(function(Z){return Z.contains(I.target)}),ne=$.length>0?c(I,$[0]):!a.current.noIsolation;ne&&I.cancelable&&I.preventDefault()}}},[]),u=ce.useCallback(function(S,I,C,O){var $={name:S,delta:I,target:C,should:O};n.current.push($),setTimeout(function(){n.current=n.current.filter(function(ne){return ne!==$})},1)},[]),d=ce.useCallback(function(S){e.current=sa(S),t.current=void 0},[]),m=ce.useCallback(function(S){u(S.type,ih(S),S.target,c(S,r.lockRef.current))},[]),g=ce.useCallback(function(S){u(S.type,sa(S),S.target,c(S,r.lockRef.current))},[]);ce.useEffect(function(){return Pr.push(i),r.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",l,Bn),document.addEventListener("touchmove",l,Bn),document.addEventListener("touchstart",d,Bn),function(){Pr=Pr.filter(function(S){return S!==i}),document.removeEventListener("wheel",l,Bn),document.removeEventListener("touchmove",l,Bn),document.removeEventListener("touchstart",d,Bn)}},[]);var h=r.removeScrollBar,P=r.inert;return ce.createElement(ce.Fragment,null,P?ce.createElement(i,{styles:YS(o)}):null,h?ce.createElement(fc,{gapMode:"margin"}):null)}var lV=Hn(zi,sh);s();var ua=w(x());s();var qS=function(r){if(typeof document>"u")return null;var n=Array.isArray(r)?r[0]:r;return n.ownerDocument.body},Rr=new WeakMap,ca=new WeakMap,la={},gc=0,JS=function(r,n,e,t){var o=Array.isArray(r)?r:[r];la[e]||(la[e]=new WeakMap);var i=la[e],a=[],c=new Set,l=new Set(o),u=function(m){!m||c.has(m)||(c.add(m),u(m.parentNode))};o.forEach(u);var d=function(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,function(g){if(c.has(g))d(g);else{var h=g.getAttribute(t),P=h!==null&&h!=="false",S=(Rr.get(g)||0)+1,I=(i.get(g)||0)+1;Rr.set(g,S),i.set(g,I),a.push(g),S===1&&P&&ca.set(g,!0),I===1&&g.setAttribute(e,"true"),P||g.setAttribute(t,"true")}})};return d(n),c.clear(),gc++,function(){a.forEach(function(m){var g=Rr.get(m)-1,h=i.get(m)-1;Rr.set(m,g),i.set(m,h),g||(ca.has(m)||m.removeAttribute(t),ca.delete(m)),h||m.removeAttribute(e)}),gc--,gc||(Rr=new WeakMap,Rr=new WeakMap,ca=new WeakMap,la={})}},ch=function(r,n,e){e===void 0&&(e="data-aria-hidden");var t=Array.from(Array.isArray(r)?r:[r]),o=n||qS(r);return o?(t.push.apply(t,Array.from(o.querySelectorAll("[aria-live]"))),JS(t,o,e,"aria-hidden")):function(){return null}};s();var lh=w(x());var GS=Nn(),jS=`
 [`+Qi+`] {
   pointer-events: none !important;
 }
`,uh=function(){return lh.createElement(GS,{styles:jS})};var hn=w(x()),dh=function(r){return"current"in r?r.current:r};function ph(r){var n=r.setLockProps,e=r.onEscapeKey,t=r.onClickOutside,o=r.shards,i=r.onActivation,a=r.onDeactivation,c=r.noIsolation,l=(0,hn.useState)(void 0),u=l[0],d=l[1],m=(0,hn.useRef)(null),g=(0,hn.useRef)(0);return ua.useEffect(function(){var h=function(C){C.defaultPrevented||(C.code==="Escape"||C.key==="Escape"||C.keyCode===27)&&e&&e(C)},P=function(C){C.defaultPrevented||C.target===m.current||C instanceof MouseEvent&&C.button!==0||o&&o.map(dh).some(function(O){return O&&O.contains(C.target)||O===C.target})||t&&t(C)},S=function(C){P(C),g.current=C.touches.length},I=function(C){g.current=C.touches.length};if(u)return document.addEventListener("keydown",h),document.addEventListener("mousedown",P),document.addEventListener("touchstart",S),document.addEventListener("touchend",I),function(){document.removeEventListener("keydown",h),document.removeEventListener("mousedown",P),document.removeEventListener("touchstart",S),document.removeEventListener("touchend",I)}},[u,t,e]),(0,hn.useEffect)(function(){if(u)return i&&i(u),function(){a&&a()}},[!!u]),(0,hn.useEffect)(function(){var h=function(){return null},P=!1,S=function(C){c||(h=ch(tl([C],(o||[]).map(dh)),document.body,Qi)),d(function(){return C})},I=function(){h(),P||d(null)};return n({onMouseDown:function(C){m.current=C.target},onTouchStart:function(C){m.current=C.target},onActivation:S,onDeactivation:I}),function(){P=!0,n(!1)}},[]),ua.createElement(uh,null)}var fh=Hn(Xi,ph);var $S=function(r){return So.createElement(fh,Re({},r))},yc=So.forwardRef(function(r,n){return So.createElement(Tm,Re({},r,{ref:n,sideCar:$S}))});var At=w(ie()),Rh=w(Ph());function kh(r){let n=Ve.useRef(null),[e,t]=Ht(bd),{medias:o,currentIndex:i}=e,a=()=>{t({medias:[],currentIndex:0})},c=()=>{t(d=>({...d,currentIndex:Math.max(d.currentIndex-1,0)}))},l=()=>{t(d=>({...d,currentIndex:Math.min(d.currentIndex+1,d.medias.length-1)}))},u=d=>{t(m=>({...m,currentIndex:d}))};return Mu({opened:o.length>0,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,closeOnEsc:!0,onClose:a},n),di(o.length?{Left:()=>c(),Right:()=>l()}:{},"all"),o.length?Ve.createElement(tn,{ref:n},Ve.createElement(yc,null,Ve.createElement(At.View,{style:Ir.imagesZoonPortal},Ve.createElement(Rh.default,{imageUrls:o.map(d=>({url:d.url})),index:i,renderIndicator:d=>Ve.createElement(At.View,{style:Ir.indactor},Ve.createElement(At.View,{style:Ir.indicatorElement}),Ve.createElement(At.View,{style:[Ir.indicatorElement,b.alignItemsCenter,b.justifyCenter]},Ve.createElement(At.Text,{style:Ir.indicatorText},`${d}/${o.length}`)),Ve.createElement(At.View,{style:[Ir.indicatorElement,b.alignItemsEnd,b.justifyCenter]},Ve.createElement($e,{icon:A.X,defaultTextStyle:{color:Q.WHITE},onPress:()=>a()}))),renderArrowLeft:()=>Ve.createElement($e,{icon:A.ChevronLeft,defaultTextStyle:{color:Q.WHITE},onPress:()=>c()}),renderArrowRight:()=>Ve.createElement($e,{icon:A.ChevronRight,defaultTextStyle:{color:Q.WHITE},onPress:()=>l()}),onChange:d=>u(d||0),onCancel:()=>a(),enableSwipeDown:!0})))):null}var Ir=At.StyleSheet.create({imagesZoonPortal:{position:"fixed",top:0,left:0,right:0,bottom:0},indactor:{height:48,position:"absolute",left:0,top:0,right:0,display:"flex",flexDirection:"row",zIndex:20},indicatorElement:{flex:1},indicatorText:{color:Q.WHITE}});s();var Ih=w(x());var pw=5,Th=Ct({key:"recentSearches",default:[],effects:[Ft.recoilEffect("@recoil/recentSearches",[])]});function xh(){return Lt(Th)}function Eh(r){let n=za(Th);Ih.useEffect(()=>{if(!r)return;let e=setTimeout(()=>{n(t=>t.includes(r)?t:[r,...t.slice(0,pw-1)])},3e3);return()=>clearTimeout(e)},[r])}s();var Ah=w(x());function Oh(r,n){let{space:e,organization:t}=n,o=td();Ah.useEffect(()=>{if(!r)return;let i=setTimeout(()=>{let a={type:o?"public_content_search_type":"search_type",query:r};e?z(ge(e,a)):t?z(iu(t,a)):z(a)},700);return()=>{clearTimeout(i)}},[r])}s();var Ot=w(x());s();var Dh=Vu("0dc87861cc2f97f4b8aa90517de6c6f7d7add292c36eff9ffb4a127ad3126faa",()=>import("https://app.gitbook.com/public/app/chunks/ShareModalBody.lazycomponent-7OICJ3LE.min.js"));function _h(r){let{content:n}=r,{selectedTab:e,changeSelectedTab:t,opened:o,close:i}=Zf("share");return Ot.createElement(Yu,null,o?Ot.createElement(Ku,{size:"xlarge",onClose:i},Ot.createElement(Ot.Suspense,{fallback:Ot.createElement(zu,{sidebar:Ot.createElement(je,{size:"large"})},Ot.createElement(je,{size:"large"}))},Ot.createElement(Dh,{tab:e||Yd(n),onChangeTab:t,...r}))):null)}s();var V=w(x());s();var mt=JSON.parse('{"loadingDelayedText":"loadingDelayedText_WVBF7","loadingDelayedTextVisible":"loadingDelayedTextVisible_y5onq","fullResponse":"fullResponse_adSl0","prompts":"prompts_Th3zf","prompt":"prompt_F-9A-","icon":"icon_281MC","actions":"actions_FNzrP","relatedQueries":"relatedQueries_nIpkZ","blankSlateNoAiAnswer":"blankSlateNoAiAnswer_rz6wQ","buttons":"buttons_Q48Sx"}');s();var Qe=w(x());s();var yn=w(x());function Lh(r){let{answer:n,singleSpace:e,organization:t}=r,{navigate:o}=rt(),i=Go(),a=yn.useMemo(()=>mw(i,n,e,t),[i,n,e,t]),c=yn.useCallback(d=>{switch(z({type:"ai_search_open_source"}),d.type){case"space":o({screen:{type:"space",space:d.space.key,organization:d.space.organization,page:"",query:void 0}});break;case"page":o({screen:{type:"space",space:d.space.key,organization:d.space.organization,page:d.path,query:void 0}});break;case"snippet":o({screen:{type:"snippet",snippet:d.snippet.id,organization:d.organization,query:void 0}});break;case"entity":d.targetURL&&ju(d.targetURL);break;default:re(d)}},[o]),l=yn.useCallback(d=>{switch(d.type){case"space":return{icon:Qo(nr(ni,{code:nu(d.space)})),title:d.space.title||Ut,action:"Go to space"};case"page":return{icon:A.Page.CSS,title:d.page.title,nested:!e,action:"Go to page"};case"snippet":let m=Ns(d.snippet);return{title:am(d.snippet),icon:m.object==="user"?Qo(nr(Td,{user:m.id,size:"sm"})):A.Snippet.CSS,action:"Go to snippet"};case"entity":return{icon:A.ArrowCurveDownRight.CSS,title:d.title,body:d.body,action:"Open"};default:re(d)}},[e]),u=yn.useCallback(d=>{if(d?.type==="entityType")return{icon:d.integration?Qo(nr(xd,{integrationId:d.integration,bordered:!1})):A.Database.CSS,title:d.title}},[]);return yn.createElement(nn,{data:a,getKey:vw,renderItem:l,renderGroup:u,getGroupKey:bw,groupItem:Sw,onOpen:c})}function mw(r,n,e,t){let o=new Map,i=[];ed(n.sources,c=>{switch(c.type){case"entity":let{entityType:l,entityId:u,integration:d}=c;if(!t)return null;let m=gw(u,l,t);if(!m)return null;let g=m.entityType.includes(`${d}:`)?m.entityType.split(`${d}:`)[1]:m.entityType;i.push({type:"entity",id:m.entityId,title:m.properties.title,body:m.properties.description,targetURL:m.properties.url,groups:[{type:"entityType",entityType:m.entityType,title:Cu(g),integration:d}]});break;case"capture":let{captureId:h}=c;if(!t)return null;let P=hw(h,t);if(!P)return null;i.push({type:"snippet",snippet:P,organization:t});break;case"page":let S=yw(c.space,c.page,r);if(!S)return null;let I=zo(S.revision,S.page.id),C={type:"page",space:S.space,page:S.page,ancestors:I,path:er(S.revision,S.page.id)};if(e){i.push(C);break}i.some($=>$.type==="space"&&$.space.key===S.space.key)||i.push({type:"space",space:S.space}),o.set(S.space.key,(o.get(S.space.key)||[]).concat(C));break;default:re(c)}});let a=[];for(let c of i)c&&(a.push(c),c.type==="space"&&(o.get(c.space.key)||[]).forEach(u=>{a.push(u)}));return a}function hw(r,n){return as(is({operationId:"getSnippet",params:{organizationId:n,snippetId:r}}))?.data}function gw(r,n,e){return as(is({operationId:"getEntity",params:{organizationId:e,entityType:n,entityId:r}}))?.data}function yw(r,n,e){let t=hd([tr(r)])[0]?.result;if(!t)return;let o=Lo(e.store.getRevision(r,t.revision,{metadata:!1}));if(!o)return;let i=o.pages[n];if(!(!i||i.type!=="document"))return{space:t,page:i,revision:o}}function vw(r){switch(r.type){case"space":return`space:${r.space.key}`;case"page":return`page:${r.space.key}/${r.page.id}`;case"snippet":return`snippet:${r.snippet.id}`;case"entity":return`entity:${r.groups[0].entityType}:${r.id}`;default:re(r)}}function bw(r){return r&&r.type==="entityType"?r.entityType:""}function Sw(r){if(r.type==="entity")return r.groups[0]}s();var Hh=JSON.parse('{"aiAnswerFooter":"aiAnswerFooter_pxFSA","sourcesHeadingButton":"sourcesHeadingButton_YdnnI"}');function Nh(r){let{answer:n,singleSpace:e,organization:t}=r,[o,i]=Qe.useState(!1),a=B();return Qe.createElement(K,{style:[E.flex.column]},Qe.createElement(K,{style:[E.flex.row]},Qe.createElement(K,{style:[E.flex.flex1]},Qe.createElement(Ce,{kind:"blank",size:"small",trailingIcon:o?A.ChevronDown.CSS:A.ChevronRight.CSS,onPress:()=>{i(!o)},style:[Hh.sourcesHeadingButton,E.text.uiSmall,E.text.colorMuted,E.background.colorTransparent,E.padding.all0],preventFocusOnPress:!0,label:a("search_answer_sources",`${n.sources.length}`)}))),o?Qe.createElement(K,{style:E.margin.top400},Qe.createElement(Qe.Suspense,{fallback:Qe.createElement(je,{size:"medium"})},Qe.createElement(Lh,{answer:n,singleSpace:e,organization:t}))):null)}s();var Dt=w(x());function Bh(r){let{query:n,answer:e,size:t="small"}=r,[o,i]=Dt.useState(!1),a=en(),c=Nu(),l=B(),u=()=>{z({type:"ai_search_copy_answer",query:n,answer:e.text}),c.writeTextAndNotify(e.text)},d=()=>{z({type:"ai_search_upvote_answer",query:n,answer:e.text}),i(!0),a.notify({icon:A.ThumbsUp.CSS,title:l("search_answer_feedback_title"),details:l("search_answer_feedback_details")})},m=()=>{z({type:"ai_search_downvote_answer",query:n,answer:e.text}),i(!0),a.notify({icon:A.ThumbsUp.CSS,title:l("search_answer_feedback_title"),details:l("search_answer_feedback_details")})};return Dt.createElement(K,{style:[E.flex.row,E.flex.gap200]},Dt.createElement(Ce,{size:t,label:l("search_answer_copy"),iconOnly:!0,leadingIcon:A.Copy.CSS,kind:"blank",onPress:u}),o?null:Dt.createElement(Dt.Fragment,null,Dt.createElement(Ce,{size:t,leadingIcon:A.ThumbsUp.CSS,iconOnly:!0,label:l("search_answer_feedback_upvote"),kind:"blank",onPress:d}),Dt.createElement(Ce,{size:t,leadingIcon:A.ThumbsDown.CSS,iconOnly:!0,label:l("search_answer_feedback_downvote"),kind:"blank",onPress:m})))}s();var Ic=w(x());s();var kc=JSON.parse('{"aiSearchSpinner":"aiSearchSpinner_cTH2Q","aiSearchSpinnerAnim":"aiSearchSpinnerAnim_75OX-","aiSearchSpinnerIcon":"aiSearchSpinnerIcon_MOqIL"}');function Uh(r){let{size:n=Y.ICON_500}=r;return Ic.createElement(K,{style:kc.aiSearchSpinner,inlineStyle:{width:n,height:n}},Ic.createElement(A.AILens.CSS,{style:kc.aiSearchSpinnerIcon}))}function Vh(r){let{query:n,target:e}=r,t=$o((o,i,a)=>{z(e.space?ge(e.space,{type:"ai_search_crash",query:n.query}):{type:"ai_search_crash",query:n.query})});return V.createElement(Mo,{fallback:()=>V.createElement(Pw,null),onError:t},V.createElement(V.Suspense,{fallback:V.createElement(Fh,null)},V.createElement(ww,{...r})))}function ww(r){let{target:n,query:e,onSubmitQuery:t}=r,o=en(),[i,a]=ai(n.space?ir("streamAskInSpace",{spaceId:n.space.key},{query:{query:e.query,format:"markdown"}}):ir("streamAskInOrganization",{organizationId:n.organization},{query:{query:e.query,format:"markdown"}}),{onError:h=>{throw o.notifyError(h),h},transform:async h=>{let{answer:P}=h;if(!P)return null;Xc("markdown"in P.answer,"Invalid answer format from API");let{document:S}=await $u(P.answer.markdown);return{...P,document:S}}}),c=i.length===0,l=i[i.length-1],u=$o(()=>{let h={type:"ai_search_view_answer",query:e.query,queriesInMemory:e.previousQueries.length,hasAnswer:!!l,hasFollowupQuestions:!!l&&l.followupQuestions.length>0};z(n.space?ge(n.space,h):h)});V.useEffect(()=>{a||u()},[a,u]);let d=$o(r.onAnswerLoaded??(()=>{})),m=!!l;if(V.useEffect(()=>{m&&d()},[m,d]),c&&!l)return V.createElement(Fh,null);if(!l)return V.createElement(Cw,{organizationKey:n.organization});let g=h=>{z(n.space?ge(n.space,{type:"ai_search_pick_followup",query:e.query,followup:h,previousQueriesCount:e.previousQueries.length}):{type:"ai_search_pick_followup",query:e.query,followup:h,previousQueriesCount:e.previousQueries.length}),t(h)};return V.createElement(K,{style:[E.flex.column,mt.fullResponse]},V.createElement(K,{style:[E.flex.row,E.flex.alignItemsCenter,E.flex.gap200]},V.createElement(dt,{style:[E.text.capitalizeFirstLetter,E.text.uiHeadingSmall,E.text.colorBase]},e.query),c?V.createElement(Xo,{size:"small"}):null),V.createElement(K,{style:[E.text.uiBase,E.text.colorMuted]},V.createElement(Xu,{input:l.document,style:{minWidth:0}})),V.createElement(K,{style:mt.actions},V.createElement(Bh,{query:e.query,answer:l,size:"medium"})),V.createElement(Nh,{answer:l,singleSpace:!!n.space,organization:n.organization}),l.followupQuestions.length>0?V.createElement(K,{style:mt.relatedQueries},V.createElement(dt,{style:[E.text.uiSmall,E.text.colorMuted,E.margin.vertical400]},"Related queries"),V.createElement(K,{style:mt.prompts},l.followupQuestions.map(h=>V.createElement(K,{key:h,style:[mt.prompt,E.border.radiusPill,E.cursor.pointer],as:"button",type:"button",onClick:P=>{P.preventDefault(),g(h)}},V.createElement(A.SearchOrAsk.CSS,{style:mt.icon}),V.createElement(dt,{style:[E.text.uiSmall,E.text.colorBase,E.text.alignCenter]},h))))):null)}function Fh(r){let[n,e]=V.useState(!1),t=B();return V.useEffect(()=>{let o=setTimeout(()=>{e(!0)},3e3);return()=>{clearTimeout(o)}},[]),V.createElement(Vt,{icon:Uh,title:t("search_answer_loading"),style:E.padding.top200},V.createElement(dt,{style:[mt.loadingDelayedText,n&&mt.loadingDelayedTextVisible]},t("search_answer_loading_wait")))}function Cw(r){let{organizationKey:n}=r,e=B(),t=Bd({organization:n,category:"captures"});return V.createElement(K,{style:[mt.blankSlateNoAiAnswer,E.border.radiusThemeLarge]},V.createElement(dt,{style:[E.text.uiHeadingSmall,E.text.colorBase]},e("search_answer_none_title")),V.createElement(dt,{style:[E.text.colorBase]},e("search_answer_none_details")),n?V.createElement(K,{style:mt.buttons},V.createElement(Ce,{kind:"primary",leadingIcon:A.Integrations.CSS,label:"Connect integrations",onPress:()=>t()}),V.createElement(Ce,{kind:"secondary",leadingIcon:A.VSCode.CSS,label:"Record with VSCode",onPress:()=>{window.open("vscode:extension/GitBook.gitbook-vscode","_blank","noopener, noreferer")}})):null)}function Pw(r){let n=B();return V.createElement(Vt,{icon:A.Alert,title:n("search_answer_error_title")},n("search_answer_error_details"))}s();var Wh=w(x());function ma(r){let[n]=ai(r===null?null:r.space?ir("streamRecommendedQuestionsInSpace",{spaceId:r.space.key}):ir("streamRecommendedQuestionsInOrganization",{organizationId:r.organization}));return Wh.useMemo(()=>n.map(e=>({type:"recommended-question",question:e.question})),[n])}s();var Rw=w(x());var kw=Ct({key:"recentAISearches",default:[],effects:[Ft.recoilEffect("@recoil/recentAISearches",[])]});function ha(){return Lt(kw)}s();var Gt=w(x());function Kh(r){let{allowEnterToOpen:n,target:e,onSubmitAIQuery:t}=r,o=B(),i=ha(),a=ma(e),c=Gt.useCallback(m=>{switch(m.type){case"recent-search":return{icon:A.Search.CSS,title:m.query,action:o("search_ask")};case"recommended-question":return{icon:A.SearchOrAsk.CSS,title:m.question,action:o("search_ask")};default:re(m)}},[o]),l=Gt.useCallback(m=>{switch(m){case"recent-search":return{title:o("search_blankslate_recent_questions")};case"recommended-question":return{title:o("search_blankslate_recommended_questions")};default:return}},[o]),u=(m,g)=>{switch(m.type){case"recent-search":{t(m.query),z({type:"ai_search_pick_suggestion_recent_search",suggestionIndex:g});break}case"recommended-question":z({type:"ai_search_pick_suggestion_question"}),t(m.question);break;default:re(m)}},d=Gt.useMemo(()=>[...i.map(g=>({type:"recent-search",query:g})),...a],[i,a]);return d.length===0?Gt.createElement(Vt,null,o("search_blankslate_ai")):Gt.createElement(K,{style:[E.flex.flex1,E.flex.column]},Gt.createElement(nn,{data:d,getKey:Iw,renderItem:c,renderGroup:l,groupItem:Tw,getGroupKey:xw,onOpen:u,style:E.padding.all400,allowEnterToOpen:n}))}function Iw(r){switch(r.type){case"recent-search":return`recent-search:${r.query}`;case"recommended-question":return`recommended-question:${r.question}`;default:re(r)}}function Tw(r){return r.type}function xw(r){return r}s();var Yh=w(x());var Ew=10,Aw=Ct({key:"aiSearchQuery",default:{query:"",previousQueries:[]},effects:[Ft.recoilEffect("@recoil/aiSearchQuery",{query:"",previousQueries:[]})]});function zh(){let[r,n]=Ht(Aw),e=Yh.useCallback(t=>{n(o=>o?{query:t,previousQueries:[...o.previousQueries.filter(i=>i!==t&&i!==o.query),...o.query?[o.query]:[]].slice(-Ew)}:{query:t,previousQueries:[]})},[n]);return[r,e]}s();var Po=w(x());function qh(r,n,e){let t=Po.useCallback(a=>{switch(a.type){case"ask-gitbook":{n(a.query,"click_ask_gitbook");break}default:re(a.type)}},[n]),o=Po.useCallback(a=>{switch(a.type){case"ask-gitbook":return{title:a.query,icon:A.SearchOrAsk.CSS,action:"Ask GitBook",standout:!0};default:re(a.type)}},[]);return{suggestion:Po.useMemo(()=>{let a=r.trim();return!e||!_w(r)?null:{type:"ask-gitbook",key:`ask-gitbook:${a}`,query:a}},[r,e]),onOpenSuggestion:t,onRenderSuggestion:o}}var Ow=["who","what","where","when","why","how","explain","is","are","was","were","do","does","did","which","whom","whose","can","have","give","tell","show","find"],Dw=new Set(Ow);function _w(r){if(r.length>25||r.includes("?")||r.includes(" "))return!0;let n=r.toLowerCase().trim().split(/\s+/);if(n.length===0)return!1;for(let e of n)if(Dw.has(e))return!0;return!1}s();var ve=w(x());s();var Jh=JSON.parse('{"background":"background_8ngQa"}');var Mw=G("app:crash");function Ro(r){let{children:n}=r,e=ve.useCallback((t,o,i)=>{Mw.emergency(`An error occured during rendering:

`,t,`

The error is located at:
`,o),z({type:"crash",crashType:Tc(t),sentryEvent:i})},[]);return ve.createElement(Mo,{fallback:t=>ve.createElement(Lw,{...t}),onError:e,beforeCapture:Bw},n)}function Lw(r){let{eventId:n,error:e}=r,t=()=>{$c({eventId:n||void 0})},o=()=>{window.location.reload()};nd();let i=()=>{switch(Tc(e)){case"network-crash":return ve.createElement(Nw,{onReload:o,...r});case"crash":default:return ve.createElement(Hw,{onShareFeedback:t,onReload:o,...r})}};return ve.createElement(K,{style:[E.flex.column,E.height.minFull,Jh.background]},i())}function Hw(r){let n=B(),{onReload:e,onShareFeedback:t}=r;return ve.createElement(jr,{title:n("something_wrong"),action:ve.createElement(ve.Fragment,null,ve.createElement(Ce,{label:n("reload"),kind:"primary",size:"medium",onPress:e,style:E.margin.right200,preventFocusOnPress:!0}),ve.createElement(Ce,{label:n("let_us_know"),kind:"secondary",size:"medium",onPress:t,preventFocusOnPress:!0}))},n("we_have_been_notified"))}function Nw(r){let{onReload:n}=r,e=B(),t=()=>{window.open("https://docs.gitbook.com/resources/firewall-safelist","_blank")};return ve.createElement(jr,{title:e("connection_lost"),icon:A.CloudOff.CSS,action:ve.createElement(ve.Fragment,null,ve.createElement(Ce,{label:e("reload"),kind:"primary",size:"medium",onPress:n,style:E.margin.right200}),ve.createElement(Ce,{kind:"secondary",label:e("network_troubleshooting"),size:"medium",leadingIcon:A.Link.CSS,onPress:t}))},e("device_offline"))}function Bw(r,n){switch(Tc(n)){case"network-crash":r.setTag("error_category","network-crash");break;case"crash":default:r.setTag("error_category","react-crash")}}function Tc(r){return r.name==="FirebaseError"&&r.code==="unavailable"?"network-crash":"crash"}s();var et=w(x());s();var xc=w(x());function ga(r){let{children:n,ssrRequestPath:e,ssrRouterContext:t}=r;return t?xc.createElement(Qf,{location:e,context:t},n):xc.createElement(Ls,null,n)}s();var ya=w(x());function Gh(r="https://policies.gitbook.com/privacy/cookies",n=!1){let e=en(),t=B();ya.useEffect(()=>{if(!n)return;let o=!1;if(Jo()!==null)return;let i=e.notify({title:t("cookies"),details:t("cookie_prompt",ya.createElement(ri,{url:r},t("cookie_policy"))),timeout:0,icon:A.Cookies.CSS,actions:[{label:t("reject_all"),onPress:()=>{o=!0,ts(!1),i()}}],onClose:()=>{o||ts(!0)}})},[])}s();var M=w(x()),_t=w(ie());s();var jh=JSON.parse('{"withStickyHeader":"withStickyHeader_HQiM-"}');s();var Fe=w(x()),Fn=w(ie());var{TOC_DESKTOP_WIDTH:Uw}=kt,Vw=L.createResponsiveComponent(Fn.TouchableOpacity),Fw=de.createInteractiveComponent(Vw),Ec=Uw-y.large-y.large;function va(r){let{space:n,collection:e,headerBackgroundColor:t,headerLogoURL:o,mobileStyle:i,desktopStyle:a}=r,[,c]=H(oe),{getNavigationLinkProps:l}=rt(),d={color:fn(t)==="light"?Q.lightModeText.base:Q.darkModeText.base},m=(e?e?.publishedTitle||e?.title:n.publishedTitle||n.title)||Ut,g=m.length>14,h=g?2:1,P=ut(n);return Fe.createElement(Fw,{style:[b.row,b.alignItemsCenter],mobileStyle:i,desktopStyle:a,...l({screen:{space:n.key,page:""}}),testID:"public.headerHomeLink",accessibilityLabel:m},o?Fe.createElement(L.View,{style:[b.flex1,b.row,b.alignItemsCenter,ko.headerDesktop],mobileStyle:ko.logoMobile,desktopStyle:ko.logoDesktop},Fe.createElement(L.View,{desktopStyle:"visible",mobileStyle:"hidden"},Fe.createElement(or,{source:{uri:Xr(o,{height:40,fit:"contain"})},loading:"priority",style:{maxHeight:40,maxWidth:Ec,width:"auto",height:"auto"}})),Fe.createElement(L.View,{desktopStyle:"hidden",mobileStyle:"visible"},Fe.createElement(or,{source:{uri:Xr(o,{height:30,fit:"contain"})},style:{maxHeight:30,maxWidth:Ec,width:"auto",height:"auto"}}))):Fe.createElement(Fn.View,{style:[ko.headerDesktop,b.flex1,b.row,b.justifyStart,b.alignItemsCenter]},Fe.createElement(Fn.View,null,Fe.createElement(L.View,{mobileStyle:"hidden",desktopStyle:"visible"},Fe.createElement(cs,{content:e||n,renderFor:"public-content",size:Y.BUTTON_L,style:[y.Margin.right400]})),Fe.createElement(L.View,{mobileStyle:"visible",desktopStyle:"hidden"},Fe.createElement(cs,{content:e||n,renderFor:"public-content",size:Y.ICON_600,style:[y.Margin.right400]}))),Fe.createElement(L.Text,{style:ko.textOverflow,mobileStyle:[c.Heading3],desktopStyle:[g?c.Heading3:c.Heading2]},Fe.createElement(de.Text.Child,{style:[d],numberOfLines:h,ellipsizeMode:"tail",inactiveStyle:c.text,activeStyle:P==="bold"?c.textStandout:c.primary},m))))}var ko=Fn.StyleSheet.create({textOverflow:{overflow:"hidden"},logoMobile:{height:30},logoDesktop:{height:40},headerDesktop:{maxWidth:Ec}});s();var Wn=w(x()),Io=w(ie());s();var Ze=w(x()),vn=w(ie());var Ww=L.createResponsiveComponent(de.TouchableOpacity),Kw=de.createInteractiveComponent(L.View);function Ac(r){return`hsla(${Su(r.colors.text.primary).h}, 60%, 70%, 0.1)`}var $h=Ze.forwardRef(function(n,e){let{isLast:t,leftIcon:o,icon:i,rightIcon:a,kind:c="primary",children:l,expanded:u=!1,onChevronPress:d,active:m=!1,onPress:g,textStyle:h,href:P}=n,S=de.useInteractiveState(),[I,C]=H(Yw),[,O]=H(oe),$=c==="primary"?O.textMid:O.textMuted,ne=m?O.primary:$,Z=g?Ww:Kw,q=u?A.ChevronDown:A.ChevronRight;return Ze.createElement(Z,{ref:e,...S.events,style:[C.tocMenuItem,y.Padding.horizontal200,y.Margin.right200,t?null:y.Margin.bottom100,m?{backgroundColor:Ac(I)}:null],hoverStyle:g&&!m?C.tocMenuItemHovered:null,mobileStyle:C.tocMenuItemMobile,desktopStyle:C.tocMenuItemDesktop,onPress:g,href:P&&g?P:void 0},o?Ze.createElement(vn.View,{style:[y.Margin.right400]},Ze.createElement(o,{size:Y.ICON_400,style:[ne,h]})):null,i?Ze.createElement(vn.View,{style:[y.Margin.right400]},Ze.createElement(i,{size:Y.ICON_400,style:[ne,h]})):null,Ze.createElement(vn.Text,{style:[b.flex1,y.Padding.vertical100,c==="group"?O.GroupTitle:O.Label,ne,h,m?O.Bold:null]},l),d?Ze.createElement(vn.TouchableOpacity,{style:[b.row,b.alignItemsCenter],onPress:d},Ze.createElement(q,{size:Y.ICON_400,style:ne})):null,a?Ze.createElement(vn.View,{style:C.tocMenuItemRightIcon},Ze.createElement(a,{size:Y.ICON_400,style:O.textMuted})):null)}),Yw=j.create({tocMenuItem:r=>({flexDirection:"row",alignItems:"center",borderColor:"transparent",borderWidth:1,borderRadius:r.radiuses.medium,minHeight:Y.XS}),tocMenuItemMobile:{borderRightWidth:1},tocMenuItemDesktop:{borderRightWidth:0},tocMenuItemHovered:r=>({backgroundColor:r.colors.background.standout}),tocMenuItemRightIcon:{marginLeft:y.small,marginRight:(Y.S-Y.ICON_400)/2}});var Oc=150,zw=200,qw=150;function ba(r){let[,n]=H(Xh);return Wn.createElement(L.View,{style:n.wrapper,mobileStyle:[n.wrapperMobile,y.Margin.vertical200,y.Margin.horizontal200],desktopStyle:[n.wrapperDesktop,y.Margin.vertical200,y.Margin.horizontal100]},Wn.createElement(Io.ScrollView,null,r.children))}function Sa(r){let{title:n,kind:e="default",active:t=!1,onPress:o,isLast:i}=r,[a,c]=H(Xh),[,l]=H(oe);return Wn.createElement(de.TouchableOpacity,{hoverStyle:c.menuItemHovered,style:[c.menuItem,y.Padding.vertical100,y.Padding.horizontal200,i?null:y.Margin.bottom100,t?{backgroundColor:Ac(a)}:null],onPress:o},Wn.createElement(Io.View,{style:[b.row,b.alignItemsCenter,b.justifySpaceBetween]},Wn.createElement(de.Text.Child,{hoverStyle:t?null:l.textStandout,style:[l.Label,e==="link"?l.SemiBold:null,...t?[l.primary,l.Bold]:[l.text]],numberOfLines:2,ellipsizeMode:"tail"},n),Wn.createElement(Io.View,{style:[y.Margin.left400]},r.rightElement)))}var Xh=j.create({wrapper:r=>({backgroundColor:r.colors.background.main}),wrapperDesktop:{minWidth:Oc,maxWidth:zw,maxHeight:qw},wrapperMobile:{width:"auto",maxWidth:"100%",maxHeight:"100%"},menuItem:r=>({borderRadius:r.radiuses.large}),menuItemHovered:r=>({backgroundColor:r.colors.background.muted})});s();var xe=w(x()),Kn=w(ie());function Tr(r){let{backgroundColor:n,currentPage:e,collection:t,variants:o,currentVariant:i,revision:a}=r,{getNavigationLinkProps:c}=rt(),l=B(),u=xe.useRef(null),[,d]=H(oe),m=xe.useMemo(()=>e?er(a,e.id):"",[e]);return xe.createElement(Hu,{ref:u,wrapper:ti,closeOnClick:!0,closeOnOutsideClick:!0,anchor:({ref:g,toggle:h,opened:P})=>{let S=P?A.ChevronUp:A.ChevronDown;return xe.createElement($e,{ref:g,size:"medium",rightIcon:S,kind:fn(n||Q.WHITE)?"default_bold":"default",alignItems:"start",onPress:h,style:[y.Padding.horizontal0]},xe.createElement(Kn.View,{style:[Qh.variantsPicker]},xe.createElement(Kn.Text,{numberOfLines:1,ellipsizeMode:"tail"},i.publishedTitle||i.title||Ut)))}},xe.createElement(ei,{kind:"menu",preferredAlignment:"start"},xe.createElement(xe.Suspense,{fallback:xe.createElement(je,{size:"small"})},xe.createElement(ba,null,o.map((g,h,P)=>xe.createElement(Sa,{key:g.key,title:g.title,active:g.key===i.key,isLast:h===P.length-1,rightElement:g.key===t.primarySpace?xe.createElement(Kn.Text,{style:[d.textMuted,d.Uppercase,Qh.mainLabel]},l("main")):null,...c({screen:{space:g.key,page:m}},()=>{u.current?.close()})}))))))}var Qh=Kn.StyleSheet.create({mainLabel:{letterSpacing:1.2},variantsPicker:{maxWidth:Oc}});s();var bn=w(x());var Jw={color:Fr,radius:sl},ht=bn.createContext([Jw,()=>{}]),Zh="@gitbook/themeMode";function Gw(r,n){let[e,t]=bn.useState(()=>{if(typeof window>"u"||!r.themeModeTogglable)return n;let i=Ft.get(Zh);return i!==null?i:n});return{themeMode:e,toggleThemeMode:()=>{t(i=>{let a=i==="light"?"dark":"light";return Ft.set(Zh,a),z(au(r,{type:"public_content_toggle_theme_mode",themeMode:a})),a})}}}function eg(r){let{content:n,isPreview:e,children:t}=r,{color:o,radius:i}=ll(n),{themeMode:a,toggleThemeMode:c}=Gw(n,o);bn.useEffect(()=>{window?.document.body.classList.remove("theme-overlay")},[]);let l=e?o:a??o;return pt(u=>{u.setTheme([`${l?`theme-color-${l}`:""}`,`${i?`theme-radius-${i}`:""}`].join(" "))}),bn.createElement(ht.Provider,{value:[{color:l,radius:i},c]},t)}s();var wa=w(x());function be(r){let[{color:n}]=wa.useContext(ht);return wa.useMemo(()=>Wi(r,n),[n,r])}s();var Ca=w(x());var To=Ca.forwardRef(function(n,e){let{contentRef:t,style:o,kind:i="default",...a}=n,c=cr(t);return Ca.createElement(ri,{ref:e,url:c.href,onPress:l=>{l.nativeEvent.metaKey||l.nativeEvent.ctrlKey||(l.preventDefault(),c.open())},kind:i,sameWebTab:!1,style:[rs.Body,rs.SemiBold,o],numberOfLines:2,ellipsizeMode:"tail",accessibilityLabel:n.title,...a},n.title)});s();var Pa=w(x());function Yn(r){let{content:n,mode:e="switch"}=r,[{color:t},o]=Pa.useContext(ht),{headerBackgroundColor:i}=be(n);return Pa.createElement(Vf,{onValueChange:o,value:t==="dark",mode:e,backgroundColor:i})}s();var ng=w(x());s();var tg=JSON.parse('{"publicContainer":"publicContainer_11UZS"}');function Ra(r){let{children:n,style:e}=r;return ng.createElement(K,{style:[tg.publicContainer,e]},n)}s();var jt=w(x()),_c=w(ie());s();function Dc(r){switch(Li(r)){case"lightest":return{backgroundColor:"rgba(59, 69, 78, 0.1)",textColor:Q.lightModeText.base};case"light":return{backgroundColor:"rgba(255, 255, 255, 0.6)",textColor:Q.lightModeText.base};case"semiLight":return{backgroundColor:"rgba(255, 255, 255, 0.55)",textColor:Q.lightModeText.base};case"medium":return{backgroundColor:"rgba(59, 69, 78, 0.25)",textColor:Q.darkModeText.base};case"semiDark":return{backgroundColor:"rgba(59, 69, 78, 0.3)",textColor:Q.darkModeText.base};case"dark":return{backgroundColor:"rgba(59, 69, 78, 0.5)",textColor:Q.darkModeText.base};case"darkest":default:return{backgroundColor:"rgba(255, 255, 255, 0.2)",textColor:Q.darkModeText.base}}}function rg(r){let[,{open:n}]=ci(),e=B();return jt.createElement($e,{icon:A.SearchPublic,onPress:()=>n(),accessibilityLabel:e("search"),...r})}function og(r){let{contentTheme:n,headerBackgroundColor:e}=r,[,{open:t}]=ci(),o=B(),{textColor:i}=Dc(e);return jt.createElement($e,{icon:A.SearchPublic,size:"medium",kind:n==="bold"?"default_bold":"default",alignItems:"start",onPress:()=>t(),style:[y.Padding.horizontal0],defaultTextStyle:[{color:i}],accessibilityLabel:o("search")})}function ka(r){let{headerBackgroundColor:n=Q.WHITE,hasAISearch:e=!1}=r,[,{open:t}]=ci(),o=B(),[,i]=H(oe),[,a]=H(jw),{backgroundColor:c,textColor:l}=Dc(n),u=o(e?"search_placeholder_ask":"search"),d=e?A.SearchOrAsk:A.SearchPublic;return jt.createElement(de.TouchableOpacity,{style:[{backgroundColor:c},a.searchBarButton,b.row,b.justifySpaceBetween,b.alignItemsCenter,y.Padding.left400,y.Padding.right200],activeStyle:a.searchBarButtonActive,accessibilityLabel:u,onPress:()=>t()},jt.createElement(_c.View,{style:[b.row,b.alignItemsCenter]},jt.createElement(d,{size:Y.ICON_300,style:[{color:l},y.Margin.right200]}),jt.createElement(de.Text.Child,{style:[i.Label,{color:l}],activeStyle:i.text},u)),jt.createElement(_c.View,null,jt.createElement(pu,{shortcut:ui.SEARCH_OPEN})))}var jw=j.create({searchBarButton:r=>({width:"100%",height:Y.BUTTON_L,borderRadius:r.radiuses.large,borderWidth:1,borderColor:"transparent"}),searchBarButtonActive:r=>({borderColor:r.colors.border.mid})});var{PAGE_BODY_DESKTOP_H_PADDING:$w,TOC_DESKTOP_WIDTH:Xw,PUBLIC_DESKTOP_HEADER_HEIGHT:Qw,PUBLIC_MOBILE_HEADER_HEIGHT:Zw}=kt,eC=L.createResponsiveComponent($e),tC=L.createResponsiveComponent(Zt);function ag(r){let{space:n}=r,e=ku(),{headerBackgroundColor:t,headerDisabled:o,headerLinksColor:i,headerLogoURL:a}=be(n),c=M.useMemo(()=>({...e,color:fn(t)}),[t,e]);return M.createElement(rr,{theme:c},o?M.createElement(L.View,{desktopStyle:"hidden",mobileStyle:"visible"},M.createElement(ig,{...r,headerDisabled:o,headerBackgroundColor:t,headerLinksColor:i,headerLogoURL:a})):M.createElement(ig,{...r,headerDisabled:o,headerBackgroundColor:t,headerLinksColor:i,headerLogoURL:a}))}function ig(r){let{space:n,headerDisabled:e,headerBackgroundColor:t,headerLogoURL:o,headerLinksColor:i,revision:a,collection:c,collectionSpaces:l,currentPage:u}=r,[,d]=H(aC[e?"none":ut(n)==="default"?"defaultWithBorder":"default"]),m=$r(Ht(co),M.useState(!1)),h=lr(u).tableOfContents,P=[Sn.searchWrapper,y.Padding.left600,y.Padding.right200],[S]=M.useContext(ht);return M.createElement(M.Fragment,null,M.createElement(tC,{tag:"header",desktopStyle:Sn.desktopHeight,mobileStyle:Sn.mobileHeight,style:[d.spaceHeader,b.row,b.alignItemsCenter,e?null:{backgroundColor:t}]},M.createElement(Ra,{style:[E.padding.horizontal200,E.flex.alignItemsCenter,jh.withStickyHeader]},h?M.createElement(eC,{desktopStyle:"hidden",mobileStyle:"visible",icon:A.Menu,style:y.Margin.right200,kind:"grey",rounded:!0,title:m.opened?"Hide Table of Contents":"Show Table of Contents",onPress:m.toggle}):null,M.createElement(va,{space:n,collection:c,headerBackgroundColor:t,headerLogoURL:o,mobileStyle:[Sn.autoWidth,y.Padding.left0,y.Padding.right400,b.shrink1,b.justifyStart,h?null:y.Margin.left200],desktopStyle:[Sn.autoWidth,y.Padding.left400,y.Padding.right600,b.justifyStart]}),l&&c?.publishingType==="variants"?M.createElement(L.View,{mobileStyle:"hidden",desktopStyle:"visible"},M.createElement(Tr,{key:"variants-picker",backgroundColor:t,currentPage:u,collection:c,revision:a,variants:l,currentVariant:n})):null,M.createElement(nC,{space:n,linkColor:i}),n.themeModeTogglable?M.createElement(L.View,{mobileStyle:"hidden",desktopStyle:"visible"},M.createElement(Yn,{content:n})):null,M.createElement(rr,{theme:S},M.createElement(L.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[P,Sn.searchBarContainer,b.flex1]},M.createElement(ka,{contentTheme:ut(n),headerBackgroundColor:t,hasAISearch:n.hasAISearch})),M.createElement(L.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[P]},M.createElement(og,{contentTheme:ut(n),headerBackgroundColor:t}))))),M.createElement(L.View,{mobileStyle:"visible",desktopStyle:"hidden"},M.createElement(rr,{theme:S},M.createElement(iC,{space:n}))))}function nC(r){let{space:n,linkColor:e}=r;return M.createElement(L.View,{style:[b.row,b.justifyEnd,b.alignItemsCenter,b.flex1,y.Padding.left400],mobileStyle:"hidden"},(n.headerLinks||[]).map((t,o,i)=>t.title?M.createElement(M.Suspense,{fallback:null},M.createElement(rC,{key:t.title,headerLink:t,linkColor:e})):null))}function rC(r){let{headerLink:n,linkColor:e}=r,t=de.useInteractiveState({hoverDelay:250}),o=de.useInteractiveState(),i=a=>M.createElement(To,{ref:a.ref,style:[y.Padding.horizontal400,e?{color:e}:null],title:n.title,contentRef:n.to,...a.events});return n.links&&n.links.length>0?M.createElement(Lu,{opened:t.hovered||o.hovered,wrapper:ti,anchor:({ref:a})=>i({ref:a,events:t.events})},M.createElement(ei,{kind:"menu",preferredAlignment:"start"},M.createElement(_t.View,{...o.events},M.createElement(ba,null,n.links.map((a,c,l)=>M.createElement(oC,{key:c,link:a,isLast:c===l.length-1})))))):i({})}function oC(r){let{link:n,isLast:e}=r,t=cr(n.to);return M.createElement(Sa,{kind:"link",title:n.title,isLast:e,onPress:o=>{o.nativeEvent.metaKey||o.nativeEvent.ctrlKey||(o.preventDefault(),t.open())}})}function iC(r){let{space:n}=r,[e,t]=M.useState(!1),[,{headerLinksMobile:o}]=H(sC),i=e?A.ChevronDown:A.ChevronRight;return!n.headerLinks||n.headerLinks.length===0?null:M.createElement(_t.View,{style:[Sn.headerLinksMobile,o,b.justifyCenter,y.Padding.all400]},M.createElement(_t.View,{style:[Sn.headerLinksMobileButton]},M.createElement($e,{size:"large",rightIcon:i,alignItems:"start",onPress:()=>t(a=>!a),style:[y.Padding.horizontal0]},"Links")),e?M.createElement(_t.View,null,n.headerLinks.map((a,c,l)=>a.title?M.createElement(M.Suspense,{fallback:null},M.createElement(sg,{space:n,link:a,isLast:c===l.length-1})):null)):null)}function sg(r){let{link:n,space:e,isLast:t}=r,[o,i]=M.useState(!1),a="links"in n?n.links||[]:[],c=o?A.ChevronDown:A.ChevronRight,l=ut(e);return M.createElement(_t.View,{style:[b.column]},M.createElement(_t.View,{style:[b.row,b.alignItemsCenter]},M.createElement(To,{style:[y.Padding.top200,t?null:y.Padding.bottom200],kind:l==="bold"?"bold":"default",title:n.title,contentRef:n.to}),a.length>0?M.createElement($e,{size:"large",kind:"link",rightIcon:c,alignItems:"start",onPress:()=>i(u=>!u),style:[y.Padding.horizontal0]}):null),o?M.createElement(_t.View,{style:[y.Margin.left200,y.Margin.bottom200]},a.map((u,d,m)=>M.createElement(sg,{key:d,space:e,link:u,isLast:d===m.length-1}))):null)}var aC={none:j.create({spaceHeader:r=>({borderBottomWidth:1,borderBottomColor:r.colors.border.mid,zIndex:1})}),default:j.create({spaceHeader:{zIndex:1,position:"sticky",top:0}}),defaultWithBorder:j.create({spaceHeader:r=>({borderBottomWidth:1,borderBottomColor:r.colors.border.mid,zIndex:1,position:"sticky",top:0})})},sC=j.create({headerLinksMobile:r=>({backgroundColor:r.colors.background.main,borderBottomWidth:1,borderBottomColor:r.colors.border.main})}),Sn=_t.StyleSheet.create({searchWrapper:{marginLeft:"auto"},searchBarContainer:{maxWidth:233},autoWidth:{width:"auto"},tocDesktop:{width:Xw},headerLinks:{paddingHorizontal:$w-y.medium},headerLinksMobile:{minHeight:Y.M},headerLinksMobileButton:{marginRight:"auto"},mobileHeight:{height:Zw},desktopHeight:{height:Qw}});s();var Se=w(x());s();var Je=w(x()),Ia=w(ie());s();var gt=w(x()),wn=w(ie());function cg(r){let{space:n,revision:e,page:t,analyticsContext:o}=r,i=cu(),[,a]=H(oe),c=B(),[{result:l,error:u}]=yd([eu(n.key,t.id,i)]);if(u)return null;let d=m=>{m!==l?.rating&&(z({...o,type:"public_content_page_feedback_post",rating:m}),rl(g=>{tu(g,{space:n.key,page:t.id,revision:e.id,visitorId:i,rating:m,previousRating:l?.rating})}))};return gt.createElement(wn.View,{style:[b.row,b.alignItemsCenter]},gt.createElement(wn.View,null,gt.createElement(wn.Text,{style:[a.GroupTitle,a.textMuted]},c("was_it_helpful"))),gt.createElement(wn.View,{style:[b.row,b.alignItemsCenter]},gt.createElement(Mc,{tooltip:c("poor_content"),active:l?.rating==="bad",rating:"bad",onPress:d}),gt.createElement(Mc,{tooltip:c("ok_content"),active:l?.rating==="ok",rating:"ok",onPress:d}),gt.createElement(Mc,{tooltip:c("excellent_content"),active:l?.rating==="good",rating:"good",onPress:d})))}function Mc(r){let{active:n,tooltip:e,rating:t,onPress:o}=r;return gt.createElement(fu,{label:e},gt.createElement(wn.TouchableOpacity,{onPress:()=>o(t),style:[y.Margin.left200],accessibilityLabel:e},gt.createElement(Wd,{active:n,interactive:!0,rating:t,size:Y.BUTTON_S})))}s();var yt=w(x()),xr=w(ie()),lg=w(Uf());var Lc=28,cC=de.createInteractiveComponent(du);function Er(r){return yt.createElement(In,null,yt.createElement(lC,{...r}))}function lC(r){let{space:n,floating:e}=r,[t,o]=H(uC),[,i]=H(oe),a=B(),c=new URLSearchParams({utm_source:"content",utm_medium:"trademark",utm_campaign:n.key}),l=`https://${Qt.homepage.domain}/?${c.toString()}`,u=()=>{z(ge(n,{type:"public_content_click_trademark"}))};return yt.createElement(xr.View,{style:e&&o.floatingWrapper},e?yt.createElement(lg.default,{colors:[`${t.colors.background.main}00`,t.colors.background.main],style:o.floatingTopGradient}):null,yt.createElement(xr.View,{style:e&&[y.Padding.horizontal400,y.Padding.bottom400,o.floatingBackground]},yt.createElement(de.TouchableOpacity,{style:[b.row,b.alignItemsCenter,...e?[o.trademarkFloating,y.Padding.vertical400,y.Padding.horizontal400]:[o.tradeMarkDefault]],activeStyle:i.primary,onPress:u,href:l,target:"_blank"},yt.createElement(cC,{size:Lc,style:i.textMuted,activeStyle:i.primary}),yt.createElement(xr.View,{style:[b.flex1,y.Padding.left400]},yt.createElement(de.Text.Child,{style:[i.Label,i.textMuted],activeStyle:i.primary},a("powered_by",yt.createElement(xr.Text,{style:i.Bold},"GitBook")))))))}var uC=j.create({floatingWrapper:{position:"absolute",bottom:0,zIndex:1,width:"100%"},floatingTopGradient:{height:y.medium},floatingBackground:r=>({backgroundColor:r.colors.background.main}),tradeMarkDefault:r=>({backgroundColor:"transparent"}),trademarkFloating:r=>({backgroundColor:r.colors.background.standout,borderRadius:r.radiuses.xlarge})});function ug(r){let{space:n,revision:e,page:t,analyticsContext:o}=r,[,i]=H(oe),[,a]=H(pC),c=B(),l=Vl(t.edits),u=Yo(t),d=!!l,m=n.hasPublicFeedback,g=!n.hideTrademark&&(u==="editorial"||u==="landing");if(!d&&!m)return null;let h=Je.createElement(Nd,null,Je.createElement(Je.Suspense,{fallback:null},Je.createElement(cg,{space:n,revision:e,page:t,analyticsContext:o})));return Je.createElement(Ia.View,{style:[y.Padding.top600,a.footer]},Je.createElement(L.View,{tabletStyle:b.column,desktopStyle:b.row,style:[b.alignItemsCenter,b.justifySpaceBetween]},d?Je.createElement(L.View,{tabletStyle:y.Margin.bottom400,style:g?[]:[b.flex1]},Je.createElement(Ia.Text,{style:[i.textMuted,i.Label]},c("last_modified",Je.createElement(Wu,{value:new Date(l.updatedAt),onlyDate:!1})))):null,g?Je.createElement(Er,{space:n,floating:!1}):null,m?Je.createElement(L.View,{tabletStyle:g?"hidden":"visible",desktopStyle:"visible"},h):null),g&&m?Je.createElement(L.View,{tabletStyle:"visible",desktopStyle:"hidden",style:[b.row,b.flex1,b.justifyCenter,y.Margin.top600]},h):null)}var pC=j.create({footer:r=>({borderTopColor:r.colors.border.mid,borderTopWidth:1})});s();var vt=w(x()),Ar=w(ie());var fC=de.createInteractiveComponent(Uu),mC={[wl]:null,[Cl]:y.Margin.left200,[Rl]:null},dg=vt.memo(function(n){let{sections:e,activeSection:t}=n,[,o]=H(oe),[,i]=H(pg),a=B();return vt.createElement(Ar.View,{style:[i.pageOutline]},vt.createElement(Ar.View,{style:[b.row,b.alignItemsCenter,y.Padding.horizontal600,y.Margin.bottom200]},vt.createElement(Ar.Text,{style:[o.GroupTitle,o.textMuted,o.Bold]},a("outline"))),e.map(c=>c.type===null||c.type===Pl?null:vt.createElement(hC,{key:c.key,section:c,active:t===c.key})))});function hC(r){let{section:n,active:e}=r,[,t]=H(oe),[,o]=H(pg),{navigateToHash:i}=rt();return vt.createElement(de.TouchableOpacity,{style:[b.row,y.Padding.horizontal600,o.sectionItem,e&&o.sectionItemActive],onPress:()=>{i(n.anchor)}},n.tag?vt.createElement(Zo,{backgroundColor:Ed[n.tag]||Q.orange.base,style:[o.sectionTag,y.Margin.right100,b.alignSelfCenter]},vt.createElement(Ar.Text,{style:[t.textInsideColor,t.MobileCaption,t.Bold,t.Uppercase]},n.tag)):null,vt.createElement(fC.Child,{style:[t.Label,t.textMid,n.type&&mC[n.type],...e?[t.primary,t.Medium]:[]],hoverStyle:t.primary},n.title))}var pg=j.create({pageOutline:r=>({maxWidth:kt.MAX_PAGE_OUTLINE_WIDTH}),sectionItem:{marginTop:y.xsmall,marginBottom:y.xsmall,marginLeft:-1,borderLeftWidth:3,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:r=>({borderLeftColor:r.colors.primary.main}),sectionTag:{borderRadius:Y.XXS,height:Y.XXS,paddingHorizontal:y.small,justifyContent:"center"}});s();var Cn=w(x());function fg(r){let{space:n,page:e}=r,[{color:t},o]=Cn.useContext(ht),i=B(),{headerDisabled:a}=be(n),{tableOfContents:c}=lr(e),l=!c&&a,u=[l?{key:"pageRead.switchTheme",icon:t==="light"?A.ThemeDark:A.ThemeLight,title:i(t==="light"?"switch_to_dark_theme":"switch_to_light_theme"),trigger:o}:null].filter(Jn),[d,m]=Fd(r,u);return Cn.createElement(Cn.Fragment,null,d,l&&Cn.createElement(rg,{kind:"grey",size:"large",title:"Search",rounded:!0}),Cn.createElement(Ju,{palette:m,icon:A.MoreVertical,kind:"grey",size:"large",title:"Page actions",rounded:!0,testID:"pageToolbar.paletteButton"}))}s();var Or=w(x());s();var bt=w(x()),Oa=w(ie());s();var gC=750,yC=y.xxlarge,vC=gC+2*yC,Hc=300,bC=220;function mg(r=0){return r+Hc+vC+bC}s();var Eo=w(x()),Ta=w(ie());s();var Ee=w(x()),xo=w(ie());function Nc(r){return Ee.createElement(Ee.Suspense,{fallback:Ee.createElement(hg,{...r})},Ee.createElement(SC,{...r}))}function SC(r){let{treePage:n}=r,{page:e}=n,t=cr(e.type==="link"?e.target:void 0);return Ee.createElement(hg,{...r,contentRef:t})}function hg(r){let{revision:n,treePage:e,parent:t,currentPage:o,contentRef:i,isLastPage:a}=r,{page:c}=e,{getNavigationHref:l,navigateToPage:u}=kd(),d=o?o.id:null,m=d===c.id,g=!!d&&jl(n,c.id,d),[h,P]=Ee.useState(g),[,S]=H(wC),I=C=>{C.isDefaultPrevented()||C.nativeEvent.metaKey||C.nativeEvent.ctrlKey||(C.preventDefault(),c.type==="document"?u(n,c.id):c.type==="link"&&i?.open())};return Ee.useEffect(()=>{g&&P(!0)},[g]),Ee.createElement(xo.View,{style:[c.type==="group"&&y.Margin.vertical400]},Ee.createElement($h,{isLast:a,kind:c.type==="group"?"group":!t||t.type==="group"?"primary":"secondary",icon:c.emoji?nr(ni,{code:c.emoji}):void 0,rightIcon:c.type==="link"?i?i.secondaryIcon:Xo:void 0,active:m,expanded:h,onPress:c.type==="group"?void 0:I,href:(()=>c.type==="link"?i?.href:l(n,c.id))(),onChevronPress:e.pages.length>0&&c.type==="document"?C=>{C.preventDefault(),P(O=>!O)}:void 0},c.title),(h||c.type==="group")&&e.pages.length>0?Ee.createElement(xo.View,{style:[S.tocItemChildren,...c.type==="group"?[y.Margin.left0]:[y.Margin.left200,y.Margin.top100,y.Margin.bottom200]]},e.pages.map((C,O)=>Ee.createElement(xo.View,{style:c.type==="group"?null:y.Margin.left200,key:C.renderKey},Ee.createElement(Nc,{...r,treePage:C,isLastPage:O===e.pages.length-1,parent:c}))),c.type==="group"?null:Ee.createElement(xo.View,{style:S.tocItemChildrenLine})):null)}var wC=j.create({tocItemChildren:{position:"relative"},tocItemChildrenLine:r=>({position:"absolute",top:0,bottom:0,left:0,width:1,backgroundColor:r.colors.border.main})});function xa(r){let{showingTrademark:n,revision:e}=r,t=Eo.useMemo(()=>ql(e.pages,e.rootPages),[e]);return Eo.createElement(Ta.ScrollView,{style:b.flex1,contentContainerStyle:[y.Padding.vertical400,n?CC.scrollviewWithTrademark:null]},t.map((o,i)=>Eo.createElement(Nc,{key:o.renderKey,...r,treePage:o,isLastPage:i===t.length-1})))}var CC=Ta.StyleSheet.create({scrollviewWithTrademark:{paddingBottom:y.medium+Lc+2*y.medium}});s();var Ne=w(x()),Ea=w(ie());function Aa(r){let{space:n,collection:e,collectionSpaces:t,currentPage:o,revision:i}=r,[,a]=H(gg),{headerBackgroundColor:c,headerLogoURL:l,headerDisabled:u}=be(n),d=t&&e?.publishingType==="variants"?Ne.createElement(Tr,{key:"variants-picker",currentVariant:n,collection:e,variants:t,revision:i,currentPage:o}):null;return Ne.createElement(Ne.Fragment,null,u?Ne.createElement(Ne.Fragment,null,Ne.createElement(PC,{key:"space-header",space:n,collection:e,headerBackgroundColor:c,headerLogoURL:l,variantsSwitcher:d}),Ne.createElement(L.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[a.searchBarSection,b.row,b.justifySpaceBetween,b.alignItemsCenter,y.Margin.right400]},Ne.createElement(Ea.View,{style:[b.flex1,b.row,y.Margin.vertical400]},Ne.createElement(ka,{key:"search-bar",headerBackgroundColor:c,hasAISearch:n.hasAISearch})),n.themeModeTogglable?Ne.createElement(Ea.View,{style:[y.Margin.left400]},Ne.createElement(Yn,{content:n,mode:"button"})):null)):null)}function PC(r){let{space:n,collection:e,headerBackgroundColor:t,headerLogoURL:o,variantsSwitcher:i}=r,[,a]=H(gg);return Ne.createElement(L.View,{style:[a.spaceTitleWrapper,b.row,b.justifyCenter,b.alignItemsCenter],mobileStyle:"hidden",desktopStyle:"visible"},Ne.createElement(va,{space:n,collection:e,headerBackgroundColor:t,headerLogoURL:o,desktopStyle:b.flex1}),Ne.createElement(Ea.View,{style:[b.alignSelfCenter,y.Margin.horizontal200]},i))}var gg=j.create({searchBarSection:r=>({borderColor:r.colors.border.mid,borderBottomWidth:1}),selectedTab:r=>({borderLeftColor:r.colors.primary.main,borderLeftWidth:2}),hoverTab:r=>({backgroundColor:r.colors.background.standout}),tab:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:0,borderColor:"transparent",borderLeftWidth:2,height:Y.BUTTON_M,lineHeight:Y.BUTTON_M,borderRadius:0,paddingHorizontal:y.medium},mainBadge:{fontFamily:mu,fontSize:hu.xxsmall,lineHeight:Y.BUTTON_M,...gu.Bold,textTransform:"uppercase",letterSpacing:1},spaceTitleWrapper:r=>({height:Y.L}),variantScrollView:{flexGrow:0,flexShrink:1,height:"fit-content"}});var{PUBLIC_DESKTOP_HEADER_HEIGHT:RC}=kt;function yg(r){let{space:n}=r,e=B(),{headerDisabled:t}=be(n),[,o]=H(kC[t?"none":"default"]),{desktopSidebarWidth:i}=bt.useContext(wd),a=bt.useMemo(()=>({[mg(i)]:"visible"}),[i]),c=!n.hideTrademark;return bt.createElement(L.View,{testID:"page.desktopTableOfContents",mobileStyle:"hidden",desktopStyle:"visible",customBreakpointsStyles:a,style:[o.tocDesktopWrapper,b.row,b.justifyEnd]},bt.createElement(Zt,{tag:"nav",accessibilityLabel:e("table_of_contents"),style:[IC.tocDesktop,b.column]},bt.createElement(Oa.View,{style:[b.flex1,y.Padding.left600]},bt.createElement(Aa,{...r}),bt.createElement(xa,{...r,showingTrademark:c})),c?bt.createElement(Er,{floating:!0,space:n}):null))}var kC={none:j.create({tocDesktopWrapper:r=>({position:"sticky",top:0,height:"100vh",overflowY:"auto",alignSelf:"flex-start",backgroundColor:r.colors.background.main,borderRightColor:r.colors.border.mid,borderRightWidth:1})}),default:j.create({tocDesktopWrapper:r=>({position:"sticky",top:y.xxlarge,height:`calc(100vh - ${RC}px)`,overflowY:"auto",alignSelf:"flex-start",backgroundColor:r.colors.background.main,borderRightColor:r.colors.border.mid,borderRightWidth:1})})},IC=Oa.StyleSheet.create({tocDesktop:{width:Hc}});s();var ue=w(x()),at=w(ie());var TC=L.createResponsiveComponent(at.Animated.View),xC=L.createResponsiveComponent(at.Animated.createAnimatedComponent(at.TouchableOpacity));function bg(r){let{currentPage:n,space:e,collection:t,collectionSpaces:o,revision:i}=r,a=B(),c=$r(Ht(co),ue.useState(!1)),[,l]=H(oe),{sidebarMobileLeft:u,showOverlay:d}=Qu(c),[m,g]=H(Sg);ue.useEffect(()=>{c.close()},[n?.id]);let h=!e.hideTrademark,P=o&&t?.publishingType==="variants"?ue.createElement(Tr,{key:"variants-picker",currentVariant:e,collection:t,variants:o,revision:i,currentPage:n}):null,S=!!e.themeModeTogglable,I=S?ue.createElement(at.View,{style:[y.Margin.right400]},ue.createElement(Yn,{content:e,mode:"button"})):null;return ue.createElement(tn,null,ue.createElement(TC,{style:[g.sidebar,{left:u}],mobileStyle:"visible",desktopStyle:"hidden"},ue.createElement(Zt,{tag:"nav",accessibilityLabel:a("table_of_contents"),style:[b.column,b.flex1]},ue.createElement(at.View,{style:b.flex1},ue.createElement(EC,{key:"mobile-closing-bar",switcher:P??I}),S&&P?ue.createElement(at.View,{style:[b.row,b.justifySpaceBetween,b.alignItemsCenter,y.Padding.vertical200,y.Padding.horizontal400,g.mobileChangeAppearance]},ue.createElement(at.Text,{style:[l.Label,l.text]},a("theme_change_appearance")),ue.createElement(Yn,{content:e})):null,ue.createElement(Aa,{...r}),ue.createElement(at.View,{style:[y.Padding.left400,b.flex1,g.sidebarWrapper]},ue.createElement(xa,{...r,showingTrademark:h}))),h?ue.createElement(Er,{floating:!0,space:e}):null)),ue.createElement(xC,{style:[g.screenOverlay,{backgroundColor:u.interpolate({inputRange:[-oi.WIDTH.MOBILE,0],outputRange:[m.colors.backdrop.transparent,m.colors.backdrop.background]})}],mobileStyle:d?"visible":"hidden",desktopStyle:"hidden",onPress:c.closeMobile}))}function EC(r){let[,n]=H(Sg),e=$r(Ht(co),ue.useState(!1));return ue.createElement(L.View,{style:[n.mobileClosingBar,y.Padding.horizontal200,b.justifySpaceBetween,b.alignItemsCenter,b.row],mobileStyle:"visible",desktopStyle:"hidden"},ue.createElement(Ce,{leadingIcon:A.X.CSS,size:"large",kind:"blank",onPress:()=>e.closeMobile(),label:"Close"}),r.switcher)}var vg=10,Sg=j.create({sidebar:r=>({backgroundColor:r.colors.background.main,width:oi.WIDTH.MOBILE,maxWidth:"100%",height:"100%",flexDirection:"row",position:"fixed",top:0,bottom:0,zIndex:vg}),sidebarWrapper:r=>({borderRightWidth:1,borderRightColor:r.colors.border.mid}),sidebarCloseButton:{position:"absolute",width:Y.BUTTON_M,height:Y.BUTTON_M,top:(Y.M-Y.BUTTON_M)/2,left:oi.WIDTH.MOBILE+Y.BUTTON_M/2},screenOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:vg-1},mobileClosingBar:r=>({height:Y.L,borderBottomWidth:1,borderBottomColor:r.colors.border.mid,backgroundColor:r.colors.background.main}),mobileChangeAppearance:r=>({borderBottomWidth:1,borderColor:r.colors.border.mid})});function wg(r){return Or.createElement(Or.Fragment,null,Or.createElement(yg,{...r}),Or.createElement(bg,{...r}))}var{PUBLIC_DESKTOP_HEADER_HEIGHT:AC}=kt;function Cg(r){let{space:n,revision:e,screen:t,analyticsContext:o,collection:i,collectionSpaces:a,assetHostname:c,currentPage:l}=r,u=B(),[d,m]=H(OC);Kf(n);let{headerDisabled:g}=be(n),h=lr(l),P=Df();pt(C=>{C.writeAsync([{type:"meta",name:"description",content:l&&l.description?l.description:""},{type:"meta",name:"og:description",content:l&&l.description?l.description:""},{type:"meta",name:"og:image",content:n.socialPreviewURL?Xr(n.socialPreviewURL,{height:640,width:1280,fit:"contain"}):_C(n,e,l)},{type:"meta",name:"twitter:card",content:"summary_large_image"}]),n.visibility==="in-collection"?(C.setTitle(l?l.title:u("page_not_found"),i?.publishedTitle||i?.title||Ut),C.writeAsync([{type:"meta",name:"robots",content:i?.visibility!=="public"?"noindex, nofollow":"index"}])):(C.setTitle(l?l.title:u("page_not_found"),n.publishedTitle||n.title||Ut),C.writeAsync([{type:"meta",name:"robots",content:n.visibility!=="public"?"noindex, nofollow":"index"}]))}),li(l?su(n,l,{screen:"space",visibility:n.visibility,pageLayout:Yo(l),diffMode:!1}):ge(n,{screen:"space_page_notfound",visibility:n.visibility}),[n.key,l?.id]),rm(n,l?.id??null);let S=!!h.tableOfContents,I=!!h.outline;if(!l&&t.page){let[C]=md([ou(n.key,t.page)]);if(C&&e.pages[C.page])return Se.default.createElement(Id,{to:er(e,C.page)})}return Se.default.createElement(Se.default.Fragment,null,Se.default.createElement(MC,{space:i||n,assetHostname:c}),Se.default.createElement(L.View,{style:[b.flex1,m.spacePageContainerBg],mobileStyle:b.column,desktopStyle:b.row},Se.default.createElement(Ra,null,S?Se.default.createElement(wg,{space:n,revision:e,currentPage:l?.type==="document"?l:null,analyticsContext:o,collection:i,collectionSpaces:a}):null,Se.default.createElement(Zo,{style:[m.spacePageBody],backgroundColor:d.colors.background.main},Se.default.createElement(Se.default.Suspense,{fallback:Se.default.createElement(Vd,{withPageOutline:l?.layout!=="landing"})},l&&l.type==="document"?Se.default.createElement(Ud,{screen:t,key:DC(t,e,l),space:n,changeRequest:void 0,revision:e,page:l,scrollRef:P,readOnly:!0,withComments:!1,withToC:S,analyticsContext:o,outline:I?dg:void 0,toolbar:fg,footer:Se.default.createElement(ug,{space:n,revision:e,page:l,analyticsContext:o}),sideColumnStickyTop:y.large+(g?0:AC)}):Se.default.createElement(dm,{statusCode:404},Se.default.createElement(jr,{title:u("page_not_found"),action:Se.default.createElement(ud,{kind:"secondary",size:"medium",to:{screen:{type:"space",space:n.key,page:""}},label:u("back_to_home")})},u("page_not_found_long"))))))))}var OC=j.create({spacePageContainerBg:r=>({backgroundColor:r.colors.background.main}),spacePageBody:{flex:1}});function DC(r,n,e){let t=r.space;return t+=`/${r.changeRequest||"main"}`,t+=`/${n.conflicts?"conflicts":"normal"}`,t+=`/${e.id}`,r.diff&&(t+="/diff"),r.revision&&(t+="/revision"),t}function _C(r,n,e){let t=e&&n.rootPages[0]!==e.id?`/page/${e.id}`:"",{primaryColor:o,headerLogoURL:i}=Wi(r),a=ut(r),c=`color=${encodeURIComponent(o||"")}&logo=${encodeURIComponent(Bo(i||r.iconURL||""))}&theme=${encodeURIComponent(a||"")}`;return`${Ho()}/share/space/thumbnail/${r.key}${t}.png?${c}`}function MC(r){let{space:n,assetHostname:e}=r,t=ru(n,"public-content"),[o]=H(),[i,a]=Se.default.useState(t.iconURL||(t.emoji?`${e}${Gu(t.emoji)}`:null));return Se.default.useEffect(()=>{if(i)return;let c=192,l=document.createElement("canvas"),u=l.getContext("2d");if(!u)return;l.width=c,l.height=c,u.fillStyle=o.colors.background.main,u.fillRect(0,0,c,c);let d=.7;u.fillStyle=o.colors.text.main,u.font=`400 ${c*d}px gitbook-content-font`,u.textAlign="center",u.textBaseline="middle",u.fillText(n.title.slice(0,1),c/2,c/2),a(l.toDataURL("image/png"))},[n.title,a]),pt(c=>{c.writeAsync([{type:"link",rel:"icon",href:i?Bo(i):`${e}/public/images/icon-512.png`},{type:"link",rel:"apple-touch-icon",href:i?Bo(i):`${e}/public/images/icon-512.png`}])}),null}s();var W=w(x()),We=w(ie());var LC=L.createResponsiveComponent(Zt),Pg=200,HC=4*(Pg+y.small);function Rg(r){let{space:n}=r,[,e]=H(oe),[,t]=H(UC),o=n.footer,{footerLogoURL:i}=be(n);return W.createElement(W.Fragment,null,o?W.createElement(LC,{tag:"footer",style:[b.alignItemsCenter,t.footer]},W.createElement(L.View,{desktopStyle:[Mt.desktopContainer]},W.createElement(L.View,{desktopStyle:b.row,mobileStyle:b.column},i?W.createElement(L.View,{style:[b.row,b.alignItemsStart,y.Padding.top700,o?.copyright?null:y.Padding.bottom700],desktopStyle:y.Margin.horizontal900,mobileStyle:y.Margin.horizontal600},W.createElement(L.View,{desktopStyle:"visible",mobileStyle:"hidden"},W.createElement(or,{source:{uri:i},style:Mt.footerImageDesktop,loading:"lazy"})),W.createElement(L.View,{desktopStyle:"hidden",mobileStyle:"visible"},W.createElement(We.View,{style:y.Margin.left600},W.createElement(or,{source:{uri:i},style:Mt.footerImageMobile,loading:"lazy"})))):null,o?.linkGroups?W.createElement(L.View,{style:[y.Padding.top700,i?b.alignItemsStart:b.alignItemsCenter,b.flex1,o?.copyright?null:y.Padding.bottom700],mobileStyle:b.alignItemsStart,tabletStyle:y.Padding.left600},W.createElement(L.View,{mobileStyle:"hidden",tabletStyle:"hidden",desktopStyle:o.linkGroups.length<3&&!i?"visible":"hidden"},W.createElement(NC,{linkGroups:o.linkGroups})),W.createElement(L.View,{mobileStyle:"visible",tabletStyle:"visible",desktopStyle:o.linkGroups.length>=3||i?"visible":"hidden"},W.createElement(BC,{linkGroups:o.linkGroups}))):null),o?.copyright?W.createElement(L.View,{style:[b.flex1,y.Padding.vertical700]},W.createElement(We.Text,{style:[Mt.copyright,e.textMuted]},o?.copyright)):null)):null)}function NC(r){let{linkGroups:n}=r,[,e]=H(oe),t=[],o=n?.map(({title:i})=>i);return n?.forEach(i=>{i?.links?.forEach((a,c)=>{if(t[c]===void 0)return t[c]=[a];t[c].push(a)})}),W.createElement(We.View,{style:[b.flex1,b.justifyStart,b.row]},W.createElement(We.View,{style:Mt.linkGroupColumnDesktop},W.createElement(We.View,{style:[b.flex1]},o?.map((i,a)=>W.createElement(We.View,{key:i,style:[b.alignItemsStart,a>0?y.Margin.top200:null]},W.createElement(We.Text,{style:[e.text,e.Heading3]},i))))),t.map((i,a)=>W.createElement(We.View,{key:a,style:Mt.linkGroupColumnDesktop},W.createElement(kg,{links:i,renderMode:"horizontal"}))))}function BC(r){let{linkGroups:n}=r,[,e]=H(oe);return W.createElement(L.View,{style:[b.flex1,b.justifyStart,b.row],desktopStyle:[Mt.linkGroupColumnsDesktop,b.row,b.wrap,b.shrink1],mobileStyle:b.column},n.map((t,o)=>W.createElement(L.View,{key:o,desktopStyle:[Mt.linkGroupColumnDesktop,y.Margin.top700],mobileStyle:[Mt.linkGroupColumnMobile,y.Margin.top700,y.Margin.left600]},W.createElement(We.View,{style:b.alignItemsStart},W.createElement(We.Text,{style:[e.text,e.Heading3]},t.title)),W.createElement(kg,{links:t.links,renderMode:"vertical"}))))}function kg(r){let{links:n,renderMode:e}=r,[,t]=H(oe);return W.createElement(L.View,{style:[b.alignItemsStart,b.flex1,b.column],desktopStyle:e==="vertical"?y.Margin.top600:null,mobileStyle:y.Margin.top200},(n||[]).map((o,i)=>{let a=i===n.length-1;return o.title?W.createElement(W.Suspense,{fallback:null,key:o.title},W.createElement(We.View,{style:[Mt.referenceLink,e==="horizontal"&&i>0?y.Margin.top200:null]},W.createElement(To,{title:o.title,contentRef:o.to,style:[t.textMuted,t.Medium,e==="horizontal"?null:[y.Padding.top200,a?null:y.Padding.bottom200]]}))):null}))}var UC=j.create({footer:r=>({backgroundColor:r.colors.background.mid})}),Mt=We.StyleSheet.create({linkGroupColumnsDesktop:{maxWidth:HC,marginTop:-y.xlarge},linkGroupColumnDesktop:{width:Pg,marginLeft:y.small,paddingRight:y.xlarge},linkGroupColumnMobile:{width:"auto"},desktopContainer:{maxWidth:1280,width:"100%"},copyright:{textAlign:"center"},mobileHeight:{height:"auto"},referenceLink:{maxWidth:"100%"},footerImageDesktop:{maxHeight:150,maxWidth:150,objectFit:"contain"},footerImageMobile:{maxHeight:30,maxWidth:30,objectFit:"contain"}});s();var Pe=w(x());s();var Ae=w(x());s();var Bc=w(x());function Ig(r){let{query:n,space:e,onUpdateQuery:t,onSubmitAIQuery:o,allowEnterToOpen:i}=r,a=()=>{t("")};return n.query?Bc.createElement(Vh,{target:{space:e},query:n,onAnswerLoaded:a,onSubmitQuery:o}):Bc.createElement(Kh,{target:{space:e},onSubmitAIQuery:o,allowEnterToOpen:i})}s();var Uc=w(x());s();var $t=w(x());function Tg(r){let{space:n,onUpdateQuery:e,onSubmitAIQuery:t}=r,o=B(),i=xh(),a=ha(),c=ma(n.hasAISearch?{space:n}:null),l=$t.useCallback(g=>{switch(g.type){case"recent-search":return{icon:A.Search.CSS,title:g.query,action:o("search")};case"recent-question":return{icon:A.SearchOrAsk.CSS,title:g.question,action:o("search_ask")};case"recommended-question":return{icon:A.SearchOrAsk.CSS,title:g.question,action:o("search_ask")};default:re(g)}},[o]),u=$t.useCallback(g=>{switch(g){case"recent-search":return{title:o("search_blankslate_recent_searches")};case"recent-question":return{title:o("search_blankslate_recent_questions")};case"recommended-question":return{title:o("search_blankslate_recommended_questions")};default:return}},[o]),d=(g,h)=>{switch(g.type){case"recent-search":{e(g.query),z(ge(n,{type:"search_pick_suggestion_recent_search",suggestionIndex:h}));break}case"recent-question":{t(g.question),z(ge(n,{type:"ai_search_pick_suggestion_recent_search",suggestionIndex:h}));break}case"recommended-question":z(ge(n,{type:"search_pick_suggestion_question"})),t(g.question);break;default:re(g)}},m=$t.useMemo(()=>{let g=n.hasAISearch?a.map(P=>({type:"recent-question",question:P})):[],h=i.filter(P=>!a.includes(P)).map(P=>({type:"recent-search",query:P}));return[...g,...h,...c]},[i,a,c,n.hasAISearch]);return m.length===0?$t.createElement(Vt,null,o("search_blankslate")):$t.createElement(K,{style:[E.flex.flex1,E.flex.column]},$t.createElement(nn,{data:m,getKey:VC,renderItem:l,renderGroup:u,groupItem:FC,getGroupKey:WC,onOpen:d,style:[E.padding.horizontal400,E.padding.bottom400]}))}function VC(r){switch(r.type){case"recent-search":return`recent-search:${r.query}`;case"recent-question":return`recent-question:${r.question}`;case"recommended-question":return`recommended-question:${r.question}`;default:re(r)}}function FC(r){return r.type}function WC(r){return r}s();var Xt=w(x());function xg(r){let{space:n,hasAI:e,onSubmitAIQuery:t=()=>{}}=r,o=Xt.useDeferredValue(r.query),i=B(),{navigate:a}=rt(),c=qh(o,t,e),l=Kd({query:o,types:["pages","sections"],hitsPerPage:30,analyticsTags:[{type:"space",space:n.key}]}),u=c.suggestion?[c.suggestion,...l]:l,d=Xt.useCallback(h=>{if(h.type==="ask-gitbook")return c.onRenderSuggestion(h);switch(h.type){case"page":return{title:h.title,icon:A.Page.CSS,action:i("search_goto_page")};case"section":return{title:h.title,body:h.body,icon:A.Hash.CSS,nested:!0,action:i("search_goto_section")};default:throw new Error("Unexpected item type")}},[i,o,c.onRenderSuggestion]),m=Xt.useCallback(h=>{if(h)return{title:h?.page?.title}},[]),g=Xt.useCallback((h,P)=>{if(h.type==="ask-gitbook")return c.onOpenSuggestion(h);if(!(h.type!=="page"&&h.type!=="section"))switch(z(ge(n,{type:"public_content_search_open_result",resultType:h.type,resultIndex:P})),h.type){case"page":a({screen:{type:"space",space:h.space.key,page:h.path,hash:void 0,query:void 0}});break;case"section":a({screen:{type:"space",space:h.space.key,page:h.path,hash:h.anchor,query:void 0}});break;default:re(h)}},[o,c.onOpenSuggestion]);return u.length===0?Xt.createElement(Vt,null,i("search_blankslate_query",o)):Xt.createElement(nn,{data:u,getKey:KC,renderItem:d,renderGroup:m,groupItem:zC,getGroupKey:YC,onOpen:g,style:[E.padding.horizontal400,E.padding.bottom400]})}function KC(r){return r.key}function YC(r){return r?r.type==="ask-gitbook"?r.type:r.page.id:""}function zC(r){return r.type==="ask-gitbook"?{type:"ask-gitbook"}:r.groups.find(n=>n.type==="page")}function Eg(r){let{space:n,query:e,onUpdateQuery:t,onSubmitAIQuery:o}=r;return Eh(e),Oh(e,{space:n}),e?Uc.createElement(xg,{space:n,query:e,hasAI:n.hasAISearch,onSubmitAIQuery:o}):Uc.createElement(Tg,{space:n,onUpdateQuery:t,onSubmitAIQuery:o})}function Ag(r){let{space:n}=r,[e,{open:t,close:o,setQuery:i}]=pd();return di({[ui.SEARCH_OPEN]:()=>{t()},"/":()=>{t()}},["all"]),Ae.createElement(xu,null,typeof e=="string"?Ae.createElement(qC,{space:n,query:e,setQuery:i,close:o}):null)}function qC(r){let{space:n,query:e,setQuery:t,close:o}=r,i=B(),a=Ae.useRef(null),[c,l]=zh(),[u,d]=Ae.useState(!1);li({screen:"search",searchType:"search"},[]);let m=Ae.useCallback(P=>{t(P),a.current?.focus()},[t,a]),g=P=>{d(!1),t(P)},h=P=>{n.hasAISearch&&(d(!0),t(P),l(P),a.current?.focus(),z(ge(n,{type:"ai_search_submit",query:P,trigger:"press_enter"})))};return Ae.createElement(Zu,{ref:a,inputIcon:n.hasAISearch?A.SearchOrAsk.CSS:A.Search.CSS,rightButton:n.hasAISearch?Ae.createElement(K,{style:[E.flex.row,E.flex.alignItemsCenter]},u&&e&&e!==c.query?Ae.createElement(K,{style:[E.margin.right400,E.flex.row,E.flex.alignItemsCenter]},Ae.createElement(K,{style:E.margin.right100},Ae.createElement(dt,{style:[E.text.uiSmall,E.text.colorMuted]},"Enter")),Ae.createElement(A.ArrowEnter.CSS,{style:[E.size.icon300,E.text.colorMuted]})):null):null,query:e,onQueryChange:g,onSubmitQuery:h,onClose:o,queryPlaceholder:n.hasAISearch?i("search_placeholder_ask"):i("search_placeholder")},!u||!n.hasAISearch?Ae.createElement(Eg,{query:e,space:n,onUpdateQuery:m,onSubmitAIQuery:h}):Ae.createElement(Ig,{query:c,space:n,onUpdateQuery:m,onSubmitAIQuery:h,allowEnterToOpen:e.length===0}))}s();var Da=w(x());var Dr=new Map;typeof window<"u"&&(window.GitBook=window.GitBook||{addEventListener:(r,n)=>{Dr.has(r)||Dr.set(r,[]),Dr.get(r).push(n)},removeEventListener:(r,n)=>{if(!Dr.has(r))return;let e=Dr.get(r),t=e.indexOf(n);t!==-1&&e.splice(t,1)}});function Og(r,...n){let e=Dr.get(r);e&&e.forEach(t=>{t(...n)})}function Dg(r){if(Da.useContext(rn).mode!=="public-content")throw new Error("useInjectIntegrationsScripts can only be used in public-content mode");Da.useEffect(()=>(Og("load"),()=>{Og("unload")}),[r.key])}function _a(r){let{space:n,assetHostname:e,collection:t,collectionSpaces:o,usesCookies:i}=r,{locale:a}=Pe.useContext(rn),{screen:c}=ar(),l=Go(),u=om(n.key,c),d=c.type==="space"&&typeof c.changeRequest=="string";if(d&&!u)throw new lt.NotFound("Change request not found");let m=c.type==="space"&&c.revision,g=d&&u?u.revisionCurrent:m&&c.revision||n.revision,h=Lo(l.store.getRevision(n.key,g,{metadata:!0}));if(!h)throw d?new lt.NotFound("Change request not found"):c.type==="space"&&c.revision?new lt.NotFound("Revision not found"):new Error("Expected revision");im(n),Dg(n);let P=Pe.useMemo(()=>ge(n,{}),[n.key,n.organization,n.collection]);if(c.type!=="space"||c.space!==n.key)throw new Error("screen should be the space we render");Pe.useEffect(()=>{if(n.searchKey)return vd(n.searchKey)},[n.searchKey]),pt(O=>{O.write({type:"font",font:n.font||"Inter",fontFamilyName:"gitbook-content-font"}),(c.revision||c.changeRequest||c.sideSheet)&&O.write({type:"meta",name:"robots",content:"noindex"}),O.setLang(a)}),Gh(n.privacyPolicyURL,Ds(n)||i);let[S,I]=zd(h,c.page),C={organization:n.organization,space:n.key,...I?{page:I.id}:{},...u?{changeRequest:u.key}:{revision:h.id}};return Pe.createElement(Pe.Fragment,null,S?Pe.createElement(dd,{to:{screen:S}}):null,Pe.createElement(Cd,{value:C},Pe.createElement(ag,{space:n,revision:h,collection:t,currentPage:I,collectionSpaces:o}),Pe.createElement(Cg,{space:n,revision:h,screen:c,analyticsContext:P,collection:t,collectionSpaces:o,assetHostname:e,currentPage:I}),Pe.createElement(Rg,{space:n}),Pe.createElement(Ag,{space:n}),Pe.createElement(kh,null),Pe.createElement(_h,{content:n,contentRef:tr(n.key)})))}s();var Vc=w(x());s();function _r(r){return r?r.endsWith("/")?r:`${r}/`:""}function _g(r,n){return e=>{let t=`/${_r(r.basePath)}`;switch(e.type){case"back_office":case"account":case"error_notfound":case"org_invite":case"org_join":case"org_settings":case"root":case"join":case"account_verification":case"integrations":case"import":case"template":case"welcome":case"contentkit_builder":case"snippet":case"snippets":case"insights":case"trash":case"site":throw new Error(`Cannot navigate to ${e.type} on public content`);case"home":{if(e.organization){let i=sr.read({type:"organization",organization:e.organization});t=Gr(i);break}throw new Error("Cannot navigate to home without an org on public content")}case"user":{let i=Zl(e.user);t=Gr(i);break}case"collection":{let i=sr.read({type:"collection",collection:e.collection});t=Gr(i);break}case"space":{let i=sr.read({type:"space",space:e.space});i.hostname===r.hostname&&(!r.basePath||i.pathname.startsWith(r.basePath))||n?(r.shareLink&&(t+=_r(r.shareLink)),i.pathname!==r.basePath&&(r.basePath?t+=_r(il(i.pathname,_r(r.basePath))):t+=_r(i.pathname))):t=Gr(i),t+=JC(e);break}case"legacy_space":case"legacy_account":throw new Error("Cannot navigate to legacy urls");default:re(e)}let o;if(typeof e.query=="string"){let i=new URLSearchParams;i.set("q",e.query),o=`?${i.toString()}`}return{pathname:t,hash:e.hash,search:o}}}function JC(r){let n="";return r.revision&&(n+=`~/revisions/${r.revision}/`),r.changeRequest&&(n+=`~/changes/${r.changeRequest}/`),n+=`${r.page[0]==="/"?r.page.slice(1):r.page}`,r.sideSheet&&(n=`${_r(n)}~/${r.sideSheet.type}${"tab"in r.sideSheet?`/${r.sideSheet.tab}`:""}`),n}s();function Mg(r,n,e,t=[]){return o=>{let{spaceKey:i,pathname:a}=ul({currentSpaceKey:n,collectionSpaces:t,collection:e,pathname:o.pathname,paths:r}),c={type:"space",space:i,page:""};GC(c,Ql(a)),o.hash&&(c.hash=o.hash.replace(/^#/,""));let u=new URLSearchParams(o.search).get("q");return typeof u=="string"&&(c.query=u),c}}function GC(r,n){es(n,[{path:`/~/revisions/:revision/:page${qo}`,onMatch:e=>{Object.assign(r,{page:e.params.page,revision:e.params.revision}),Mr(r,e,n)}},{path:"/~/revisions/:revision",onMatch:e=>{Object.assign(r,{revision:e.params.revision,page:""}),Mr(r,e,n)}},{path:`/~/changes/:changeRequest/:page${qo}`,onMatch:e=>{Object.assign(r,{changeRequest:e.params.changeRequest,revision:void 0,page:e.params.page}),Mr(r,e,n)}},{path:"/~/changes/:changeRequest",onMatch:e=>{Object.assign(r,{changeRequest:e.params.changeRequest,revision:void 0,page:""}),Mr(r,e,n)}},{path:`/:page${qo}`,onMatch:e=>{Object.assign(r,{page:e.params.page,diff:!1}),Mr(r,e,n)}},{path:"/",onMatch:e=>{Object.assign(r,{diff:!1,page:""}),Mr(r,e,n)}}])}function Mr(r,n,e){es(e,[{path:"/~/share/pdf",onMatch:t=>{Object.assign(r,{sideSheet:{type:"share",tab:"pdf"}})}}],{prefix:n.path})}function Ma(r,n,e,t,o){let i=em(),a=(0,Vc.useMemo)(()=>Mg(r,e,t,o),[r.hostname,r.basePath,r.shareLink,e,t,o]),c={hostname:r.hostname,pathname:r.basePath},l=(0,Vc.useMemo)(()=>_g({hostname:c.hostname,basePath:c.pathname,shareLink:r.shareLink},n),[r.hostname,r.basePath,r.shareLink]);return{forceHardNavigation:!i,getNavigationScreenFromLocation:a,getLocationForNavigationScreen:l}}function Lg(r){let{space:n,ssrRequestPath:e,ssrRouterContext:t,basePath:o,hostname:i,customToken:a,shareLink:c,assetHostname:l,preview:u=!1,usesCookies:d=!1}=r,m=Ma({hostname:i,basePath:o,shareLink:c},u,n.key),{primaryColor:g}=be(n);return et.createElement(Qr,{mode:"public-content",preview:u,locale:n.language},et.createElement(et.Suspense,{fallback:et.createElement(je,{size:"large"})},et.createElement(In,{primaryColor:g},et.createElement(Ro,null,et.createElement(ga,{ssrRequestPath:e,ssrRouterContext:t},et.createElement(si,{persist:!1,...m},et.createElement(Fi,null,a&&typeof window>"u"?et.createElement(je,{size:"large"}):et.createElement(_a,{space:n,assetHostname:l,usesCookies:d}))))))))}s();var Oe=w(x());function Hg(r){let{collection:n,basePath:e,hostname:t,customToken:o,collectionSpaces:i,ssrRequestPath:a,ssrRouterContext:c,shareLink:l,assetHostname:u,preview:d=!1,usesCookies:m=!1}=r,g=Ma({hostname:t,basePath:e,shareLink:l},d,void 0,n,i),{primaryColor:h}=be(n);if(!d&&n.publishingType!=="variants")throw new Error("we do not know how to render anything else than variants for now");return Oe.createElement(Qr,{mode:"public-content",preview:d,locale:n.language},Oe.createElement(In,{primaryColor:h},Oe.createElement(Ro,null,Oe.createElement(ga,{ssrRequestPath:a,ssrRouterContext:c},Oe.createElement(si,{persist:!1,...g},Oe.createElement(Oe.Suspense,{fallback:Oe.createElement(je,{size:"large"})},Oe.createElement(Fi,null,o&&typeof window>"u"?Oe.createElement(je,{size:"large"}):Oe.createElement(jC,{collection:n,collectionSpaces:i,assetHostname:u,usesCookies:m}))))))))}function jC(r){let{screen:n}=ar();if(n.type!=="space")throw new Error("screen should be a space");let[e]=gd([tr(n.space)]);if(!e)throw new Error("the space should exist");let{primaryColor:t}=be(e);return Oe.createElement(Qr,{locale:e.language},Oe.createElement(In,{primaryColor:t},Oe.createElement(Ro,null,Oe.createElement(_a,{...r,space:e}))))}s();var Ke=w(x()),Vg=w(ie());s();var Fc=w(x());async function $C(r){let n=await ii(),{data:e}=await n.hive.generateSpaceHiveReadAccessToken(r);return Object.values(e.contents)}function Ng(r){return r.client?Fc.createElement(As,{client:r.client},r.children):Fc.createElement(As,{endpoint:qd(),fetchContentAuthToken:$C,store:r.store},r.children)}s();var zn=w(x());var Wc=G("preview:child");function Bg(r,n){let[e,t]=zn.useState(r),[o,i]=zn.useState(void 0);return XC(e.footer),zn.useEffect(()=>{n&&(window.addEventListener("message",a=>{if(a.data.source!=="gitbook-preview-parent"||(Wc.info("receive message",a.origin,a.data),a.origin!==Ho()&&a.origin!=="http://127.0.0.1:5001"))return;let c=ol(a.data.payload),l=a.data.previewID;Wc.debug("update content with",c),t(c),i(l),window.parent.postMessage({source:"gitbook-preview-child"},"*")}),Wc.info("notify parent that we are ready"),window.parent.postMessage({source:"gitbook-preview-child"},"*"))},[n]),[e,o]}function XC(r){let n=zn.useRef(r);jo(()=>{r&&r!==n.current&&window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"}),n.current=r},[r])}s();var Ug=w(x());function Kc(){Ug.useEffect(()=>{typeof window>"u"},[])}function Yc(r){let n="collection"in r?r.collection:r.space,[e,t]=Bg(n,!!r.preview),o=r.hive&&r.hive.client?{client:r.hive.client}:{store:r.hive?.contentStore};return Kc(),Ke.createElement(Gc,null,Ke.createElement(eg,{content:e,isPreview:!!r.preview},Ke.createElement(Ng,{...o},Ke.createElement(QC,{...r,content:e,previewID:t}))))}function QC(r){let{content:n,previewID:e}=r;Kc();let[t]=Ke.useContext(ht);return Ke.createElement(rr,{theme:t},Ke.createElement(Ru,{theme:t},Ke.createElement(um,null,Ke.createElement(Ff,null,Ke.createElement(yu,{enabled:!0},"collection"in r?Ke.createElement(Hg,{...r,collection:n}):Ke.createElement(Lg,{...r,space:n})),e?Ke.createElement(Vg.View,{testID:e}):null))))}s();function zc(r){let n=new URLSearchParams(window.location.search),e=window.location.hash;if(n.has("jwt_token")){n.delete("jwt_token");let i=n.toString();window.history.replaceState({},"",`${window.location.pathname}${i?`?${i}`:""}${e||""}`)}let{dsn:t,tracesSampling:o}={...Qt.sentry,...Qt.sentry.publicContent};jc({dsn:t,release:el,projectId:Qt.firebase.projectId,tracesSampling:o}),window.location.hostname!=="127.0.0.1"&&al(r.hostname),qf({customToken:r.customToken,waitUserReady:!1})}s();function Fg(r){r?.firestore&&fd.fromJS(r.firestore),r?.head&&vu.cache.fromJS(r.head),r?.contentURLs&&sr.fromJS(r.contentURLs),r?.contentRefs&&Pd.fromJS(r.contentRefs),r?.screenToContentRefs&&Rd.fromJS(r.screenToContentRefs),r?.swaggers&&Hd.fromJS(r.swaggers),r?.api&&rd.fromJS(r.api)}s();var Wg=G("browser-compatibility");function Kg(){let r=["webcache.googleusercontent.com","translate.googleusercontent.com","translate.google.com"];return!window.location.hostname||r.includes(window.location.hostname)?(Wg.warning("The application is served over an unsupported hostname and has been made static."),!1):ZC()?!0:(Wg.warning("Your browser is missing required features, the application has been made static."),!1)}function ZC(){try{if("\u212B".normalize("NFKD")!=="A\u030A")return!1}catch{return!1}return!(!window.Intl||![].flat)}s();function Yg(r){document.readyState==="interactive"||document.readyState==="complete"?r():document.addEventListener("DOMContentLoaded",()=>{r()})}s();var zg=w(ey());function qc(r){return new Nt("ssr.deserializeFromHTML").wrapSync(()=>{let e=zg.default.decompress(r);return e?JSON.parse(e):null})}Kg()&&Yg(()=>{eP()});async function eP(){let r=window.__GITBOOK_INITIAL_PROPS__,n=qc(r);zc(n),window.__GITBOOK_LAZY_MODULES__&&await Fu(window.__GITBOOK_LAZY_MODULES__);let e=window.__GITBOOK_INITIAL_STATE__,t=qc(e);t?(Fg(t),Jc.AppRegistry.registerComponent("PublicContentApplication",()=>Yc),Jc.AppRegistry.runApplication("PublicContentApplication",{hydrate:!0,rootTag:document.querySelector(".gitbook-root"),initialProps:n})):console.error("Invalid state received from server, content won't be interactive")}
//# sourceMappingURL=https://app.gitbook.com/public/app/public-J4JLSNME.min.js.map
